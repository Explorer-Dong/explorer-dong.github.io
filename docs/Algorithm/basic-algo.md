---
title: åŸºç¡€ç®—æ³•
---

## å‰è¨€

æœ¬æ–‡ç²¾é€‰ä¸€äº›ã€ŒåŸºç¡€ç®—æ³•ã€çš„ä¾‹é¢˜å¹¶è¿›è¡Œè¯¦ç»†çš„åŸç†è®²è§£ä¸ä»£ç å®ç°ã€‚

ç®—æ³•æ ‡ç­¾ä¸»è¦æ˜¯ã€Œè´ªå¿ƒã€å‰ç¼€å’Œä¸å·®åˆ†ã€äºŒåˆ†ã€æœç´¢ã€åˆ†æ²»ã€ã€‚é¢˜ç›®æ¥æºä¸»è¦æ˜¯ Codeforcesã€æ´›è°·ã€LeetCodeã€‚

## å¯¼è¯»

ä¸ºäº†æå‡é˜…è¯»æ•ˆç‡ï¼Œæˆ‘å°†é¢˜ç›®çš„é‡è¦å…ƒä¿¡æ¯å•ç‹¬ç½—åˆ—ä¸ºäº†ä¸€å¼ è¡¨æ ¼ï¼Œå¯ä»¥æŒ‰ç…§è‡ªå·±çš„å®é™…éœ€æ±‚æŒ‰éœ€è·³è½¬é˜…è¯»ã€‚

| ç®—æ³•æ ‡ç­¾ ğŸ· |                     OJ é“¾æ¥ ğŸ”—                     |  éš¾åº¦ ğŸ”¥  |     æœ¬æ–‡é”šç‚¹ âš“     | å¤‡æ³¨ â­ |
| :--: | :---------------------------------------------: | :----: | :----------: | :--: |
| è´ªå¿ƒ | [CF](https://codeforces.com/contest/1873/problem/B) | CF 800 | [Good Kid](#good-kid) | / |
| è´ªå¿ƒã€åˆ†è®¨ | [CF](https://codeforces.com/contest/1873/problem/G) | CF 1500 | [ABBC or BACB](#abbc-or-bacb) | / |
| è´ªå¿ƒã€å † | [è“æ¡¥](https://www.lanqiao.cn/problems/5889/learning/?contest_id=145) | CF 1200 * | [é€šå…³](#é€šå…³) | / |
| è´ªå¿ƒã€æ ‘ã€æœ€çŸ­è·¯ | [è“æ¡¥](https://www.lanqiao.cn/problems/5890/learning/?contest_id=145) | CF 1400 * | [ä¸²é—¨](#ä¸²é—¨) | æ ‘çš„ç›´å¾„ |
| è´ªå¿ƒ | [Vijos](https://vijos.org/d/nnu_contest/p/1532) | CF 1200 * | [Codeforces rating](#codeforces-rating) | ç›¸é‚»äº¤æ¢éªŒè¯æœ€ä¼˜ |
| è´ªå¿ƒã€é€’æ¨ | [æ´›è°·](https://www.luogu.com.cn/problem/P5019) | æ´›è°· é»„ | [é“ºè®¾é“è·¯](#é“ºè®¾é“è·¯) | ä»è¾¹ç•Œå¼€å§‹è€ƒè™‘ |
| è´ªå¿ƒã€æšä¸¾ | [AcWing](https://www.acwing.com/problem/content/5483/) | CF 1300 * | [æˆªæ–­æ•°ç»„](#æˆªæ–­æ•°ç»„) | å‰ç¼€å’Œæ€§è´¨æ¨å¹¿ |
| è´ªå¿ƒã€æ„é€  | [åŠ›æ‰£](https://leetcode.cn/problems/maximum-binary-string-after-change/description/) | CF 1300 * | [ä¿®æ”¹åçš„æœ€å¤§äºŒè¿›åˆ¶å­—ç¬¦ä¸²](#ä¿®æ”¹åçš„æœ€å¤§äºŒè¿›åˆ¶å­—ç¬¦ä¸²) | / |
| è´ªå¿ƒ | [åŠ›æ‰£](https://leetcode.cn/problems/maximum-elegance-of-a-k-length-subsequence/) | CF 1800 * | [å­åºåˆ—æœ€å¤§ä¼˜é›…åº¦](#å­åºåˆ—æœ€å¤§ä¼˜é›…åº¦) | åæ‚”è´ªå¿ƒ |
| è´ªå¿ƒã€ä½è¿ç®—ã€åˆ†è®¨ | [æ´›è°·](https://www.luogu.com.cn/problem/P2114) | æ´›è°· ç»¿ | [èµ·åºŠå›°éš¾ç»¼åˆç—‡](#èµ·åºŠå›°éš¾ç»¼åˆç—‡) | æŒ‰ä½è´ªå¿ƒ |
| å·®åˆ† | [AcWing](https://www.acwing.com/problem/content/description/102/) | CF 1500 * | [å¢å‡åºåˆ—](#å¢å‡åºåˆ—) | / |

/// caption | <
åŸºç¡€ç®—æ³•ä¾‹é¢˜å¯¼è¯»è¡¨ï¼ˆæ‰“ * è¡¨ç¤ºè‡ªå·±é¢„ä¼°çš„éš¾åº¦ï¼‰
///

## é¢˜è§£

### Good Kid

é¢˜æ„ï¼šç»™å®šä¸€ä¸ªå«æœ‰ $n\ (1\le n \le 9)$ ä¸ªæ•°çš„æ•°åˆ—ï¼Œç°åœ¨å¯ä»¥é€‰æ‹©å…¶ä¸­çš„ä»»æ„ä¸€ä¸ªæ•°ä½¿å…¶ $+1$ã€‚é—®å¦‚ä½•é€‰æ‹©è¿™ä¸ªæ•°ï¼Œå¯ä»¥ä½¿å¾—ä¿®æ”¹åçš„æ•°åˆ—ä¸­çš„æ‰€æœ‰æ•°ä¹‹ç§¯çš„å€¼æœ€å¤§ã€‚è¾“å‡ºè¿™ä¸ªæœ€å¤§å€¼ã€‚

æ€è·¯ï¼šæ— è®ºé€‰æ‹©å“ªä¸ªæ•° $+1$ï¼Œå…¶å®å°±æ˜¯é€‰æ‹© $n-1$ ä¸ªæ•°çš„ä¹˜ç§¯å¢åŠ ä¸€å€ã€‚ä¸ºäº†æœ€å¤§åŒ–ç»“æœï¼Œé‚£è‡ªç„¶å°±æ˜¯é€‰æ‹©æœ€å¤§çš„ $n-1$ ä¸ªæ•°ä½¿å…¶ä¹˜ç§¯ç¿»å€ï¼Œé‚£ä¹ˆå°±æ˜¯é€‰æ‹©æ•°åˆ—ä¸­çš„æœ€å°å€¼ä½¿å…¶ $+1$ å³å¯ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$

=== "C"

    ```c
    #include <stdio.h>
    #include <stdlib.h>
    
    void solve() {
        int n;
        scanf("%d", &n);
    
        int *a = (int*)malloc(n * sizeof(int));
        for (int i = 0; i < n; i++) {
            scanf("%d", &a[i]);
        }
    
        int min_index = 0;
        for (int i = 1; i < n; i++) {
            if (a[i] < a[min_index]) {
                min_index = i;
            }
        }
    
        a[min_index] += 1;
        
        int ans = 1;
        for (int i = 0; i < n; i++) {
            ans *= a[i];
        }
    
        printf("%d\n", ans);
    
        free(a);
    }
    
    int main() {
        int T;
        scanf("%d", &T);
        while (T--) {
            solve();
        }
    }
    ```

=== "C++"

    ```c++
    #include <iostream>
    #include <vector>
    
    void solve() {
        int n;
        std::cin >> n;
        std::vector<int> a(n);
        for (int i = 0; i < n; i++) {
            std::cin >> a[i];
        }
    
        int min_index = 0;
        for (int i = 1; i < n; i++) {
            if (a[i] < a[min_index]) {
                min_index = i;
            }
        }
    
        a[min_index] += 1;
    
        int ans = 1;
        for (int i = 0; i < n; i++) {
            ans *= a[i];
        }
        
        std::cout << ans << "\n";
    }
    
    int main() {
        std::ios::sync_with_stdio(0);
        std::cin.tie(0);
    
        int T;
        std::cin >> T;
        while (T--) {
            solve();
        }
    }
    ```

=== "Java"

    ```java
    import java.util.Scanner;
    import java.util.ArrayList;
    
    public class Main {
        public static void main(String[] args) {
            Scanner sc = new Scanner(System.in);
            int T = sc.nextInt();
            while (T-- > 0) {
                solve(sc);
            }
            sc.close();
        }
    
        public static void solve(Scanner sc) {
            int n = sc.nextInt();
            ArrayList<Integer> a = new ArrayList<>(n);
            for (int i = 0; i < n; i++) {
                a.add(sc.nextInt());
            }
    
            int min_index = 0;
            for (int i = 1; i < n; i++) {
                if (a.get(i) < a.get(min_index)) {
                    min_index = i;
                }
            }
    
            a.set(min_index, a.get(min_index) + 1);
    
            int ans = 1;
            for (int i = 0; i < n; i++) {
                ans *= a.get(i);
            }
    
            System.out.println(ans);
        }
    }
    ```

=== "Python"

    ```python
    T = int(input())
    for _ in range(T):
        n = int(input())
        a = list(map(int, input().split()))
    
        a[a.index(min(a))] += 1
    
        ans = 1
        for num in a:
            ans *= num
        print(ans)
    ```

=== "JavaScript"

    ```javascript
    const readline = require('readline');
    const rl = readline.createInterface({
        input: process.stdin,
        output: process.stdout
    });
    
    let inputs = []
    let idx = 0;
    
    rl.on('line', (line_data) => {
        inputs.push(line_data);
    });
    
    rl.on('close', () => {
        let T = inputs[idx++];
        while (T--) {
            solve();
        }
    });
    
    function solve() {
        let n = inputs[idx++];
        let a = inputs[idx++].split(' ').map(Number);
    
        const min_index = a.indexOf(Math.min(...a));
        a[min_index] += 1;
    
        let ans = 1;
        for (const num of a) {
            ans *= num;
        }
    
        console.log('%d', ans);
    }
    ```

### ABBC or BACB

é¢˜æ„ï¼šç°åœ¨æœ‰ä¸€ä¸ªç”± A å’Œ B ä¸¤ç§å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸² $s\ (1\le|s|\le2\cdot 10^5)$ã€‚æ“ä½œä¸€ï¼Œå¯ä»¥å°† AB è½¬åŒ–ä¸º BCï¼›æ“ä½œäºŒï¼Œå¯ä»¥å°† BA è½¬åŒ–ä¸º CBã€‚é—®æœ€å¤šå¯ä»¥æ‰§è¡Œä¸Šè¿°æ“ä½œå¤šå°‘æ¬¡ã€‚ç»™å‡ºæœ€å¤šæ“ä½œæ¬¡æ•°ã€‚

æ€è·¯ï¼š

- ä»é¢˜é¢å¯ä»¥çœ‹å‡ºï¼Œæœ¬é¢˜çš„ä¸¤ç§æ“ä½œéƒ½å¯ä»¥çœ‹åšæ˜¯å¯¹ B å­—ç¬¦çš„ç§»åŠ¨ï¼Œæ“ä½œä¸€æ˜¯å‘å·¦ç§»åŠ¨ï¼Œæ“ä½œäºŒæ˜¯å‘å³ç§»åŠ¨ï¼Œå¹¶ä¸”åªèƒ½å•æ–¹å‘ç§»åŠ¨ã€‚æœ‰äº†è¿™ä¸ªæ€§è´¨ï¼Œé¢˜ç›®å°±è½¬åŒ–ä¸ºäº†æ€ä¹ˆé€‰æ‹©æ¯ä¸€ä¸ª B å­—ç¬¦çš„ç§»åŠ¨æ–¹å‘å¯ä»¥å°½å¯èƒ½å¤šçš„ç»è¿‡ A å­—ç¬¦ï¼›
- ä¸éš¾å‘ç°ï¼Œå¦‚æœå­—ç¬¦ä¸²çš„è¾¹ç¼˜æœ‰ B å­—ç¬¦æˆ–è€…æœ‰è‡³å°‘ä¸¤ä¸ªè¿ç»­çš„ B å­—ç¬¦ï¼Œå°±ä¸€å®šå¯ä»¥å°†æ‰€æœ‰çš„ A å­—ç¬¦éƒ½ç»è¿‡ã€‚åä¹‹ï¼Œå°±æ˜¯å•ç‹¬çš„ B å­—ç¬¦å°†ä¸€ä¸ªå®Œæ•´çš„ A ä¸²åˆ‡å‰²å¼€æ¥çš„æƒ…æ™¯ï¼ˆç‰¹åˆ¤æ²¡æœ‰ B å­—ç¬¦åˆ‡å‰² A å­—ç¬¦çš„æƒ…å†µï¼‰ï¼Œæ­¤æ—¶å°±æ˜¯å°å­¦å­¦åˆ°çš„çº¿æ®µæ¨¡å‹ã€‚ç”±äºçº¿æ®µä¸€å®šæ¯”ç«¯ç‚¹å¤šä¸€ä»½ï¼Œä¸ºäº†æœ€å¤§åŒ–ç»è¿‡çš„ A å­—ç¬¦æ•°é‡ï¼Œé€‰æ‹©é•¿åº¦æœ€çŸ­çš„ A å­ä¸²ä¸ç»è¿‡å³å¯ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$

=== "Python"

    ```python
    T = int(input())
    for _ in range(T):
        s = input()
        if s.count('BB') or s[0] == 'B' or s[-1] == 'B':
            print(s.count('A'))
        elif s.count('A') == len(s):
            print(0)
        else:
            ans = s.count('A')
            sub_length = len(s)  # æœ€çŸ­ A ä¸²é•¿åº¦
            i = 0
            while i < len(s):
                if s[i] == 'A':
                    j = i
                    while j < len(s) and s[j] == 'A':
                        j += 1
                    sub_length = min(sub_length, j - i)
                    i = j
                else:
                    i += 1
            ans -= sub_length
            print(ans)
    ```

### é€šå…³

é¢˜æ„ï¼šç»™å®šä¸€æ£µå«æœ‰ $n$ ä¸ªç»“ç‚¹çš„æ ‘å’Œä¸€ä¸ªåˆå§‹ä»·å€¼ï¼Œæ ‘ä¸­æ¯ä¸ªç»“ç‚¹ä»£è¡¨ä¸€ä¸ªå…³å¡ï¼Œæ¯ä¸ªå…³å¡æœ‰ã€Œé€šè¿‡æœ€ä½éœ€æ±‚ä»·å€¼ã€å’Œã€Œé€šè¿‡å¥–åŠ±ä»·å€¼ã€ä¸¤ä¸ªå±æ€§ã€‚åªæœ‰é€šè¿‡äº†çˆ¶ç»“ç‚¹å…³å¡æ‰èƒ½ç»§ç»­æŒ‘æˆ˜å­ç»“ç‚¹å…³å¡ã€‚ç°åœ¨ä»æ ¹ç»“ç‚¹å¼€å§‹å°è¯•é€šå…³ï¼Œé—®åº”è¯¥å¦‚ä½•é€‰æ‹©é€šå…³é¡ºåºä½¿å¾—é€šè¿‡çš„å…³å¡æ•°æœ€å¤šï¼Ÿç»™å‡ºæœ€å¤šé€šå…³çš„å…³å¡æ•°ã€‚

æ€è·¯ï¼šæˆ‘ä»¬æ¯æ¬¡è´ªå¿ƒåœ°é€‰æ‹©éœ€æ±‚ä»·å€¼æœ€å°çš„å…³å¡è¿›è¡Œé—¯å…³å³å¯ã€‚å¯ä»¥é€šè¿‡äºŒå‰å †æ•°æ®ç»“æ„æ¥å®ç°ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(n \log n)$

=== "Python"

    ```python
    from heapq import *
    
    n, have = tuple(map(int, input().split()))
    g = [[] for _ in range(n + 1)]
    
    for i in range(1, n + 1):
        fa, get, need = tuple(map(int, input().split()))
        g[fa].append((need, -get, i))
    
    ans = 0
    h = [g[0][0]]
    while len(h):
        need, neg_get, now = heappop(h)
        if have < need:
            break
        have += -neg_get
        ans += 1
        for ch in g[now]:
            heappush(h, ch)
    
    print(ans)
    ```

### ä¸²é—¨

é¢˜æ„ï¼šç»™å®šä¸€æ£µè¾¹æƒä¸ºæ­£çš„æ— å‘æ ‘ï¼Œå…±æœ‰ $n\ (1\le n \le 10^5)$ ä¸ªç»“ç‚¹ã€‚ç»™å‡ºã€Œåœ¨è®¿é—®åˆ°æ ‘ä¸­æ¯ä¸€ä¸ªç»“ç‚¹ã€æƒ…å†µä¸‹çš„æœ€çŸ­è·¯å¾„é•¿åº¦ã€‚

æ€è·¯ï¼š

- ä¸éš¾å‘ç°ä¸€ä¸ªæ€§è´¨ã€‚å¯¹äºè®¿é—®çš„èµ·ç‚¹ä¸ç»ˆç‚¹ï¼Œè·¯å¾„æ€»é•¿åº¦ä¸€å®šæ˜¯ã€Œèµ·ç‚¹åˆ°ç»ˆç‚¹çš„ç®€å•è·¯å¾„é•¿åº¦ã€+ã€Œæ‰€æœ‰åˆ†æ”¯è·¯å¾„é•¿åº¦çš„ä¸¤å€ã€ï¼Œç­‰ä»·äºã€Œæ‰€æœ‰è¾¹ä¹‹å’Œçš„ä¸¤å€ã€-ã€Œèµ·ç‚¹åˆ°ç»ˆç‚¹çš„ç®€å•è·¯å¾„é•¿åº¦ã€ï¼›
- æœ‰äº†ä¸Šè¿°çš„æ€§è´¨ï¼Œä¸ºäº†æœ€å°åŒ–æ€»è·¯å¾„é•¿åº¦ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰¾åˆ°ç®€å•è·ç¦»æœ€é•¿çš„ä¸¤ä¸ªç»“ç‚¹ä½œä¸ºèµ·ç‚¹ä¸ç»ˆç‚¹å³å¯ï¼Œè¿™é‡Œçš„ç®€å•è·¯å¾„å…¶å®å°±æ˜¯ã€Œæ ‘çš„ç›´å¾„ã€ï¼›
- ä¸ºäº†æ±‚è§£æ ‘çš„ç›´å¾„ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ç¡®å®šç›´å¾„çš„ä¸¤ä¸ªç«¯ç‚¹ã€‚å®¹æ˜“è¯æ˜ï¼Œæ¯éå†ä¸€æ¬¡æ ‘å³å¯ç¡®å®šç›´å¾„çš„ä¸€ä¸ªç«¯ç‚¹ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$

=== "Python"

    ```python
    import queue
    
    n = int(input())
    g = [[] for _ in range(n + 1)]
    
    ans = 0
    for _ in range(n - 1):
        u, v, w = tuple(map(int, input().split()))
        g[u].append((v, w))
        g[v].append((u, w))
        ans += w << 1
    
    def bfs(u: int) -> tuple[int, int]:
        dst = [0] * (n + 1)
        vis = [False] * (n + 1)
        q = queue.Queue()
        dst[u] = 0
        vis[u] = True
        q.put(u)
        while q.qsize():
            u = q.get()
            for v, w in g[u]:
                if vis[v]:
                    continue
                dst[v] = dst[u] + w
                vis[v] = True
                q.put(v)
        max_d = max(dst)
        max_i = dst.index(max_d)
        return max_d, max_i
    
    _, max_i = bfs(1)
    max_d, _ = bfs(max_i)
    
    print(ans - max_d)
    ```

### Codeforces rating

é¢˜æ„ï¼šç»™å®šä¸€ä¸ªå«æœ‰ $n\ (1 \le n \le 10^5)$ ä¸ªæ•°çš„æ•°åˆ— $P$ å’Œä¸€ä¸ªåˆå§‹å€¼ $R$ã€‚ç°åœ¨å¯ä»¥é€‰æ‹©æ•°åˆ—ä¸­ä»»æ„æ•°é‡ä¸ªå…ƒç´ å¹¶å¯¹ $R$ æ‰§è¡Œ $R'\leftarrow \dfrac{3}{4} R + \dfrac{1}{4} P$ çš„å˜æ¢ã€‚ç»™å‡ºè¿ç®—åçš„æœ€å¤§ $R$ å€¼ã€‚

æ€è·¯ï¼šæ’é˜Ÿæ‰“æ°´ç»å…¸ä¾‹é¢˜ã€‚æˆ‘ä»¬å°†æ•°åˆ—å‡åºæ’åºåéå†æ¨¡æ‹Ÿå³å¯ã€‚è‡³äºä¸ºä»€ä¹ˆè¿™æ ·è´ªå¿ƒæœ€ä¼˜ï¼Œå¯ä»¥ä½¿ç”¨äº¤æ¢æ³•ç»“åˆå½’çº³æ³•è¿›è¡Œè¯æ˜ã€‚å…·ä½“åœ°ï¼Œä¸ºäº†è®© $R$ å˜å¤§ï¼Œé€‰æ‹©çš„å…ƒç´ ä¸€å®šè¦æ¯” $R$ å¤§ã€‚å¦‚æœä»…æœ‰ä¸¤ä¸ªæ¯” $R$ å¤§çš„å…ƒç´  $P_i$ å’Œ $P_j$ï¼Œå‡è®¾å¯ä»¥ç»è¿‡ä¸¤æ­¥è¿ç®—ï¼š

$$
\begin{aligned}
R'&=\frac{3}{4}R+\frac{1}{4}P_i \\
R''&=\frac{3}{4}R'+\frac{1}{4}P_j \\
&=\frac{9}{16}R+\frac{3}{16}P_i+\frac{1}{4}P_j
\end{aligned}
$$

å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªå…ƒç´ å¯¹äºä¸¤æ¬¡æ“ä½œåå¾—åˆ°çš„ $R''$ è´¡çŒ®æ˜¯ä¸ä¸€æ ·çš„ï¼Œæˆ‘ä»¬å½“ç„¶å¸Œæœ›æ›´å¤§å€¼å¯¹åº”çš„è´¡çŒ®ç³»æ•°æ›´å¤§ï¼Œä¹Ÿå°±æ˜¯è¯´ $P_j$ çš„å€¼åº”è¯¥å¤§äº $P_i$ã€‚æ¨è€Œå¹¿ä¹‹ï¼Œå®¹æ˜“å‘ç°å¯¹äºæ‰€æœ‰èƒ½å¤Ÿè´¡çŒ®ç»™ $R$ çš„ $P$ å…ƒç´ ï¼Œè¶Šæ™šè´¡çŒ®çš„å€¼å¯¹åº”çš„ã€Œè´¡çŒ®ç³»æ•°ã€æ˜¯é€’å¢çš„ï¼Œå› æ­¤æˆ‘ä»¬åœ¨é€‰æ‹© $P$ ä¸­å…ƒç´ æ—¶ï¼ŒæŒ‰ç…§ã€Œå€¼çš„é€’å¢ã€é¡ºåºå°±æ˜¯æœ€ä¼˜çš„ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(n\log n)$

=== "C++"

    ```c++
    #include <iostream>
    #include <algorithm>
    #include <cmath>
    #include <vector>
    
    int main() {
        int n;
        double r;
        std::cin >> n >> r;
    
        std::vector<int> a(n);
        for (int i = 0; i < n; i++) {
            std::cin >> a[i];
        }
    
        sort(a.begin(), a.end());
    
        for (auto num: a) {
            if (num > r) {
                r = 0.75 * r + 0.25 * num;
            }
        }
    
        std::cout << std::round(r) << "\n";
    
        return 0;
    }
    ```

=== "Python"

    ```python
    n, r = tuple(map(int, input().split()))
    a = list(map(int, input().split()))
    
    a.sort()
    for num in a:
        if num > r:
            r = r * 0.75 + num * 0.25
    print(round(r))
    ```

### é“ºè®¾é“è·¯

é¢˜æ„ï¼šç»™å®šä¸€ä¸ªå«æœ‰ $n\ (1 \le n \le 10^5)$ ä¸ªæ•°åºåˆ— $a$ï¼Œæ¯æ¬¡æ“ä½œå¯ä»¥è®©åºåˆ—ä¸­ä¸€ä¸ªè¿ç»­åŒºé—´å†…æ‰€æœ‰æ•° $-1$ï¼Œå‰ææ˜¯åŒºé—´ä¸­çš„æ•°éƒ½è¦ $>1$ã€‚è¾“å‡ºå°†æ‰€æœ‰çš„æ•°å…¨éƒ¨éƒ½å‡åˆ° $0$ çš„æœ€å°æ“ä½œæ¬¡æ•°ã€‚

æ€è·¯ï¼šä»ã€Œè¾¹ç•Œã€å¼€å§‹è€ƒè™‘ã€‚å®šä¹‰ $f_i$ è¡¨ç¤ºåºåˆ— $[0,i]$ å…¨éƒ¨å‡åˆ° $0$ çš„æœ€å°æ“ä½œæ¬¡æ•°ï¼Œé‚£ä¹ˆ $f_i$ ä»…ä»…å–å†³äº $f_{i-1}$ ä»¥åŠ $a_i$ å’Œ $a_{i-1}$ çš„å¤§å°å…³ç³»ã€‚ç”¨æ»šåŠ¨å˜é‡æ‰«æä¸€éå³å¯ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$

=== "Python"

    ```python
    n = int(input())
    a = list(map(int, input().split()))
    
    ans = a[0]
    for i in range(1, n):
        ans += max(0, a[i] - a[i - 1])
    
    print(ans)
    ```

### æˆªæ–­æ•°ç»„

é¢˜æ„ï¼šå®šä¹‰ã€Œå¹³è¡¡æ•°ç»„ã€ä¸ºå¥‡å¶å…ƒç´ æ•°é‡ç›¸åŒçš„æ•°ç»„ã€‚ç»™å®šä¸€ä¸ªå«æœ‰ $n\ (1 \le n \le 100)$ ä¸ªæ•°çš„å¹³è¡¡æ•°ç»„ $a$ å’Œæˆªæ–­æ€»æˆæœ¬ï¼Œç°åœ¨éœ€è¦å°†è¯¥æ•°ç»„æˆªæ–­ä¸ºå°½å¯èƒ½å¤šçš„å­å¹³è¡¡æ•°ç»„ï¼Œå®šä¹‰æˆªæ–­ä»£ä»·ä¸º $|a_i-a_{i+1}|$ã€‚ç»™å‡ºæœ€å¤šæˆªæ–­æ“ä½œæ¬¡æ•°ã€‚

æ€è·¯ï¼šæœ¬é¢˜æœ€å…³é”®çš„æ€§è´¨å°±æ˜¯ï¼Œå‡è®¾éƒ½æ˜¯å¹³è¡¡æ•°ç»„ï¼Œé‚£ä¹ˆä¹Ÿä¸€å®šæ˜¯å¹³è¡¡æ•°ç»„ï¼Œå³æˆªæ–­ç‚¹ä¹‹é—´ä¹Ÿä¸€å®šæ˜¯å¹³è¡¡æ•°ç»„ï¼ˆè¿™ä¸å‰ç¼€å’Œæ€§è´¨ç±»ä¼¼ï¼‰ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥æšä¸¾æ‰€æœ‰çš„å¯æˆªæ–­ä½ç½®ï¼Œç„¶åæŒ‰ç…§ä»£ä»·è´ªå¿ƒåœ°å‡åºæšä¸¾å³å¯ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(n \log n)$

=== "Python"

    ```python
    n, B = tuple(map(int, input().split()))
    a = list(map(int, input().split()))
    
    odd_cnt, even_cnt = 0, 0
    cuts = []
    for i in range(n):
        if a[i] & 1:
            odd_cnt += 1
        else:
            even_cnt += 1
        if i < n - 1 and odd_cnt == even_cnt:
            cuts.append(abs(a[i + 1] - a[i]))
    
    cuts.sort()
    ans = 0
    for cut in cuts:
        if cut > B:
            break
        B -= cut
        ans += 1
    
    print(ans)
    ```

### ä¿®æ”¹åçš„æœ€å¤§äºŒè¿›åˆ¶å­—ç¬¦ä¸²

é¢˜æ„ï¼šç»™å®šä¸€ä¸ª 01 å­—ç¬¦ä¸² $s\ (1 \le |s| \le 10^5)$ï¼Œç»™å‡ºä»»æ„æ¬¡ä¸‹åˆ—æ“ä½œåæœ€å¤§å€¼å¯¹åº”çš„å­—ç¬¦ä¸²ã€‚

1. $00 \to 10$
2. $10 \to 01$

æ€è·¯ï¼š

- æ“ä½œäºŒå¯ä»¥çœ‹åšå°† 1 å‘å³ç§»åŠ¨ï¼Œè¿™å¯¹æœ€ç»ˆæ•°å€¼å¤§å°æ— ç›Šã€‚æ“ä½œä¸€å¯ä»¥æå‡æ•°å€¼å¤§å°ï¼Œè¿™æ˜¯æˆ‘ä»¬å¸Œæœ›å¹²çš„ï¼›
- è€ƒè™‘è´ªå¿ƒã€‚æ˜¾ç„¶å¯¹äºå‰ç¼€è¿ç»­çš„ 1 æˆ‘ä»¬æ²¡æ³•æ“ä½œï¼Œä¿ç•™å³å¯ã€‚å¯¹äºä»ç¬¬ä¸€ä¸ª 0 å¼€å§‹çš„å°¾ä¸²ï¼Œæœ€ä½³è´ªå¿ƒç­–ç•¥æ˜¯åˆ©ç”¨æ“ä½œäºŒå°†æ‰€æœ‰çš„ 0 ç§»åŠ¨åˆ°å°¾ä¸²çš„æœ€å‰é¢ï¼Œç„¶åå†ç”¨æ“ä½œä¸€å¾—åˆ°æœ€å¤§å°¾ä¸²ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$

=== "C++"

    ```cpp
    class Solution {
    public:
        string maximumBinaryString(string binary) {
            int n = binary.size();
    
            string res;
    
            // å‰ç¼€1å…¨éƒ¨åŠ å…¥ç­”æ¡ˆ
            int i = 0;
            for (i = 0; i < n; i++) {
                if (binary[i] == '0') {
                    break;
                } else {
                    res += '1';
                }
            }
    
            // éå‰ç¼€1çš„éƒ¨åˆ†ä¸€å®šå¯ä»¥æ“ä½œä¸º 00...011..1ï¼Œè¿›è€Œè½¬åŒ–ä¸º 11...11011...1
            int zero = count(binary.begin() + i, binary.end(), '0');
            if (zero > 0) {
                for (int j = 0; j < zero - 1; j++) res += '1';
                res += '0';
            }
    
            while (res.size() < n) res += '1';
    
            return res;
        }
    };
    ```

=== "Python"

    ```python
    class Solution:
        def maximumBinaryString(self, binary: str) -> str:
            ans = ""
    
            # å‰ç¼€
            for c in binary:
                if c == '0':
                    break
                ans += '1'
    
            # å°¾ä¸²
            cnt0 = binary.count('0')
            if cnt0 in [0, 1]:
                return binary
            ans += '1' * (cnt0 - 1) + '0'
            while len(ans) < len(binary):
                ans += '1'
    
            return ans
    ```

### å­åºåˆ—æœ€å¤§ä¼˜é›…åº¦

é¢˜æ„ï¼šç»™å®šé•¿åº¦ä¸º $n \ (1\le n \le 10^5)$ çš„äºŒå…ƒç»„åºåˆ—ï¼ŒäºŒå…ƒç»„è¡¨ç¤ºæ¯ä¸€ä¸ªå…ƒç´ çš„ä»·å€¼ä¸ç§ç±»ã€‚ç°åœ¨éœ€è¦ä»ä¸­å¯»æ‰¾ä¸€ä¸ªé•¿åº¦ä¸º $k$ çš„å­åºåˆ—ä½¿å¾—è¯¥åºåˆ—ã€Œæ‰€æœ‰ç‰©å“ä»·å€¼ä¹‹å’Œ + ç‰©å“ç§ç±»æ•°çš„å¹³æ–¹ã€çš„å€¼æœ€å¤§ã€‚è¿”å›è¯¥æœ€å¤§å€¼ã€‚

æ€è·¯ï¼šæˆ‘ä»¬é‡‡ç”¨åæ‚”è´ªå¿ƒçš„æ€è·¯ã€‚é¦–å…ˆæŒ‰ç…§ç‰©å“æœ¬èº«ä»·å€¼è¿›è¡Œé™åºæ’åºå¹¶é€‰æ‹©å‰ $k$ ä¸ªç‰©å“ä½œä¸ºé›†åˆ $S$ï¼Œç„¶åæŒ‰é¡ºåºæšä¸¾å‰©ä¸‹çš„ç‰©å“è¿›è¡Œæ›¿æ¢å†³ç­–ã€‚å½“ä¸”ä»…å½“é›†åˆ S æœ‰ç‰©å“çš„ç±»åˆ«é‡å¤ä¸”å‰©ä¸‹ç‰©å“çš„ç±»åˆ«ä¸å­˜åœ¨äºé›†åˆ S ä¸­æ‰æœ‰å¯èƒ½è®©ç­”æ¡ˆæ›´å¤§ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(n \log n)$

=== "Python"

    ```python
    class Solution:
        def findMaximumElegance(self, items: List[List[int]], k: int) -> int:
            n = len(items)
            items.sort(key=lambda x: -x[0])
    
            # è´ªå¿ƒ
            val, cat = 0, 0
            cnt = [0] * (n + 1)
            rep = []
            for i in range(k):
                v, c = items[i]
                val += v
                cat += cnt[c] == 0
                cnt[c] += 1
                if cnt[c] > 1:
                    rep.append(v)
    
            # åæ‚”
            ans = val + cat ** 2
            for i in range(k, n):
                v, c = items[i]
                if cnt[c] == 0 and len(rep):
                    val -= rep.pop()
                    val += v
                    cat += 1
                    cnt[c] += 1
                    ans = max(ans, val + cat ** 2)
    
            return ans
    ```

### èµ·åºŠå›°éš¾ç»¼åˆç—‡

é¢˜æ„ï¼šç»™å®š $n\ (2 \le n \le 10^5)$ ä¸ªæ“ä½œï¼ˆåªå¯èƒ½æ˜¯ã€ŒæŒ‰ä½ä¸ã€æŒ‰ä½æˆ–ã€æŒ‰ä½å¼‚æˆ–ã€ä¸‰ç§ä¹‹ä¸€ï¼‰ä¸æ“ä½œæ•° $t\ (0 \le t \le 10^9)$ï¼Œå†ç»™å®šä¸€ä¸ªèŒƒå›´ä¸Šç•Œ $m\ (2 \le m \le  10^9)$ã€‚ç°åœ¨éœ€è¦é€‰æ‹©ä¸€ä¸ª $[0,m]$ çš„åˆå§‹å€¼ï¼Œä½¿å¾—åˆå§‹å€¼ç»è¿‡è¿™ $n$ æ¬¡äºŒå…ƒè¿ç®—åå¾—åˆ°çš„ç»“æœæœ€å¤§ã€‚è¾“å‡ºæœ€å¤§è¿ç®—ç»“æœã€‚

æ€è·¯ï¼šç”±äºä¸‰ç§æ“ä½œæ˜¯ç›¸é‚»æ— å…³çš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æŒ‰ä½å•ç‹¬è€ƒè™‘ã€‚å¯¹äºç¬¬ $i$ ä½ï¼Œåˆå§‹å€¼ä¸º $0$ æˆ– $1$ åœ¨ç»è¿‡ $n$ æ¬¡è¿ç®—åå‡æœ‰å¯èƒ½å¾—åˆ° $0$ å’Œ $1$ï¼Œå› æ­¤æˆ‘ä»¬æœ‰ $4$ ç§æƒ…å†µéœ€è¦è®¨è®ºï¼Œæ¯ç§æƒ…å†µè´ªå¿ƒåœ°é€‰æ‹©æœ€ä¼˜å³å¯ã€‚è€Œä¸ºäº†è®©ç»“æœæœ€å¤§ï¼Œæˆ‘ä»¬éœ€è¦ä»é«˜ä½å¼€å§‹æšä¸¾ï¼Œå› ä¸ºå½“åˆå§‹å€¼å¡« $1$ æ›´ä¼˜æ—¶ï¼Œå¦‚æœå…ˆå¡«ä½ä½ï¼Œå¯èƒ½ä¼šå¯¼è‡´é«˜ä½å¡«ä¸äº† $1$ ä»è€Œå¾—ä¸åˆ°æœ€å¤§çš„ç­”æ¡ˆå€¼ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$

=== "Python"

    ```python
    n, m = map(int, input().strip().split())
    
    x, y = 0, -1
    for _ in range(n):
        inp = input().strip().split()
        op, t = inp[0], int(inp[1])
        if op == "AND":
            x &= t
            y &= t
        elif op == "OR":
            x |= t
            y |= t
        else:
            x ^= t
            y ^= t
    
    ans, num = 0, 0
    for i in range(30, -1, -1):
        a, b = (x >> i) & 1, (y >> i) & 1
        # ä¸‹åˆ—å››ç§æƒ…å†µå¯ä»¥ç®€åŒ–ï¼Œä¸ºäº†é€»è¾‘æ¸…æ™°æ€§å°±ä¸ç®€åŒ–äº†
        if a and b:
            ans |= 1 << i
        elif a and not b:
            ans |= 1 << i
        elif not a and b:
            if num | (1 << i) <= m:
                num |= 1 << i
                ans |= 1 << i
        else:
            pass
    
    print(ans)
    ```

### å¢å‡åºåˆ—

é¢˜æ„ï¼šç»™å®šä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„æ•°ç»„ï¼Œæ¯æ¬¡å¯ä»¥é€‰æ‹©ä¸€ä¸ªåŒºé—´ $[l,r]$ï¼Œä½¿ä¸‹æ ‡åœ¨è¿™ä¸ªåŒºé—´å†…çš„æ•°éƒ½åŠ ä¸€æˆ–è€…éƒ½å‡ä¸€ã€‚æ±‚è‡³å°‘éœ€è¦å¤šå°‘æ¬¡æ“ä½œæ‰èƒ½ä½¿æ•°ç»„ä¸­çš„æ‰€æœ‰æ•°éƒ½ä¸€æ ·ï¼Œå¹¶æ±‚å‡ºåœ¨ä¿è¯æœ€å°‘æ¬¡æ•°çš„å‰æä¸‹ï¼Œæœ€ç»ˆå¾—åˆ°çš„æ•°ç»„å¯èƒ½æœ‰å¤šå°‘ç§ã€‚

æ€è·¯ï¼š

- åŒºé—´ä¿®æ”¹ä¸å¥½åˆ‡å…¥ï¼Œå°†å…¶è½¬åŒ–ä¸ºå·®åˆ†æ•°ç»„çš„ç«¯ç‚¹ä¿®æ”¹æ“ä½œã€‚è®°åŸæ•°ç»„ä¸º $s$ï¼Œå·®åˆ†æ•°ç»„ä¸º $a$ï¼Œé‚£ä¹ˆã€Œé€šè¿‡åŒºé—´ä¿®æ”¹æ“ä½œè®©æ•°ç»„ä¸­æ‰€æœ‰çš„æ•°éƒ½ä¸€æ ·ã€å°±ç­‰ä»·äºã€Œé€šè¿‡ç«¯ç‚¹ä¿®æ”¹æ“ä½œè®©å·®åˆ†æ•°ç»„ä¸­ä¸‹æ ‡åœ¨ $[1,n-1]$ åŒºé—´çš„å…ƒç´  $a_{1\sim n-1}$ éƒ½ä¸º $0$ï¼Œæ¯æ¬¡æ“ä½œè´ªå¿ƒåœ°é€‰æ‹© $a_{1\sim n-1}$ ä¸­ç¬¦å·ç›¸å¼‚çš„ä¸€å¯¹å…ƒç´ å³å¯ï¼›
- æ˜¾ç„¶åœ¨ç»è¿‡ä¸Šè¿°ç«¯ç‚¹ä¿®æ”¹æ“ä½œåå·®åˆ†æ•°ç»„ $a_{1\sim n-1}$ ä¸ä¸€å®šæ°å¥½å…¨ä¸º $0$ï¼Œå¯èƒ½ä¼šå‡ºç°æŸä¸ªæ•°ä¸ä¸º $0$ çš„æƒ…å†µï¼Œè®°ä½œ $a_i$ã€‚æ­¤æ—¶åŸæ•°ç»„ $s$ å‘ˆç°çš„å¤§å°å…³ç³»å°±æ˜¯ $s_{0\sim i-1}$ å…¨éƒ¨ç›¸ç­‰ï¼Œ$s_{i\sim n-1}$ å…¨éƒ¨ç›¸ç­‰ï¼Œä¸”åè€…ä¸å‰è€…çš„å·®å€¼å°±æ˜¯ $a_i$ã€‚ä¸ºäº†è®©è¿™ä¸¤éƒ¨åˆ†ç›¸ç­‰ï¼Œå°±å¯ä»¥é€šè¿‡ $a_i$ æ¬¡æ“ä½œå¾—åˆ° $a_i$ ç§ä¸åŒçš„æœ€ç»ˆç»“æœã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$

=== "Python"

    ```python
    n = int(input())
    s = [int(input()) for _ in range(n)]

    pos = neg = 0
    for i in range(1, n):
        a = s[i] - s[i - 1]
        if a >= 0:
            pos += a
        else:
            neg += a

    print("%d\n%d" % (max(pos, -neg), abs(pos + neg) + 1))
    ```

## äºŒåˆ†

äºŒåˆ†æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªçº¿æ€§çš„ç®—æ³•æ€ç»´ï¼Œåªæ˜¯æ¯”çº¿æ€§æ€ç»´æ›´è¿›ä¸€æ­¥çš„æ˜¯ï¼ŒäºŒåˆ†æ€ç»´éœ€è¦æç‚¼å‡ºé¢˜é¢ä¸­ä¸¤ä¸ªçº¿æ€§ç›¸å…³çš„å˜é‡ï¼Œå³å•è°ƒå˜åŒ–çš„ä¸¤ä¸ªå˜é‡ï¼Œä»è€Œé‡‡ç”¨äºŒåˆ†åŠ é€Ÿæ£€ç´¢ã€‚

### ã€äºŒåˆ†ç­”æ¡ˆã€‘Building an Aquarium

<https://codeforces.com/contest/1873/problem/E>

> é¢˜æ„ï¼šæƒ³è±¡æœ‰ä¸€ä¸ªäºŒç»´å¹³é¢ï¼Œç°åœ¨æœ‰ä¸€ä¸ªæ•°åˆ—ï¼Œæ¯ä¸€ä¸ªæ•°è¡¨ç¤ºå¹³é¢å¯¹åº”åˆ—çš„é«˜åº¦ï¼Œç°åœ¨è¦ç»™è¿™ä¸ªå¹³é¢åœ¨ä¸¤è¾¹åŠ ä¸ŠæŠ¤æ ï¼Œé—®æŠ¤æ æœ€é«˜å¯ä»¥è®¾ç½®ä¸ºå¤šé«˜ï¼Œå¯ä»¥ä½¿å¾—åœ¨å®Œå…¨å¡«æ»¡çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨çš„æ°´é‡ä¸ä¼šè¶…è¿‡ç»™å®šçš„ç”¨æ°´é‡ã€‚å·²çŸ¥æœ€å¤§ç”¨æ°´é‡ä¸ºk
>
> æ€è·¯ï¼šå¯¹äºä¸€ä¸ªæŠ¤æ é«˜åº¦ï¼Œæ°´æ± é«˜åº¦ä½äºæŠ¤æ é«˜åº¦çš„åœ°æ–¹éƒ½éœ€è¦è¢«æ°´å¡«æ»¡ã€‚ä¸ºäº†ä¾¿äºåˆ†æï¼Œæˆ‘ä»¬å¯ä»¥å°†æ°´æ± é«˜åº¦è¿›è¡Œæ’åºã€‚é‚£ä¹ˆå°±ä¼šå¾ˆæ˜¾ç„¶çš„ä¸€ä¸ªäºŒåˆ†é¢˜ç›®äº†ï¼Œæˆ‘ä»¬éœ€è¦äºŒåˆ†çš„å°±æ˜¯æŠ¤æ çš„é«˜åº¦ï¼ˆæœ€å°ä¸º1ï¼Œæœ€å¤§éœ€è¦è€ƒè™‘ä¸€ä¸‹ï¼Œå°±æ˜¯åªæœ‰ä¸€åˆ—çš„æƒ…å†µä¸‹ï¼Œæœ€å¤§é«˜åº¦å°±æ˜¯æœ€é«˜æ°´æ± é«˜åº¦ $\max(a_i)+max(k)$ï¼‰ï¼Œcheckçš„æ¡ä»¶å°±æ˜¯å½“å‰hçš„æŠ¤æ é«˜åº¦æ—¶ï¼Œæ¶ˆè€—çš„æ°´é‡ä¸æœ€å¤§ç”¨æ°´é‡ä¹‹é—´çš„å¤§å°å…³ç³»ï¼Œå¦‚æœè¶…è¿‡äº†ï¼Œé‚£ä¹ˆé«˜åº¦å°±è¦ä¸‹é™ï¼Œåä¹‹å¯ä»¥ä¸Šå‡ã€‚ç”±äºæ˜¯æ±‚æœ€å¤§é«˜åº¦ï¼Œå› æ­¤è¦ä½¿ç”¨çš„æ˜¯æ±‚å³è¾¹ç•Œçš„äºŒåˆ†æ¿å­

```cpp
#include <bits/stdc++.h>
using namespace std;

typedef long long ll;

void solve()
{
    int n, w;
    cin >> n >> w;
    vector<ll> a(n);
    
    for (int i = 0; i < n; i ++)
        cin >> a[i];
    
    sort(a.begin(), a.end());
    
    ll l = 0, r = 2e9 + 1;
    while (l < r)
    {
        ll h = (l + r + 1) >> 1;
        
        ll t = 0;
        for (int i = 0; i < n; i ++)
            if (a[i] < h)
                t += h - a[i];
            else break;
        
        if (t <= w) l = h;
        else r = h - 1;
    }
    cout << r << endl;
}

int main()
{
    int T; cin >> T;
    while (T --) solve();
    return 0;
}
```

### ã€äºŒåˆ†ç­”æ¡ˆã€‘åˆ†ç»„

<https://www.lanqiao.cn/problems/5129/learning/>

> é¢˜æ„ï¼šç»™å®šä¸€ä¸ªåºåˆ—ï¼Œç°åœ¨éœ€è¦å°†è¿™ä¸ªæ•°åˆ—åˆ†ä¸ºkç»„ï¼Œå¦‚ä½•åˆ†ç»„å¯ä»¥ä½¿å¾—æ¯ä¸€ç»„çš„æå·®ä¸­ï¼Œæœ€å¤§å€¼æœ€å°
>
> æœ€å¼€å§‹æƒ³åˆ°çš„æ€è·¯ï¼šå¾ˆå®¹æ˜“è”æƒ³åˆ°çš„ä¸€ç§æ–¹æ³•å…¶å®å°±æ˜¯é«˜ä¸­ç»„åˆæ•°å­¦ä¸­å­¦åˆ°çš„â€œéš”æ¿æ³•â€ï¼Œç°åœ¨æœ‰nä¸ªæ•°ï¼Œéœ€è¦åˆ†æˆkç»„ï¼Œåˆ™æ–¹æ¡ˆæ•°å°±æ˜¯åœ¨n-1ä¸ªç©ºæ¡£ä¸­æ’å…¥k-1ä¸ªéš”æ¿ï¼Œå³ $C_{n-1}^{k-1}$ ç§æ–¹æ¡ˆ
>
> æ—¶é—´å¤æ‚åº¦ $O(n^2)$
>
> ä¼˜åŒ–æ€è·¯ï¼šä¸Šè¿°æ€è·¯æ˜¯æ­£å‘æ€ç»´ï¼Œå³å¯¹äºæ„æ€åˆ†ç»„æƒ…å†µè®¡ç®—æå·®ã€‚æˆ‘ä»¬ä¸å¦¨é€†å‘æ€ç»´ï¼Œå³æšä¸¾æå·®çš„æƒ…å†µï¼Œåˆ¤æ–­æ­¤æ—¶çš„åˆ†ç»„æƒ…å†µã€‚å¦‚æœå¯¹äºå½“å‰çš„æå·®limï¼Œæˆ‘ä»¬æ˜¾ç„¶å¯ä»¥åˆ†æˆnç»„ï¼Œå³æœ‰ä¸€ä¸ªæœ€å¤§åˆ†ç»„å€¼ï¼›æˆ‘ä»¬ä¹Ÿå¯ä»¥æ±‚ä¸€ä¸ªæœ€å°åˆ†ç»„å€¼cntï¼Œå³å¦‚æœå†å°‘åˆ†ä¸€ç»„é‚£ä¹ˆæ­¤æ—¶çš„æå·®å°±ä¼šè¶…è¿‡å½“å‰çº¦æŸçš„æå·®å€¼limã€‚å› æ­¤å¯¹äºå½“å‰çº¦æŸçš„æå·®å€¼limï¼Œæˆ‘ä»¬å¯ä»¥æ±‚ä¸€ä¸ªæœ€å°åˆ†ç»„å€¼cnt
>
> - å¦‚æœå½“å‰çš„æœ€å°åˆ†ç»„å€¼cnt > kï¼Œé‚£ä¹ˆ $\left [ cnt,n \right ]$ å°±æ— æ³•åŒ…å«kï¼Œä¹Ÿå°±æ˜¯è¯´å½“å‰çº¦æŸçš„æå·®limä¸ç¬¦åˆæ¡ä»¶ï¼Œlimåå°
>- å¦‚æœå½“å‰çš„æœ€å°åˆ†ç»„å€¼cnt <= kï¼Œé‚£ä¹ˆ $\left [ cnt,n \right ]$ å°±ä¸€å®šåŒ…å«kï¼Œä¸”å½“å‰åˆ†ç»„çš„æœ€å°æå·®ä¸€å®šæ˜¯ <= çº¦æŸçš„æå·®å€¼limï¼Œlimåå¤§
> 
>äºæ˜¯äºŒåˆ†æå·®çš„æ€è·¯å°±è·ƒç„¶çº¸ä¸Šäº†ã€‚æˆ‘ä»¬äºŒåˆ†æå·®ï¼Œç„¶åæ ¹æ®å¯ä»¥åˆ†ç»„çš„æœ€å°æ•°é‡cntåˆ¤æ–­äºŒåˆ†çš„ç»“æœè¿›è¡Œå·¦å³çº¦æŸè°ƒæ•´å³å¯ã€‚
> 
> æ—¶é—´å¤æ‚åº¦ $O(n \log n)$

```cpp
#include <bits/stdc++.h>
using namespace std;


bool check(int lim, vector<int>& a, int n, int k) {
    int cnt = 1; // å½“å‰å¯ä»¥åˆ†çš„æœ€å°ç»„æ•°
    int pre = a[0];
    for (int i = 0; i < n; i++) {
        if (a[i] - pre > lim) {
            pre = a[i];
            cnt++;
        }
    }
    return cnt <= k;
}


void solve() {
    int n, k;
    cin >> n >> k;

    vector<int> a(n);
    for (int i = 0; i < n; i++) {
        cin >> a[i];
    }

    sort(a.begin(), a.begin() + n);

    int l = 0, r = a[n - 1] - a[0];
    while (l < r) {
        int mid = (l + r) >> 1;
        if (check(mid, a, n, k)) {
            // åˆ†çš„æœ€å°ç»„æ•° <= kï¼Œåˆ™å½“å‰æå·®å¤§äº†
            r = mid;
        } else {
            // åˆ†çš„æœ€å°ç»„æ•° >  kï¼Œåˆ™å½“å‰æå·®å°äº†
            l = mid + 1;
        }
    }

    cout << r << "\n";
}


int main() {
    ios::sync_with_stdio(false);
    cin.tie(0), cout.tie(0);
    int T = 1;
    // cin >> T;
    while (T--) {
        solve();
    }    
    return 0;
}
```

### ã€äºŒåˆ†ç­”æ¡ˆã€‘æœ¨æåŠ å·¥

<https://www.luogu.com.cn/problem/P2440>

> é¢˜æ„ï¼šç»™å®šä¸€ä¸ªåºåˆ—ï¼Œç°åœ¨éœ€è¦å°†è¿™ä¸ªåºåˆ—åˆ‡åˆ†ä¸ºç­‰é•¿çš„ k æ®µï¼Œé•¿åº¦å¿…é¡»ä¸ºæ•´æ•°ä¸”å°½å¯èƒ½çš„é•¿ï¼Œå¦‚æœæ— æ³•åˆ‡åˆ†å¯ä»¥å°†å¤šä½™çš„é•¿åº¦ä¸¢å¼ƒï¼Œé—®æœ€é•¿çš„é•¿åº¦æ˜¯å¤šå°‘
>
> æ€è·¯ï¼šå¯ä»¥å‘ç°åˆ‡åˆ†é•¿åº¦ä¸åˆ‡åˆ†çš„æ®µæ•°å…·æœ‰å•è°ƒæ€§ï¼Œå³åˆ‡åˆ†çš„é•¿åº¦è¶Šé•¿ï¼Œåˆ‡å‡ºæ¥çš„æ®µæ•°å°±è¶Šå°‘ï¼Œå¯ä»¥è¿›è¡ŒäºŒåˆ†ã€‚äºŒåˆ†çš„æ€è·¯å°±æ˜¯ç›´æ¥äºŒåˆ†ç­”æ¡ˆï¼Œæ ¹æ®é•¿åº¦åˆ¤æ–­å¯åˆ‡å¾—çš„æ®µæ•°ï¼Œæœ€ç»ˆå¥—å³è¾¹ç•Œçš„æ¨¡æ¿æ‰¾åˆ°æœ€å¤§çš„é•¿åº¦å³å¯ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹äºæ— æ³•åˆ‡å‰²çš„æƒ…å†µï¼Œå°±æ˜¯éœ€è¦åˆ‡å‡ºçš„æ®µæ•° k è¶…è¿‡äº†åºåˆ—ä¹‹å’Œ
>
> æ—¶é—´å¤æ‚åº¦ï¼š$O(n\log {(1e8)})$

```cpp
#include <bits/stdc++.h>
#define int long long 
using namespace std;

const int N = 1e5 + 10;

int n, k;
int a[N];

bool chk(int x) {
    int sum = 0;
    for (int i = 0; i < n; i++)
        sum += a[i] / x;
    return sum >= k;
}

void solve() {
    cin >> n >> k;
    
    int sum = 0;
    for (int i = 0; i < n; i++) {
        cin >> a[i];
        sum += a[i];
    }
    
    int l = 1, r = 1e8;
    while (l < r) {
        int mid = (l + r + 1) >> 1;
        if (chk(mid)) l = mid;
        else r = mid - 1;
    }
    
    if (k > sum) cout << "0\n";
    else cout << r << "\n";    
} 

signed main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();    
    return 0;
}
```

### ã€äºŒåˆ†ç­”æ¡ˆã€‘è·³çŸ³å¤´

<https://www.luogu.com.cn/problem/P2678>

> é¢˜æ„ï¼šç»™å®š n ä¸ªé€’å¢çš„ä¸é‡å¤æ•°ï¼Œç°åœ¨å¯ä»¥ä»å…¶ä¸­æ‹¿æ‰ k ä¸ªæ•°ï¼Œä½¿å¾—ç›¸é‚»æ•°å­—ä¹‹é—´çš„æœ€å°å·®å€¼æœ€å¤§ï¼Œé—®æœ€å¤§çš„æœ€å°å·®å€¼æ˜¯å¤šå°‘
>
> æ€è·¯ï¼š**äºŒåˆ†ç­”æ¡ˆã€‚å°†ç­”æ¡ˆçœ‹åš y è½´ï¼Œæ‹¿æ‰çš„æ•°çš„æ•°é‡çœ‹åš x è½´ï¼Œå°±æ˜¯äºŒåˆ† y å€¼ã€‚**å¯ä»¥å‘ç°æ‹¿çš„æ•°å­—è¶Šå¤šï¼Œæœ€å°å·®å€¼å°±è¶Šå¤§ï¼Œå…·æœ‰å•è°ƒæ€§ï¼Œå¯ä»¥äºŒåˆ†ã€‚æˆ‘ä»¬ç›´æ¥äºŒåˆ†ç­”æ¡ˆï¼Œå³ç›´æ¥äºŒåˆ†æœ€å°å·®å€¼çš„å…·ä½“æ•°å€¼ï¼Œé€šè¿‡åˆ¤æ–­å½“å‰çš„æœ€å°å·®å€¼è‡³å°‘éœ€è¦æ‹¿æ‰å¤šå°‘ä¸ªæ•°æ‰èƒ½æ»¡è¶³ï¼Œè¿›è¡Œ check æ“ä½œã€‚è‡³äºå¦‚ä½•è®¡ç®—è‡³å°‘è¦æ‹¿æ‰çš„æ•°å­—ï¼Œæˆ‘ä»¬é‡‡ç”¨**å³è´ªå¿ƒ**å‡†åˆ™ï¼Œå³æ£€æŸ¥å½“å‰ç‚¹ä¸ä¸Šä¸€ä¸ªç‚¹ä¹‹é—´çš„è·ç¦»æ˜¯å¦æ»¡è¶³æœ€å°å·®å€¼çš„è¦æ±‚ï¼Œå¦‚æœä¸æ»¡è¶³å°±éœ€è¦è®°æ•°ï¼Œä¸ºäº†ä¾¿äºåç»­çš„è®¡ç®—ï¼Œç›´æ¥å°†å½“å‰çš„ä¸‹æ ‡ç”¨ä¸Šä¸€ä¸ªç‚¹çš„ä¸‹æ ‡è¦†ç›–æ‰å³å¯
>
> æ—¶é—´å¤æ‚åº¦ï¼š$O(n\log n)$

```cpp
#include <bits/stdc++.h>
#define int long long 
using namespace std;

const int N = 5e4 + 10;

int lim, n, k;
int a[N], b[N];
bool del[N];

bool ok(int x) {
    int cnt = 0;
    memset(del, false, sizeof del);
    
    for (int i = 1; i <= n; i++) {
        b[i] = a[i];
    }
    
    for (int i = 1; i <= n; i++) {
        if (b[i] - b[i - 1] < x) {
            del[i] = true;
            b[i] = b[i - 1];
            cnt++;
        }
    }
    
    if (lim - b[n] < x) {
        cnt++;
    }
    
    return cnt <= k;
}

void solve() {
    cin >> lim >> n >> k;
    for (int i = 1; i <= n; i++)
        cin >> a[i];
    
    int l = 1, r = lim;
    while (l < r) {
        int mid = (l + r + 1) >> 1;
        if (ok(mid)) l = mid;
        else r = mid - 1;
    }
    
    cout << r << "\n";
}

signed main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();    
    return 0;
}
```

### ã€äºŒåˆ†ç­”æ¡ˆã€‘è·¯æ ‡è®¾ç½®

<https://www.luogu.com.cn/problem/P3853>

> é¢˜æ„ï¼šä¸ç¬¬å››é¢˜é¢˜é¢å‡ ä¹ä¸€è‡´ï¼Œåªæ˜¯ç°åœ¨ä¸æ˜¯ä»åºåˆ—ä¸­æ‹¿èµ° k æ•°ä¸ªï¼Œè€Œæ˜¯å¾€åºåˆ—ä¸­æ’å…¥ k ä¸ªæ•°ï¼ˆæ’å…¥æ•°å­—åè¦ä¿è¯åºåˆ—ä»ç„¶æ²¡æœ‰é‡å¤æ•°ä¸”é€’å¢ï¼‰ï¼Œé—®åœ¨æ’å…¥ä¸€å®šæ•°é‡æ•°å­—çš„æƒ…å†µä¸‹ï¼Œæœ€å°çš„æœ€å¤§å·®å€¼æ˜¯å¤šå°‘
>
> æ€è·¯ï¼š**äºŒåˆ†ç­”æ¡ˆã€‚å°†ç­”æ¡ˆçœ‹åš y è½´ï¼Œæ‹¿æ‰çš„æ•°çš„æ•°é‡çœ‹åš x è½´ï¼Œå°±æ˜¯äºŒåˆ† y å€¼ã€‚**åŒæ ·å¯ä»¥å‘ç°ï¼Œæ’å…¥çš„æ•°å­—è¶Šå¤šï¼Œæœ€å¤§å·®å€¼å°±è¶Šå°ï¼Œå…·æœ‰å•è°ƒæ€§ï¼Œå¯ä»¥äºŒåˆ†ã€‚æˆ‘ä»¬ä¾ç„¶ç›´æ¥äºŒåˆ†ç­”æ¡ˆï¼Œå³ç›´æ¥äºŒåˆ†æœ€å¤§å·®å€¼çš„å…·ä½“æ•°å€¼ï¼Œé€šè¿‡åˆ¤æ–­å½“å‰çš„æœ€å¤§å·®å€¼éœ€è¦æ’å…¥å¤šå°‘ä¸ªæ•°æ¥æ£€æŸ¥å½“å‰çŠ¶æ€æ˜¯å¦åˆç†ã€‚éœ€è¦æ’å…¥çš„æ•°å­—çš„ä¸ªæ•°ä¸ºï¼š
> $$
> \left \lceil \frac{a[i]-a[i-1]}{dist_{max}}\right \rceil - 1
> $$
> æ—¶é—´å¤æ‚åº¦ï¼š$O(n\log n)$

```cpp
#include <bits/stdc++.h>
#define int long long 
using namespace std;

const int N = 1e6;

int lim, n, k;
int a[N];

bool chk(int x) {
    int cnt = 0;
    for (int i = 1; i < n; i++) {
        int gap = a[i] - a[i - 1];
        if (gap > x) {
            cnt += (gap + x - 1) / x - 1;
        }
    }
    return cnt > k;
}

void solve() {
    cin >> lim >> n >> k;
    for (int i = 0; i < n; i++) {
        cin >> a[i];
    }
    
    int l = 1, r = lim;
    while (l < r) {
        int mid = (l + r) >> 1;
        if (chk(mid)) l = mid + 1;
        else r = mid;
    }
    
    cout << r << "\n";
} 

signed main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();    
    return 0;
}
```

### ã€äºŒåˆ†ç­”æ¡ˆã€‘æ•°åˆ—åˆ†æ®µ Section II

<https://www.luogu.com.cn/problem/P1182>

> é¢˜æ„ï¼šç»™å®šä¸€ä¸ªæ— åºçš„åºåˆ—ï¼Œç°åœ¨éœ€è¦å°†è¿™ä¸ªåºåˆ—è¿›è¡Œåˆ†æ®µï¼ˆè¿ç»­çš„ï¼‰ï¼Œåˆ†æˆæŒ‡å®šçš„æ®µæ•°ã€‚é—®åº”è¯¥å¦‚ä½•åˆ†æ®µå¯ä»¥ä½¿å¾—æ‰€æœ‰æ®µçš„åˆ†æ®µå’Œçš„æœ€å¤§å€¼æœ€å°ï¼Œè¾“å‡ºè¿™ä¸ªæœ€å°çš„æœ€å¤§å€¼
>
> æ€è·¯ï¼š**äºŒåˆ†ç­”æ¡ˆï¼Œå°†ç­”æ¡ˆçœ‹åš y è½´ï¼Œæ‹¿æ‰çš„æ•°çš„æ•°é‡çœ‹åš x è½´ï¼Œå°±æ˜¯äºŒåˆ† y å€¼ã€‚**å¯ä»¥å‘ç°ï¼Œåˆ†çš„æ®µæ•°è¶Šå¤šï¼Œæ‰€æœ‰åˆ†æ®µå’Œçš„æœ€å¤§å€¼å°±è¶Šå°ï¼Œå…·æœ‰å•è°ƒæ€§ï¼Œå¯ä»¥äºŒåˆ†ã€‚æˆ‘ä»¬ç›´æ¥äºŒåˆ†ç­”æ¡ˆï¼Œå³ç›´æ¥äºŒåˆ†åˆ†æ®µæœ€å¤§å€¼ï¼Œé€šè¿‡åˆ¤æ–­å½“å‰æœ€å¤§å€¼çš„çº¦æŸæ¡ä»¶ä¸‹å¯ä»¥åˆ†çš„ç»„æ•°è¿›è¡Œåˆ¤æ–­ã€‚è‡³äºå¦‚ä½•è®¡ç®—å½“å‰æœ€å¤§å€¼æ¡ä»¶ä¸‹å¯åˆ†å¾—çš„ç»„æ•°ï¼Œç›´æ¥çº¿æ€§æ‰«æè¿›è¡Œå±€éƒ¨æ±‚å’Œå³å¯
>
> æ—¶é—´å¤æ‚åº¦ï¼š$O(n \log n)$

```cpp
#include <bits/stdc++.h>
#define int long long 
using namespace std;

const int N = 1e5 + 10;

int n, k;
int a[N];

// å½“å‰åˆ†ç»„æ—¶æœ€å¤§å­æ®µå’Œä¸º x 
bool chk(int x) {
    int cnt = 0;
    for (int i = 0, s = 0; i < n; i++) {
        if (a[i] > x) return true;
        
        if (s + a[i] <= x) s += a[i];
        else {
            cnt++;
            s = a[i];
        }
    }
    cnt += 1;
    
    return cnt > k;
}

void solve() {
    cin >> n >> k;
    for (int i = 0; i < n; i++) {
        cin >> a[i];
    }
    
    int l = 0, r = 1e9;
    while (l < r) {
        int mid = (l + r) >> 1;
        if (chk(mid)) l = mid + 1;
        else r = mid;
    }
    
    cout << r << "\n";
}

signed main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();    
    return 0;
}
```

### ã€äºŒåˆ†ç­”æ¡ˆã€‘kotoriçš„è®¾å¤‡

<https://www.luogu.com.cn/problem/P3743>

> é¢˜æ„ï¼šç°åœ¨æœ‰ä¸€æ‰¹ç”µå­è®¾å¤‡ï¼Œæ¯ä¸€ä¸ªç”µå­è®¾å¤‡æœ‰ä¸€ä¸ªç”µé‡æ¶ˆè€—é€Ÿåº¦ä¸å½“å‰å‰©ä½™ç”µé‡ï¼Œç°åœ¨æœ‰ä¸€ä¸ªå……ç”µå™¨æœ‰ä¸€ä¸ªç¡®å®šçš„å……ç”µé€Ÿåº¦ã€‚é—®è¿™æ‰¹è®¾å¤‡æœ€ä¹…å¯ä»¥è¿ä½œå¤šä¹…ï¼Ÿå½“å¯ä»¥æ— é™è¿ä½œæ—¶è¾“å‡º -1
>
> æ€è·¯ï¼šå¯ä»¥å‘ç°ï¼Œæƒ³è¦è¿è¡Œçš„è¶Šä¹…ï¼Œéœ€è¦è¡¥å……çš„ç”µé‡å°±è¶Šå¤šï¼Œå…·æœ‰å•è°ƒæ€§ï¼Œå¯ä»¥ç›´æ¥äºŒåˆ†ç­”æ¡ˆã€‚å¾ˆæ˜¾ç„¶æˆ‘ä»¬å¯ä»¥æ ¹æ®æœŸæœ›è¿è¡Œçš„æ—¶é—´è¿›è¡Œ check æ“ä½œï¼Œé€šè¿‡æ¯”å¯¹å½“å‰æœŸæœ›æ—¶é—´å¯ä»¥å……çš„ç”µé‡ä¸éœ€è¦è¡¥å……çš„ç”µé‡è¿›è¡Œæ¯”å¯¹æ¥ä¿®æ”¹è¾¹ç•Œå€¼ã€‚**éœ€è¦æ³¨æ„çš„æ˜¯**è¾¹ç•Œçš„é€‰æ‹©ï¼Œæœ€é•¿å¯è¿è¡Œæ—¶é—´ä¸º 1e10ï¼Œå…·ä½“ [æ¨å¯¼](https://www.luogu.com.cn/discuss/468555) å¾…å®š
>
> æ—¶é—´å¤æ‚åº¦ï¼š$O(n(\log{10^{10})})$

```cpp
#include <bits/stdc++.h>
#define int long long
using namespace std;

const int N = 100010;

int n;
double p, v[N], s[N];

bool chk(double x) {
    // x ä¸ºå½“å‰çŠ¶æ€æœŸæœ›ä½¿ç”¨çš„æ—¶é—´ 
    double need = 0;
    for (int i = 1; i <= n; i++)
        if (v[i] * x > s[i])
            need += v[i] * x - s[i];
    return need <= x * p;
}

void solve() {
    cin >> n >> p;
    for (int i = 1; i <= n; i++) {
        cin >> v[i] >> s[i];
    }
    
    double l = 0, r = 1e10 + 10;
    while (r - l > 1e-6) {
        double mid = (l + r) / 2; 
        if (chk(mid)) l = mid;
        else r = mid;
    }
    
    if (r > 1e10) cout << -1 << "\n";
    else cout << r << "\n";
}

signed main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();
    return 0;
}
```

### ã€äºŒåˆ†ç­”æ¡ˆ/å¹¶æŸ¥é›†ã€‘å…³æŠ¼ç½ªçŠ¯ :fire:

<https://www.luogu.com.cn/problem/P1525>

> é¢˜æ„ï¼šç»™å®šä¸€ä¸ªæ— å‘å›¾ï¼Œæ²¡æœ‰é‡è¾¹å’Œè‡ªç¯ï¼Œè¾¹æƒä¸ºæ­£ã€‚ç°åœ¨éœ€è¦å°†å›¾ä¸­æ‰€æœ‰çš„é¡¶ç‚¹åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä½¿å¾—ä¸¤éƒ¨åˆ†ä¸­æœ€å¤§çš„è¾¹æƒå°½å¯èƒ½å°ï¼Œé—®è¯¥æœ€å°è¾¹æƒæ˜¯å¤šå°‘
>
> æ€è·¯ä¸€ï¼šäºŒåˆ†ç­”æ¡ˆã€‚
>
> - æ€è·¯ï¼šæœ¬é¢˜ä¸€çœ¼äºŒåˆ†å›¾é—®é¢˜ï¼Œä½†æ˜¯æœ‰äº›å˜åŒ–çš„æ˜¯å·¦å³éƒ¨å¹¶éæ•£ç‚¹å›¾ï¼Œå…¶ä¸­æ˜¯æœ‰è¿è¾¹çš„ã€‚å¦‚ä½•æ±‚å‡ºæœ€å°è¾¹æƒå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆæƒ³ï¼Œé¦–å…ˆç­”æ¡ˆä¸€å®šå‡ºè‡ªå·¦å³éƒ¨çš„è¿è¾¹ä¸­ï¼ˆé™¤éå·¦å³éƒ¨å…¨æ˜¯æ•£ç‚¹ï¼Œé‚£ç­”æ¡ˆå°±æ˜¯ 0ï¼‰ï¼Œä¹‹æ‰€ä»¥å¯ä»¥é‡‡ç”¨äºŒåˆ†å›¾å°†ç‚¹é›†åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬åœ¨æŸç§è§„åˆ™ä¸‹å¿½ç•¥äº†å…¶ä¸­å¥‡æ•°ç¯ï¼ˆäºŒåˆ†å›¾å®šç†ï¼‰çš„ä¸€äº›è¾¹ã€‚å½“è§„åˆ™å®šä¹‰ä¸º **å¿½ç•¥è¾¹æƒä¸è¶…è¿‡ x** çš„è¾¹æ—¶ï¼Œè¯¥å›¾è‹¥å¯ä»¥äºŒåˆ†ï¼Œé‚£ä¹ˆå¿½ç•¥è¾¹æƒæ¯” x å€¼æ›´å¤§çš„è¾¹æ—¶ï¼Œè¯¥å›¾åŒæ ·ä¸€å®šä¹Ÿå¯ä»¥äºŒåˆ†ï¼Œåä¹‹åˆ™ä¸ä¸€å®šå¯ä»¥äºŒåˆ†ï¼ˆç‰¹æ€§å›¾å¦‚ä¸‹ï¼‰ã€‚å…·å¤‡å•è°ƒæ€§ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡ **äºŒåˆ†é˜ˆå€¼ã€æ£€æŸ¥å›¾æ˜¯å¦å¯äºŒåˆ†** çš„æ–¹æ³•æ¥è®¡ç®—å‡ºç­”æ¡ˆ
>
> ![image-20240223011704197](https://dwj-oss.oss-cn-nanjing.aliyuncs.com/images/202402230117928.png)
>
> æ—¶é—´å¤æ‚åº¦ï¼š$\Theta(\log C_{max} \times (n+e))$
>
> æ€è·¯äºŒï¼šå¹¶æŸ¥é›†ã€‚
>
> - æ€è·¯ï¼š
>
> - æ—¶é—´å¤æ‚åº¦ï¼š

äºŒåˆ†åˆ¤å®šäºŒåˆ†å›¾ä»£ç ï¼š

```cpp
```

å¹¶æŸ¥é›†ä»£ç ï¼š

```cpp
```

### ã€äºŒåˆ†ç­”æ¡ˆã€‘æ‘†æ”¾æ£‹å­

<https://www.acwing.com/problem/content/5562/>

> é¢˜æ„ï¼šç»™å®šä¸€ä¸ª 01 åºåˆ—è¡¨ç¤ºä¸€ä¸ª $1\times n$ çš„æ£‹å­åºåˆ—ï¼Œå…¶ä¸­ 1 è¡¨ç¤ºæœ‰æ£‹å­ï¼Œ0 è¡¨ç¤ºæ²¡æœ‰æ£‹å­ã€‚ç°åœ¨ç»™å®š k ä¸ªæ£‹å­ï¼Œå¦‚ä½•æ”¾ç½®å¯ä»¥ä½¿å¾—æ£‹ç›˜ä¸Šè¿ç»­çš„æ£‹å­é•¿åº¦å°½å¯èƒ½é•¿ï¼Ÿç»™å‡ºä¸€ä¸ªåˆæ³•çš„æœ€é•¿çš„åºåˆ—
>
> æ€è·¯ï¼šå¯ä»¥å‘ç°ï¼Œæƒ³è¦åºåˆ—å°½å¯èƒ½çš„é•¿ï¼Œé‚£ä¹ˆéœ€è¦æ”¾ç½®çš„æ£‹å­å°±è¦å°½å¯èƒ½çš„å¤šï¼Œå…·å¤‡å•è°ƒæ€§ï¼Œå¯ä»¥äºŒåˆ†ã€‚æˆ‘ä»¬äºŒåˆ†ç­”æ¡ˆï¼Œå³æœ€é•¿åºåˆ—é•¿åº¦ã€‚å¯¹äºå·²çŸ¥çš„ k ä¸ªå¯æ”¾ç½®æ£‹å­ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°æœ€å¤§çš„åºåˆ—é•¿åº¦ï¼Œäºæ˜¯æˆ‘ä»¬å¥—ç”¨**å¯»æ‰¾å³è¾¹ç•Œ**æ¨¡æ¿ã€‚æ£€æŸ¥æ–¹æ³•å°±æ˜¯åˆ¤æ–­å¯¹äºå½“å‰çš„é•¿åº¦ï¼Œé€šè¿‡å‰ç¼€å’Œä¸æ»‘åŠ¨çª—å£çš„å½¢å¼è®¡ç®—å½“å‰çª—å£å†…éœ€è¦æ”¾ç½®å¤šå°‘é¢—æ£‹å­æ‰èƒ½è¿ä¸ºä¸€ä½“ï¼š
>
> - è‹¥éœ€è¦çš„æ£‹å­æ•° < kï¼Œè¯´æ˜å¯ä»¥ç»§ç»­å¢å¤§é•¿åº¦
> - è‹¥éœ€è¦çš„æ£‹å­æ•° > kï¼Œè¯´æ˜å½“å‰é•¿åº¦æ— æ³•æ»¡è¶³ï¼Œè¦ç¼©å°é•¿åº¦
> - è‹¥éœ€è¦çš„æ£‹å­æ•° = kï¼Œå½’å±åœ¨ < k çš„ç±»æ¯”ä¸­å³å¯ã€‚
>
> æ—¶é—´å¤æ‚åº¦ï¼š$O(n \log n)$

```cpp
#include <iostream>
#include <cstring>
#include <vector>
#include <queue>
#include <stack>
#include <algorithm>
#include <unordered_map>
#include <set>
using namespace std;

const int N = 300010;

int n, k;
int a[N], s[N];

bool chk(int x) {
    for (int i = x; i <= n; i++) {
        if (x - (s[i] - s[i - x]) <= k) {
            return true;
        }
    }
    return false;
}

void solve() {
    cin >> n >> k;
    for (int i = 1; i <= n; i++) {
        cin >> a[i];
        s[i] = s[i - 1] + a[i];
    }

    int l = 0, r = n;
    while (l < r) {
        int mid = (l + r + 1) >> 1;
        if (chk(mid)) l = mid;
        else r = mid - 1;
    }

    for (int i = r; i <= n; i++) {
        if (r - (s[i] - s[i - r]) <= k) {
            for (int j = i - r + 1; j <= i; j++) {
                a[j] = 1;
            }
            break;
        }
    }

    cout << r << "\n";
    for (int i = 1; i <= n; i++) cout << a[i] << " ";
}

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();
    return 0;
}
```

### ã€äºŒåˆ†ç­”æ¡ˆã€‘ç›–æ¥¼

<https://www.acwing.com/problem/content/description/5569/>

> é¢˜æ„ï¼šç»™å®š H ä¸ªæ­£æ•´æ•°åˆ†åˆ«ä¸º 1 åˆ° Hã€‚ç°åœ¨è¦å°†è¿™ H ä¸ªæ­£æ•´æ•°åˆ†ç»™ä¸¤ä¸ªäººï¼Œå…¶ä¸­ä¸€ä¸ªäººå¸Œæœ›è·å¾—å¯ä»¥ä¸è¢« x æ•´é™¤çš„æ•°ï¼Œå¦ä¸€ä¸ªäººå¸Œæœ›å¯ä»¥è·å¾—ä¸è¢« y æ•´é™¤çš„æ•°ã€‚å…¶ä¸­ x å’Œ y å‡ä¸ºè´¨æ•°ï¼Œé—®æœ€å°çš„ H æ˜¯å¤šå°‘ï¼Ÿ
>
> æ€è·¯ï¼š
>
> - å¾ˆæ˜¾ç„¶çš„ä¸€ä¸ªäºŒåˆ†ç­”æ¡ˆã€‚å› ä¸º H è¶Šå¤§ï¼Œè¶Šæœ‰å¯èƒ½æ»¡è¶³è¿™ä¸¤ä¸ªäººçš„è¦æ±‚ï¼Œå…·å¤‡å•è°ƒæ€§ã€‚
>
> - é‚£ä¹ˆç°åœ¨çš„é—®é¢˜å°±æ˜¯æ£€æŸ¥å‡½æ•°çš„è®¾è®¡ã€‚å¯¹äºå½“å‰çš„é«˜åº¦ hï¼Œå³ h ä¸ªæ­£æ•´æ•°ï¼Œå¾ˆæ˜¾ç„¶å¯ä»¥åˆ’åˆ†å‡ºä¸‹é¢çš„é›†åˆå…³ç³»
>
>     <img src="https://dwj-oss.oss-cn-nanjing.aliyuncs.com/images/202404091829325.png" alt="é›†åˆå…³ç³»" style="zoom:50%;" />
>
>     å…¶ä¸­ h-p-q+a çš„éƒ¨åˆ†ä¸¤ä¸ªäººéƒ½å¯ä»¥è·å¾—ã€‚æœ€ç­–ç•¥æ˜¯ï¼Œp-a ä¸ q-a çš„éƒ½ç»™å¦å¤–çš„äººï¼Œå¦‚æœä¸å¤Ÿï¼Œä» h-p-q+a ä¸­æ‹¿ï¼Œå¦‚æœè¿˜ä¸å¤Ÿé‚£å°±è¯´æ˜å½“å‰ h æ— æ³•æ»¡è¶³ï¼Œéœ€è¦å¢å¤§ hï¼Œåä¹‹è¯´æ˜ h å¯ä»¥æ»¡è¶³ï¼Œç»§ç»­å¯»æ‰¾ç­”æ¡ˆçš„å·¦è¾¹ç•Œã€‚
>
> æ—¶é—´å¤æ‚åº¦ï¼š$\Theta(\log (N+M))$

```cpp
#include <iostream>
using namespace std;
typedef long long ll;

ll n, m, x, y;

bool chk(ll h) {
    ll p = h / x, q = h / y, a = h / (x * y);

    return max(0ll, n - (q - a)) + max(0ll, m - (p - a)) <= h - p - q + a;
}

void solve() {
    cin >> n >> m >> x >> y;

    ll l = 1, r = 1e15;
    while (l < r) {
        ll mid = (l + r) >> 1;
        if (chk(mid)) r = mid;
        else l = mid + 1;
    }

    cout << r << "\n";
}

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();
    return 0;
}
```

å°æ’æ›²ã€‚ä¸€å¼€å§‹å†™çš„æ£€æŸ¥å‡½æ•° code å§‹ç»ˆåªèƒ½é€šè¿‡ 9/10ï¼Œæ£€æŸ¥å‡½æ•°çš„ä»£ç å¦‚ä¸‹ï¼š

```cpp
bool chk(ll h) {
    ll p = h / x, q = h / y, a = h / (x * y);

    if (h - p >= n && h - q >= m) {
        // å¦‚æœæ»¡è¶³ç¬¬ä¸€äººï¼Œæ£€æŸ¥ç¬¬äºŒäººæ˜¯å¦æ»¡è¶³
        if (q - a >= n) return true;
        else if (h - (n - (q - a)) - q >= m) return true;

        // å¦‚æœæ»¡è¶³ç¬¬äºŒäººï¼Œæ£€æŸ¥ç¬¬ä¸€äººæ˜¯å¦æ»¡è¶³
        if (p - a >= m) return true;
        else if (h - (n - (p - a)) - p >= n) return true;
    }
    return false;
}
```

å…¶å®æ˜¯å› ä¸ºæœ‰é€»è¾‘é”™è¯¯ï¼Œå³å¯¹äºå½“å‰çš„ hï¼Œå¿…é¡»ä¸¤ä¸ªäººéƒ½èƒ½æ»¡è¶³æ‰è¡Œã€‚è€Œä¸Šè¿°ä»£ç å¯èƒ½ä¼šå‡ºç°ç¬¬ä¸€ä¸ªäººä¸æ»¡è¶³ï¼Œä½†æ˜¯ç¬¬äºŒä¸ªäººæ»¡è¶³ï¼Œå´è¿”å› true çš„æƒ…å†µï¼Œè€Œè¿™æ˜¯é”™è¯¯çš„ã€‚å› æ­¤ä¸Šè¿°ä»£ç æ”¹æˆä¸¤ä¸ªäººåŒæ—¶æ»¡è¶³å°±å¯ä»¥é€šè¿‡äº†ï¼Œå³å¦‚æœæœ‰ä¸€ä¸ªäººä¸æ»¡è¶³ï¼Œåˆ™è¿”å› falseï¼š

```cpp
bool chk(ll h) {
    ll p = h / x, q = h / y, a = h / (x * y);

    if (h - p >= n && h - q >= m) {
        // å¦‚æœæ»¡è¶³ç¬¬ä¸€äººï¼Œæ£€æŸ¥ç¬¬äºŒäººæ˜¯å¦æ»¡è¶³
        if (q - a >= n) return true;
        else if (h - (n - (q - a)) - q >= m) return true;

        return false;
    }
    return false;
}
```

å°ç»“ï¼šè¿‡å¤šçš„åˆ†æ”¯è¯­å¥ä¸å¦‚ä¸€ä¸ª max æ¥çš„æ›´åŠ æ¸…æ™°ï¼Œä¹Ÿå¯ä»¥é¿å…ä¸€å®šçš„é€»è¾‘é”™è¯¯ã€‚

### ã€äºŒåˆ†ç­”æ¡ˆã€‘æ‰¾å‡ºå æ¶‚å…ƒç´ 

<https://leetcode.cn/problems/first-completely-painted-row-or-column/description/>

> é¢˜æ„ï¼šç»™å®šä¸€ä¸ª $m\times n$ çš„çŸ©é˜µï¼Œä»¥åŠä¸€ä¸ªå­˜å‚¨çŸ©é˜µä¸­æ‰€æœ‰å…ƒç´ å€¼çš„æ•°ç»„ï¼Œç°åœ¨ä»å·¦å¾€å³å°†æ•°ç»„ä¸­çš„å…ƒç´ åœ¨å¯¹åº”çŸ©é˜µä¸­æ¶‚è‰²ï¼Œé—®åºåˆ—ä¸­æœ€å·¦è¾¹ä½¿å¾—çŸ©é˜µä¸­æŸä¸€è¡Œæˆ–åˆ—å…¨éƒ¨æ¶‚è‰²çš„ä¸‹æ ‡æ˜¯ä»€ä¹ˆ
>
> æ€è·¯ï¼šæ˜¾ç„¶ï¼Œä¸‹æ ‡è¶Šå¾€å³è¶Šæœ‰å¯èƒ½å‡ºç°çŸ©é˜µä¸­æŸä¸€è¡Œæˆ–åˆ—å…¨éƒ¨æ¶‚è‰²ï¼Œå…·å¤‡å•è°ƒæ€§ï¼Œå¯ä»¥äºŒåˆ†ç­”æ¡ˆã€‚æˆ‘ä»¬ç›´æ¥äºŒåˆ†åºåˆ—ä¸‹æ ‡ï¼Œå¯¹äº chk å‡½æ•°æˆ‘ä»¬ç›´æ¥ $O(n\times m)$ æ¨¡æ‹Ÿå³å¯
>
> æ—¶é—´å¤æ‚åº¦ï¼š$O(n\times m \log (n\times m))$

```cpp
class Solution {
public:
    int firstCompleteIndex(vector<int>& arr, vector<vector<int>>& mat) {
        int m = mat.size(), n = mat[0].size();

        auto chk = [&](int idx) {
            bool vis[100010] {};
            for (int i = 0; i <= idx; i++) {
                vis[arr[i]] = true;
            }

            for (int i = 0; i < m; i++) {
                int s = 0;
                for (int j = 0; j < n; j++) {
                    s += vis[mat[i][j]];
                }
                if (s == n) return true;
            }

            for (int j = 0; j < n; j++) {
                int s = 0;
                for (int i = 0; i < m; i++) {
                    s += vis[mat[i][j]];
                }
                if (s == m) return true;
            }

            return false;
        };

        int l = 0, r = m * n - 1;
        while (l < r) {
            int mid = (l + r) >> 1;
            if (chk(mid)) r = mid;
            else l = mid + 1;
        }
        return r;
    }
};
```

### ã€äºŒåˆ†ç­”æ¡ˆ/åŒæŒ‡é’ˆã€‘æ‰¾å‡ºå”¯ä¸€æ€§æ•°ç»„çš„ä¸­ä½æ•°

<https://leetcode.cn/problems/find-the-median-of-the-uniqueness-array/>

> é¢˜æ„ï¼šç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œè¿”å›å…¶ã€Œå”¯ä¸€æ€§æ•°ç»„ã€çš„ä¸­ä½æ•°ã€‚å¦‚æœå”¯ä¸€æ€§æ•°ç»„æœ‰å¥‡æ•°ä¸ªå…ƒç´ ï¼Œåˆ™è¿”å›ä¸­é—´å…ƒç´ ï¼Œå¦‚æœæœ‰å¶æ•°ä¸ªå…ƒç´ ï¼Œåˆ™è¿”å›ä¸¤ä¸ªä¸­é—´å…ƒç´ ä¸­è¾ƒå°çš„é‚£ä¸ªï¼Œå³å·¦è¾¹é‚£ä¸ªä¸­é—´å…ƒç´ ã€‚å”¯ä¸€æ€§æ•°ç»„å®šä¹‰ä¸ºï¼šåŸæ•°ç»„çš„æ‰€æœ‰éç©ºå­æ•°ç»„ä¸­ä¸åŒå…ƒç´ çš„ä¸ªæ•°ç»„æˆçš„åºåˆ—ã€‚
>
> æ€è·¯ï¼š
>
> - é¦–å…ˆæ ¹æ®é¢˜æ„å¯ä»¥æ˜ç¡®çš„è®¡ç®—å‡ºè¿™ä¸ªå”¯ä¸€æ€§æ•°ç»„çš„å…ƒç´ ä¸ªæ•° $tot$ã€‚å‡è®¾åŸæ•°ç»„æœ‰ $n$ ä¸ªå…ƒç´ ï¼Œåˆ™å…¶å”¯ä¸€æ€§æ•°ç»„ä¸€å®šæœ‰ $\displaystyle tot=\frac{(1+n) \times n}{2}$ ä¸ªå…ƒç´ ï¼Œä¸”æœ€å°å€¼ä¸€å®šæ˜¯ $1$ï¼Œæœ€å¤§å€¼ $\le n$ã€‚æœ€æš´åŠ›çš„åšæ³•å°±æ˜¯ $O(n^2)$ çš„ç»´æŠ¤å‡ºè¿™ä¸ªå”¯ä¸€æ€§æ•°ç»„ç„¶åè¿”å›å…¶ä¸­ä½æ•°ï¼Œä½†è¿™å¯¹äº $10^5$ çº§åˆ«çš„æ•°æ®æ˜¾ç„¶æ˜¯ä¸åˆé€‚çš„ã€‚è§‚å¯Ÿå…¶ä»–æ€§è´¨ã€‚
> - ä¸éš¾å‘ç°ï¼Œå¯¹äºã€Œä¸åŒå…ƒç´ çš„ä¸ªæ•° $x$ã€è€Œè¨€ï¼Œ$x$ è¶Šå¤§ï¼Œæ»¡è¶³æ¡ä»¶çš„å­æ•°ç»„æ•°é‡å°±è¶Šå¤šï¼Œåä¹‹ $x$ è¶Šå°ï¼Œåˆ™æ»¡è¶³æ¡ä»¶çš„å­æ•°ç»„æ•°é‡å°±è¶Šå°‘ï¼Œå…·å¤‡å•è°ƒæ€§ï¼Œè€ƒè™‘äºŒåˆ†ã€‚
> - é—®é¢˜å°±æ˜¯åœ¨ $[1,n]$ å†…æ‰¾åˆ°ä¸€ä¸ªå°½å¯èƒ½å°çš„ $upper$ ä½¿å¾—æ»¡è¶³ã€Œä¸åŒå…ƒç´ çš„ä¸ªæ•° $\le upper$ çš„å­æ•°ç»„ã€çš„æ•°é‡ $\displaystyle \ge \lceil \frac{tot}{2} \rceil$ã€‚
> - æˆ‘ä»¬èƒ½å¦åœ¨æŒ‡å®šä¸åŒå…ƒç´ ä¸ªæ•°ä¸Šé™ä¸º $upper$ çš„æƒ…å†µä¸‹ï¼Œå¿«é€Ÿè®¡ç®—åˆæ³•å­æ•°ç»„çš„ä¸ªæ•°å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œæˆ‘ä»¬å¼•å…¥åŒæŒ‡é’ˆç®—æ³•è¿›è¡Œ $O(n)$ çš„ $check$ã€‚æˆ‘ä»¬æšä¸¾å­æ•°ç»„çš„å³è¾¹ç•Œå¹¶åˆ©ç”¨å“ˆå¸Œè¡¨ç»´æŠ¤å­æ•°ç»„çš„å·¦è¾¹ç•Œè¿›è¡Œç»Ÿè®¡å³å¯ã€‚
>
> æ—¶é—´å¤æ‚åº¦ï¼š$O(n\log n)$

```cpp []
class Solution {
public:
    int medianOfUniquenessArray(vector<int>& nums) {
        using ll = long long;
        int n = nums.size();
        
        ll tot = 1ll * (1 + n) * n / 2;
        int ma = *max_element(nums.begin(), nums.end());
        int f[ma + 1];
        memset(f, 0, sizeof f);

        // åŒæŒ‡é’ˆ check
        auto chk = [&](int upper) -> bool {
            ll cnt = 0;
            int size = 0; // å“ˆå¸Œè¡¨å¤§å°
            for (int l = 0, r = 0; r < n; r++) {
                size += f[nums[r]] == 0;
                f[nums[r]]++;
                while (size > upper) {
                    --f[nums[l]];
                    size -= f[nums[l]] == 0;
                    l++;
                }
                // æ­¤æ—¶ä»¥ nums[r] ç»“å°¾ä¸” l ä¸ºå·¦è¾¹ç•Œçš„æ‰€æœ‰å­æ•°ç»„çš„ä¸åŒå…ƒç´ çš„æ•°é‡å‡ <= upper
                cnt += r - l + 1;
            }
            memset(f, 0, sizeof f);
            return cnt >= (tot + 1) / 2; // ä¸Šå–æ•´å†™æ³•
        };

        int l = 1, r = n;
        while (l < r) {
            int mid = (l + r) >> 1;
            if (chk(mid)) r = mid;
            else l = mid + 1;
        }
        return r;
    }
};
```

```python3 []
class Solution:
    def medianOfUniquenessArray(self, nums: List[int]) -> int:
        n = len(nums)
        ma = max(nums)
        tot = (1 + n) * n >> 1

        def chk(upper: int) -> int:
            f = [0] * (ma + 1)
            cnt, l, size = 0, 0, 0
            for r in range(n):
                size += f[nums[r]] == 0
                f[nums[r]] += 1
                while size > upper:
                    f[nums[l]] -= 1
                    size -= f[nums[l]] == 0
                    l += 1
                cnt += r - l + 1
            return cnt >= (tot + 1) >> 1

        l, r = 1, n
        while l < r:
            mid = (l + r) >> 1
            if chk(mid): r = mid
            else: l = mid + 1
        return r
```

### ã€äºŒåˆ†æŸ¥æ‰¾ã€‘Bomb

<https://codeforces.com/contest/1996/problem/F>

> é¢˜æ„ï¼šç»™å®šä¸¤ä¸ªåºåˆ— $a$ å’Œ $b$ ä»¥åŠæœ€å¤§æ“ä½œæ¬¡æ•° $k$ï¼Œé—®åœ¨ä¸è¶…è¿‡æœ€å¤§æ“ä½œæ¬¡æ•°çš„æƒ…å†µä¸‹ï¼Œæœ€å¤šå¯ä»¥è·å¾—å¤šå°‘æ”¶ç›Šï¼Ÿæ”¶ç›Šçš„è®¡ç®—æ–¹æ³•ä¸ºï¼šæ¯æ¬¡é€‰æ‹© $a$ ä¸­ä¸€ä¸ªæ•° `a[i]` åŠ å…¥æ”¶ç›Šï¼Œå¹¶å°†è¯¥æ•°å‡å» `b[i]` ç›´åˆ°ä¸º $0$ã€‚
>
> æ€è·¯ï¼š
>
> - æš´åŠ›æŠ¬æ‰‹ï¼šæœ€æš´åŠ›çš„åšæ³•æ˜¯æˆ‘ä»¬æ¯æ¬¡æ“ä½œæ—¶é€‰æ‹© $a$ ä¸­çš„æœ€å¤§å€¼è¿›è¡Œè®¡æ•°å¹¶å¯¹å…¶ä¿®æ”¹ï¼Œä½†æ˜¯æ˜¾ç„¶ $O(nk)$ ä¼šè¶…æ—¶ï¼Œæˆ‘ä»¬è€ƒè™‘åŠ é€Ÿè¿™ä¸ªè¿‡ç¨‹ã€‚
> - åŠ é€Ÿè¿›ç¨‹ï¼šç”±äºæœ€ç»ˆç»“æœä¸­æ¯æ¬¡æ“ä½œéƒ½æ˜¯æœ€ä¼˜çš„ï¼Œå› æ­¤æ“ä½œæ¬¡æ•°è¶Šå¤šè·å¾—çš„æ”¶ç›Šå°±è¶Šå¤§ï¼Œå…·å¤‡å•è°ƒæ€§ã€‚å¦‚ä½•åˆ©ç”¨è¿™ä¸ªå•è°ƒæ€§å‘¢ï¼Ÿå…³é”®åœ¨äºå…¨ä½“æ•°æ®çš„æ“ä½œæ¬¡æ•°ï¼Œæˆ‘ä»¬è®°ä½œ $k'$ã€‚å‡è®¾æˆ‘ä»¬å¯¹ $a$ ä¸­å…¨ä½“æ•°æ®å¯å–çš„èŒƒå›´è®¾ç½®ä¸€ä¸ªä¸‹é™ $lower$ï¼Œé‚£ä¹ˆæ˜¾ç„¶çš„ $lower$ è¶Šé«˜ï¼Œ$k'$ è¶Šå°ï¼Œ$lower$ è¶Šä½ï¼Œ$k'$ è¶Šå¤§ã€‚äºæ˜¯æ ¹æ®å•è°ƒçš„ä¼ é€’æ€§å¯çŸ¥ $lower$ ä¹Ÿå’Œæœ€ç»ˆçš„æ”¶ç›Šå…·å¤‡å•è°ƒæ€§ï¼Œ$lower$ è¶Šé«˜ï¼Œæ”¶ç›Šè¶Šå°ï¼Œ$lower$ è¶Šä½ï¼Œæ”¶ç›Šè¶Šå¤§ã€‚å› æ­¤æˆ‘ä»¬äºŒåˆ† $lower$ï¼Œä½¿å¾— $k'$ å·¦é€¼è¿‘ $k$ã€‚
> - ç»†èŠ‚å¤„ç†ï¼šäºŒåˆ†çš„è¾¹ç•Œæ˜¯ä»€ä¹ˆï¼Ÿè¿™éœ€è¦ä»è®¡ç®—æœ€ç»ˆç»“æœçš„è§’åº¦æ¥æ€è€ƒã€‚å¯¹äºäºŒåˆ†å‡ºçš„ä¸‹ç•Œ $lower$ï¼Œå³ $r$ï¼Œæ­¤æ—¶æ‰«æä¸€éè®¡ç®—å‡ºæ¥çš„æ“ä½œæ¬¡æ•° $k'$ ä¸€å®šæ˜¯ $k'\le k$ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬è¿˜éœ€è¦æ“ä½œ $k-k'$ æ¬¡ï¼Œæ˜¾ç„¶æˆ‘ä»¬å¯ä»¥å°†æ¯ä¸ªæ•°æ“ä½œåç»´æŠ¤åˆ°æœ€ç»ˆçš„ç»“æœï¼Œç„¶åæ‰§è¡Œä¸Šè¿°çš„æš´åŠ›æ€è·¯ï¼Œä½†æ˜¯è¿™æ ·ä»ç„¶ä¼šè¶…æ—¶ï¼Œå› ä¸º $k-k'$ çš„è®¡ç®—ç»“æœæœ€å¤§æ˜¯ $n$ï¼Œæ­¤æ—¶è¿›è¡Œæš´åŠ›ä»ç„¶ä¼šè¾¾åˆ° $O(n^2)$ã€‚æ­£éš¾åˆ™åï¼Œæˆ‘ä»¬ä¸å¦¨å°†ä¸Šè¿°äºŒåˆ†å‡ºçš„ $lower$ å‡ä¸€è¿›è¡Œæœ€ç»ˆç­”æ¡ˆçš„è®¡ç®—ï¼Œè¿™æ ·å¯¹åº”çš„æ“ä½œæ¬¡æ•° $k'$ ä¸€å®šä¼šè¶…è¿‡ $k$ï¼Œå¹¶ä¸”å¯¹äºè¶…è¿‡ $k$ çš„æ“ä½œï¼Œç´¯åŠ åˆ°ç­”æ¡ˆçš„æ•°å€¼ä¸€å®šéƒ½æ˜¯ $lower-1$ï¼Œè¿™ä¸€æ­¥ä¹Ÿæ˜¯æœ¬é¢˜æœ€ç²¾å¦™çš„ä¸€æ­¥ã€‚ä»ä¸Šè¿°åˆ†æä¸éš¾å‘ç°ï¼ŒäºŒåˆ†çš„ä¸‹ç•Œéœ€è¦è®¾å®šä¸º $1$ï¼Œå› ä¸ºåç»­ç´¯åŠ ç­”æ¡ˆæ—¶ä¼šå¯¹ $lower$ è¿›è¡Œå‡ä¸€æ“ä½œï¼›äºŒåˆ†çš„ä¸Šç•Œéœ€è¦è®¾å®šä¸ºä¸¥æ ¼å¤§äº $10^9$ çš„æ•°ï¼Œæ¯”å¦‚ $10^9+1$ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦ä¿è¯ $lower-1$ åå¯¹åº”çš„æ“ä½œæ¬¡æ•° $k'$ ä¸¥æ ¼å¤§äº $k$ã€‚
>
> æ—¶é—´å¤æ‚åº¦ï¼š$O(n\log k)$

```cpp
#include <bits/stdc++.h>

using ll = long long;

void solve() {
    int n, k;
    std::cin >> n >> k;
    
    std::vector<int> a(n), b(n);
    for (int i = 0; i < n; i++) std::cin >> a[i];
    for (int i = 0; i < n; i++) std::cin >> b[i];
    
    auto chk = [&](int x) {
        ll cnt = 0;
        for (int i = 0; i < n; i++) {
            if (a[i] < x) continue;
            cnt += (a[i] - x) / b[i] + 1;
        }
        return cnt;
    };
    
    int l = 1, r = 1e9 + 10;
    while (l < r) {
        int mid = (l + r) >> 1;
        if (chk(mid) <= k) r = mid;
        else l = mid + 1;
    }
    
    int best = r - 1;
    ll res = 0, cnt = 0;
    for (int i = 0; i < n; i++) {
        if (a[i] < best) continue;
        ll t = (a[i] - best) / b[i] + 1;
        cnt += t;
        res += t * a[i] - t * (t - 1) / 2 * b[i];
    }
    res -= (cnt - k) * best;
    
    std::cout << res << "\n";
}

signed main() {
    std::ios::sync_with_stdio(false);
    std::cin.tie(nullptr);
    int T = 1;
    std::cin >> T;
    while (T--) solve();
    return 0;
}
```

## æœç´¢

æ— è®ºæ˜¯æ·±æœè¿˜æ˜¯å®½æœï¼Œéƒ½é€ƒä¸æ‰å›¾çš„æ€ç»´ã€‚æˆ‘ä»¬å°†æœç´¢å›¾å»ºç«‹èµ·æ¥ä¹‹åï¼Œå‰©ä½™çš„ç¼–ç è¿‡ç¨‹å°±ä¼šè·ƒç„¶çº¸ä¸Šã€‚

### ã€dfsã€‘æœºå™¨äººçš„è¿åŠ¨èŒƒå›´

<https://www.acwing.com/problem/content/22/>

```cpp
class Solution {
public:
    int res = 0;
    
    int movingCount(int threshold, int rows, int cols)
    {
        if (!rows || !cols) return 0;
        vector<vector<int>> g(rows, vector<int>(cols, 0));
        vector<vector<bool>> vis(rows, vector<bool>(cols, false));
        dfs(g, vis, 0, 0, threshold);
        return res;
    }
    
    void dfs(vector<vector<int>>& g, vector<vector<bool>>& vis, int x, int y, int threshold)
    {
        vis[x][y] = true;
        res ++;
        
        int dx[] = {-1, 0, 1, 0}, dy[] = {0, 1, 0, -1};
        for (int k = 0; k < 4; k ++)
        {
            int i = x + dx[k], j = y + dy[k];
            if (i < 0 || i >= int(g.size()) || j < 0 || j >= int(g[0].size()) || vis[i][j] || cnt(i, j) > threshold) continue;
            dfs(g, vis, i, j, threshold);
        }
    }
    
    int cnt(int x, int y)
    {
        int sum = 0;
        while (x) sum += x % 10, x /= 10;
        while (y) sum += y % 10, y /= 10;
        return sum;
    }
};
```

### ã€dfsã€‘CCCå•è¯æœç´¢

<https://www.acwing.com/problem/content/5168/>

> æœç´¢é€»è¾‘ï¼šåˆ†ä¸ºæ­£åå­—ä¸æ–œåå­—
>
> æ›´æ–°ç­”æ¡ˆé€»è¾‘ï¼šéœ€è¦è¿›è¡Œä¸¤ä¸ªæ¡ä»¶çš„çº¦æ•°ï¼Œä¸€ä¸ªæ˜¯æ˜¯å¦åŒ¹é…åˆ°äº†æœ€åä¸€ä¸ªå­—æ¯ï¼Œä¸€ä¸ªæ˜¯è½¬å¼¯æ¬¡æ•°ä¸è¶…è¿‡ä¸€æ¬¡
>
> è½¬å¼¯åˆ¤æ–­é€»è¾‘ï¼š
>
>  é¦–å…ˆä¸èƒ½æ˜¯èµ·ç‚¹å¼€å§‹çš„
>  å¯¹äºæ­£åå­—ï¼šå¦‚æœnextçš„è¡Œ & åˆ—éƒ½ä¸preçš„è¡Œå’Œåˆ—ä¸ç›¸ç­‰ï¼Œå°±ç®—è½¬å¼¯
>  å¯¹äºæ–œåå­—ï¼šå¦‚æœnextçš„è¡Œ | åˆ—æœ‰å’Œpreç›¸ç­‰çš„ï¼Œå°±ç®—è½¬å¼¯

```cpp
#include <iostream>
#include <algorithm>
#include <cstring>

using namespace std;

const int N = 110;

string s;
int m, n;
char g[N][N];
int res;

// æ­£åå­—ï¼Œaï¼Œbä¸ºä¹‹å‰çš„ä½ç½®ï¼Œxï¼Œyä¸ºå½“å‰çš„ä½ç½®ï¼Œnowä¸ºå½“å‰å¾…åŒ¹é…çš„å­—æ¯ä½ï¼Œcntä¸ºè½¬å¼¯æ¬¡æ•°
void dfs1(int a, int b, int x, int y, int now, int cnt)
{
    if (g[x][y] != s[now]) return;
    
    if (now == s.size() - 1)
    {
        if (cnt <= 1) res++; 
        return;
    }
    
    int dx[] = {-1, 0, 1, 0}, dy[] = {0, 1, 0, -1};
    
    for (int k = 0; k < 4; k ++)
    {
        int i = x + dx[k], j = y + dy[k];
        if (x < 0 || x >= m || y < 0 || y >= n) continue;
        
        // åˆ¤æ–­æ˜¯å¦è½¬å¼¯ï¼ˆnowä¸æ˜¯èµ·ç‚¹ ä¸” preå’Œnextè¡Œåˆ—å‡ä¸ç›¸ç­‰ï¼‰ 
        if (a != -1 && b != -1 && a != i && b != j) dfs1(x, y, i, j, now + 1, cnt + 1);
        else dfs1(x, y, i, j, now + 1, cnt);
    }
}

// æ–œåå­—
void dfs2(int a, int b, int x, int y, int now, int cnt)
{
    if (g[x][y] != s[now]) return;
    
    if (now == s.size() - 1)
    {
        if (cnt <= 1) res++; 
        return;
    }
    
    int dx[] = {-1, -1, 1, 1}, dy[] = {-1, 1, 1, -1};
    
    for (int k = 0; k < 4; k ++)
    {
        int i = x + dx[k], j = y + dy[k];
        if (x < 0 || x >= m || y < 0 || y >= n) continue;
        
        // åˆ¤æ–­æ˜¯å¦è½¬å¼¯ï¼ˆnowä¸æ˜¯èµ·ç‚¹ ä¸” ä¸åœ¨åŒä¸€å¯¹è§’çº¿ï¼‰ 
        if (a != -1 && b != -1 && (a == i || b == j)) dfs2(x, y, i, j, now + 1, cnt + 1);
        else dfs2(x, y, i, j, now + 1, cnt);
    }
}


int main()
{
    cin >> s;
    cin >> m >> n;
    
    for (int i = 0; i < m; i ++)
        for (int j = 0; j < n; j ++)
            cin >> g[i][j];
    
    for (int i = 0; i < m; i ++)
        for (int j = 0; j < n; j ++)
            dfs1(-1, -1, i, j, 0, 0);
    
    for (int i = 0; i < m; i ++)
        for (int j = 0; j < n; j ++)
            dfs2(-1, -1, i, j, 0, 0);
    
    cout << res << "\n";
    
    return 0;
}
```

### ã€dfs/äºŒè¿›åˆ¶æšä¸¾ã€‘æ•°é‡

<https://www.acwing.com/problem/content/5150/>

> é¢˜æ„ï¼šç»™å®šä¸€ä¸ªæ•°nï¼Œé—®[1, n]ä¸­æœ‰å¤šå°‘ä¸ªæ•°åªå«æœ‰4æˆ–7
>
> æ€è·¯ä¸€ï¼šdfs
>
> - å¯¹äºä¸€ä¸ªæ•°ï¼Œæˆ‘ä»¬å¯ä»¥æ„é€ ä¸€ä¸ªäºŒå‰æœæ•°è¿›è¡Œæœç´¢ï¼Œå› ä¸ºæ¯ä¸€ä½åªæœ‰ä¸¤ç§å¯èƒ½ï¼Œé‚£ä¹ˆä»æœ€é«˜ä½å¼€å§‹æœç´¢ã€‚å¦‚æœå½“å‰æ•°è¶…è¿‡äº†nå°±returnï¼Œå¦åˆ™å°±ç®—ä¸€ä¸ªç­”æ¡ˆ
> - æ—¶é—´å¤æ‚åº¦ï¼š$\Theta(2^{1 + \lg{(\max(a[i])})})$
>
> æ€è·¯äºŒï¼šäºŒè¿›åˆ¶æšä¸¾
>
> - æŒ‰ç…§æ•°ä½è¿›è¡Œè®¡ç®—ã€‚å¯¹äºä¸€ä¸ª x ä½çš„æ•°ï¼Œ1 åˆ° x-1 ä½çš„æƒ…å†µä¸‹æ‰€æœ‰çš„æ•°éƒ½ç¬¦åˆæ¡ä»¶ï¼Œå¯¹äºä¸€ä¸ª t ä½çš„æ•°ï¼Œæ»¡æƒ…å†µå°±æ˜¯ $2^t$ ç§ï¼Œæ‰€ä»¥ `[1,x-1]` ä½å°±ä¸€å…±æœ‰ $2^1 + 2^2 + \cdots + 2^{x - 1} = 2^{x} - 2$ ç§æƒ…å†µ ã€‚å¯¹äºç¬¬ x ä½ï¼Œé‡‡å–äºŒè¿›åˆ¶æšä¸¾ä¸åŸæ•°è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå°äºåŸæ•°ï¼Œåˆ™ç­”æ¡ˆ +1ï¼Œåä¹‹ç»“æŸå¾ªç¯è¾“å‡ºç­”æ¡ˆå³å¯

dfs ä»£ç ï¼š

```cpp
#include <iostream>
using namespace std;

#define int long long

int n, res;

void dfs(int x) {
    if (x > n) return;
    
    res ++;
    
    dfs(x * 10 + 4);
    dfs(x * 10 + 7);
}

signed main() {
    cin >> n;
    dfs(4);
    dfs(7);
    cout << res << "\n";
    return 0;
}
```

äºŒè¿›åˆ¶æšä¸¾ä»£ç ï¼š

```cpp
#include <iostream>
using namespace std;

int WS(int x) {
    int res = 0;
    while (x) {
        res++;
        x /= 10;
    }
    return res;
}

int calc(int a[], int ws) {
    int res = 0;
    for (int i = ws - 1; i >= 0; i --) {
        res = res * 10 + a[i];
    }
    return res;
}

int main() {
    int n;
    cin >> n;
    
    int ws = WS(n);
    
    int ans = (1 << ws) - 2;
    
    int a[20] {};
    for (int i = 0; i < (1 << ws); i ++) {
        for (int j = 0; j < ws; j ++) {
            if ((1 << j) & i) {
                a[j] = 7;
            } else {
                a[j] = 4;
            }
        }
        if (calc(a, ws) <= n) {
            ans ++;
        } else {
            break;
        }
    }
    
    cout << ans;
    
    return 0;
}
```

### ã€dfsã€‘ç»„åˆæ€»å’Œ

<https://leetcode.cn/problems/combination-sum/>

> é¢˜æ„ï¼šç»™å®šä¸€ä¸ªåºåˆ—ï¼Œå…¶ä¸­çš„å…ƒç´ æ²¡æœ‰é‡å¤ï¼Œé—®å¦‚ä½•é€‰å–å…¶ä¸­çš„å…ƒç´ ï¼Œä½¿å¾—é€‰å‡ºçš„æ•°å­—æ€»å’Œä¸ºæŒ‡å®šçš„æ•°å­—targetï¼Œé€‰å–çš„æ•°å­—å¯ä»¥é‡å¤
>
> æ€è·¯ï¼šæ€è·¯æ¯”è¾ƒç®€ç­”ï¼Œå¾ˆå®¹æ˜“æƒ³åˆ°ç”¨dfsæœç´¢å‡ºæ‰€æœ‰çš„ç»„åˆæƒ…å†µï¼Œå³å¯¹äºæ¯ä¸€ä¸ªâ€œç»“ç‚¹â€ï¼Œæˆ‘ä»¬ç›´æ¥éå†åºåˆ—ä¸­çš„å…ƒç´ å³å¯ã€‚ä½†æ˜¯ç”±äºé¢˜ç›®çš„é™åˆ¶ï¼Œå³ä¸å…è®¸åˆæ³•çš„åºåˆ—ç»è¿‡æ’åºåç›¸ç­‰ã€‚é‚£ä¹ˆä¸ºäº†è§£å†³è¿™ä¸ªçº¦æŸï¼Œæˆ‘ä»¬å¯ä»¥å°†æœ€ç»ˆæœç´¢åˆ°çš„åºåˆ—æ’åºåè¿›è¡Œå»é‡ï¼Œä½†æ˜¯è¿™æ ·çš„æ—¶é—´å¤æ‚åº¦ä¼šå¾ˆé«˜ï¼Œäºæ˜¯æˆ‘ä»¬ä»æœç´¢çš„è¿‡ç¨‹åˆ‡å…¥ã€‚è§‚çœ‹è¿™ä¸€ç¯‡é¢˜è§£ [é˜²æ­¢å‡ºç°é‡å¤åºåˆ—çš„å¯è’™é¢˜è§£](https://leetcode.cn/problems/combination-sum/solutions/2363929/39-zu-he-zong-he-hui-su-qing-xi-tu-jie-b-9zx7/)ï¼Œæˆ‘ä»¬æå–å…¶ä¸­æœ€å…³é”®çš„ä¸€ä¸ªå›¾è§£
>
> ![subset_sum_i_pruning.png](https://dwj-oss.oss-cn-nanjing.aliyuncs.com/images/202407250146195.png)
>
> å¯è§3ï¼Œ4å’Œ4ï¼Œ3çš„å‰©ä½™é€‰é¡¹ï¼ˆå…¶ä¸­å¯èƒ½åŒ…å«äº†ç­”æ¡ˆåºåˆ—ï¼‰å…¨éƒ¨é‡å¤ï¼Œå› æ­¤æˆ‘ä»¬ç›´æ¥å‡å»è¿™ä¸ªæå³å¯ã€‚ä¸éš¾å‘ç°ï¼Œæˆ‘ä»¬æ ¹æ®ä¸Šè¿°ä¼˜åŒ–æ€æƒ³ï¼Œå‰ªæçš„æ“ä½œå¯ä»¥ä¸ºï¼šè®©å½“å‰åºåˆ—å¼€å§‹æšä¸¾çš„ä¸‹æ ‡ `idx` ä»ä¸Šä¸€å±‚å¼€å§‹çš„ä¸‹æ ‡ `i` å¼€å§‹ï¼Œäºæ˜¯å‰ªæå°±å¯ä»¥å®ç°äº†ã€‚
>
> æ—¶é—´å¤æ‚åº¦ï¼š$\Theta \left ( 2^{\frac{n}{\log n}}\right)$

```cpp
class Solution {
public:
    // ç­”æ¡ˆæ•°ç»„resï¼Œç›®æ ‡æ•°ç»„cï¼Œç›®æ ‡æ€»å’Œtargetï¼Œç­”æ¡ˆæ•°ç»„nowï¼Œå½“å‰æ€»å’Œsumï¼Œèµ·å§‹ä¸‹æ ‡idx
    void dfs(vector<vector<int>>& res, vector<int>& c, int target, vector<int>& now, int sum, int idx) {
        if (sum > target) {
            return;
        } else if (sum == target) {
            res.emplace_back(now);
            return;
        }
        for (int i = idx; i < c.size(); i++) {
            now.emplace_back(c[i]);
            dfs(res, c, target, now, sum + c[i], i);
            now.pop_back();
        }
    }

    vector<vector<int>> combinationSum(vector<int>& candidates, int target) {
        vector<vector<int>> res;
        vector<int> now;
        dfs(res, candidates, target, now, 0, 0);
        return res;
    }
};
```

### ã€é€’å½’ã€‘æ‰©å±•å­—ç¬¦ä¸²

<https://www.acwing.com/problem/content/5284/>

> é¢˜æ„ï¼šç»™å®šä¸€ç§å­—ç¬¦ä¸²çš„æ„é€ æ–¹å¼ï¼Œé—®æ„é€ næ¬¡ä»¥åçš„å­—ç¬¦ä¸²ä¸­çš„ç¬¬kä¸ªå­—ç¬¦æ˜¯ä»€ä¹ˆ
>
> æ€è·¯ï¼šç”±äºæ„é€ çš„æ–¹æ³•æ˜¯åŸºäºä¸Šä¸€ç§æƒ…å†µçš„ï¼Œå¾ˆå®¹æ˜“å¯ä»¥æƒ³åˆ°ä¸€ä¸ªé€’å½’æœç´¢æ ‘æ¥è§£å†³ã€‚åªæ˜¯è¿™é“é¢˜æœ‰å¥½å‡ ä¸ªå‘ï¼Œæ•…è®°å½•ä¸€ä¸‹ã€‚
>
> - é¦–å…ˆè¯´ä¸€ä¸‹æœç´¢çš„æ€è·¯ï¼šå¯¹äºå½“å‰çš„çŠ¶æ€ï¼Œæˆ‘ä»¬æƒ³è¦çŸ¥é“ç¬¬kä¸ªä½ç½®ä¸Šçš„å­—ç¬¦ï¼Œå¾ˆæ˜¾ç„¶æˆ‘ä»¬å¯ä»¥é€šè¿‡é¢„å¤„ç†æ¯ä¸€ç§æ„é€ çŠ¶æ€ä¸‹çš„å­—ç¬¦ä¸²é•¿åº¦å¾—åˆ°ä¸‹ä¸€ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥åœ¨å½“å‰çš„å­—ç¬¦ä¸²ä¸­ï¼Œé€šè¿‡æ¯”å¯¹ä¸‹æ ‡ä¸**äº”æ®µ**å­—ç¬¦ä¸²é•¿åº¦çš„å¤§å°ï¼Œæ¥ç¡®å®šæ˜¯ç»§ç»­é€’å½’è¿˜æ˜¯ç›´æ¥è¾“å‡º
> - ç‰¹åˆ¤ï¼šå¯ä»¥å‘ç°ï¼Œå¯¹äº $n=0$ çš„æƒ…å†µï¼Œæˆ‘ä»¬æ— æ³•é‡‡ç”¨ç›¸åŒçš„ç»“æ„è¿›è¡Œè®¡ç®—ï¼Œæ•…è¿›è¡Œç‰¹åˆ¤ï¼Œå¦‚æœå½“å‰æ¥åˆ°äº†æœ€åˆå§‹çš„å­—ç¬¦ä¸²çŠ¶æ€ï¼Œæˆ‘ä»¬ç›´æ¥è¾“å‡ºç›¸åº”ä½ç½®ä¸Šçš„å­—ç¬¦å³å¯
> - æœ€åè¯´ä¸€ä¸‹é€’å½’ç»ˆç‚¹çš„è®¾è®¡ï¼šä¸æœç´¢æ‰€æœ‰çš„ç­”æ¡ˆæƒ…å†µä¸åŒï¼Œè¿™é“é¢˜çš„ç­”æ¡ˆæ˜¯å”¯ä¸€çš„ï¼Œå› æ­¤æˆ‘ä»¬åœ¨æœç´¢åˆ°ç­”æ¡ˆåï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ª `bool` å˜é‡ä½œä¸ºä¸€ä¸ªæ ‡è®°ï¼Œè¡¨ç¤ºå·²ç»æ‰¾åˆ°ç­”æ¡ˆäº†ï¼Œåªéœ€è¦ä¸æ–­å›æº¯ç›´åˆ°å›æº¯ç»“æŸä¸ºæ­¢ï¼Œå°±ä¸éœ€è¦å†éå†å…¶ä»–çš„åˆ†æ”¯äº†
> - **å‘ï¼š**è¿™é“é¢˜çš„å‘è¯´å®è¯æœ‰ç‚¹éš¾å´©ã€‚
>     1. é¦–å…ˆæ˜¯ä¸€ä¸ªkçš„å¤§å°ï¼Œæ˜¯ä¸€å®šè¦å¼€ `long long` çš„ï¼Œæˆ‘ä¸€å¼€å§‹ç›´æ¥å…¨å±€å®å®šä¹‰ `int` ä¸º `long long` äº†
>     2. è¿˜æœ‰ä¸€ä¸ªå‘å¯èƒ½æ˜¯åªè¦æˆ‘æ‰ä¼šçŠ¯çš„ï¼Œå°±æ˜¯å­—ç¬¦ä¸²æŒ‰ç…§ä¸‹æ ‡è¾“å‡ºå­—ç¬¦çš„æ—¶å€™ï¼Œæ˜¯éœ€è¦ `-1` çš„ï¼Œé—¹å¿ƒçš„æ˜¯æˆ‘æœ‰çš„åŠ äº†ï¼Œæœ‰çš„æ²¡åŠ ï¼Œè¿˜æ˜¯debugçš„æ—¶å€™è°ƒå‡ºæ¥çš„
>     3. æœ€åä¸€ä¸ªå¤§å‘ï¼Œå±äºæ˜¯å¼•ä»¥ä¸ºæˆ’äº†ã€‚å°±æ˜¯è¿™å¥ `len[i] = min(len[i], (int)2e18)`ï¼Œå› ä¸ºæˆ‘ä»¬~~å¯ä»¥å‘ç°~~ï¼ŒæŠ›å¼€é‚£ä¸‰ä¸ªå›ºå®šé•¿åº¦çš„å­—ç¬¦ä¸²æ¥è¯´ï¼Œæ¯ä¸€æ¬¡æ–°æ„é€ å‡ºæ¥çš„å­—ç¬¦ä¸²é•¿åº¦éƒ½æ˜¯ä¸Šä¸€ä¸ªå­—ç¬¦ä¸²é•¿åº¦ $2$ å€ï¼Œé‚£ä¹ˆæ„é€  $n$ æ¬¡åçš„å­—ç¬¦ä¸²é•¿åº¦å°±æ˜¯ $s_0$ é•¿åº¦çš„ $2^n$ å€ï¼Œé‚£ä¹ˆå¯¹äº $n$ çš„å–å€¼èŒƒå›´æ¥è¯´ï¼Œç›´æ¥å­˜å‚¨é•¿åº¦è‚¯å®šæ˜¯ä¸å¯å–çš„ã€‚é‚£ä¹ˆå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿæ–¹æ³•æ˜¯æˆ‘ä»¬å¯¹ `len[i]` è¿›è¡Œä¸€ä¸ªçº¦æŸå³å¯ï¼Œè§ä»£ç ã€‚æœ€åè¿›è¡Œé€’å½’æ¯”è¾ƒé•¿åº¦å°±æ²¡é—®é¢˜äº†ã€‚
> - æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$ - ç”±äºæ¯ä¸€ä¸ªæ„é€ çš„çŠ¶æ€æˆ‘ä»¬éƒ½æ˜¯å¸¸æ•°çº§åˆ«çš„æ¯”è¾ƒï¼Œå› æ­¤ç›¸å½“äºä¸€ä¸ªçŠ¶æ€çš„æœç´¢æ—¶é—´å¤æ‚åº¦ä¸º $O(1)$ï¼Œé‚£ä¹ˆæ€»åˆå°±æ˜¯ $O(n)$

```cpp
#include <bits/stdc++.h>
using namespace std;

#define int long long

int n, k;
string s = "DKER EPH VOS GOLNJ ER RKH HNG OI RKH UOPMGB CPH VOS FSQVB DLMM VOS QETH SQB";
string t1 = "DKER EPH VOS GOLNJ UKLMH QHNGLNJ A";
string t2 = "AB CPH VOS FSQVB DLMM VOS QHNG A";
string t3 = "AB";

// è®°å½•æ¯ä¸€å±‚æ„é€ å‡ºæ¥çš„å­—ç¬¦ä¸² Si çš„é•¿åº¦ lenï¼Œå½“å‰é€’å½’çš„å±‚æ•° i (i>=1)ï¼Œå¯¹äºå½“å‰å±‚æ•°éœ€è¦æŸ¥è¯¢çš„å­—ç¬¦çš„ä¸‹æ ‡ pos
void dfs(vector<int>& len, int i, int pos, bool& ok) {
    // å·²ç»æœåˆ°ç­”æ¡ˆäº†å°±ä¸æ–­è¿”å›
    if (ok) {
        return;
    }

    // å¦‚æœè¿˜æ²¡æœ‰æœåˆ°ç­”æ¡ˆï¼Œå¹¶ä¸”å·²ç»é€’å½’åˆ°äº†æœ€å¼€å§‹çš„ä¸€å±‚ï¼Œå°±è¾“å‡ºåŸå§‹å­—ç¬¦ä¸²ç›¸åº”ä½ç½®çš„å­—ç¬¦å³å¯
    if (!i) {
        cout << s[pos - 1];
        return;
    }

    int l1 = t1.size(), l2 = l1 + len[i - 1], l3 = l2 + t2.size(), l4 = l3 + len[i - 1];
    if (pos <= l1) {
        cout << t1[pos - 1];
        ok = true;
        return;
    } else if (pos <= l2) {
        dfs(len, i - 1, pos - l1, ok);
    } else if (pos <= l3) {
        cout << t2[pos - l2 - 1];
        ok = true;
        return;
    } else if (pos <= l4) {
        dfs(len, i - 1, pos - l3, ok);
    } else {
        cout << t3[pos - l4 - 1];
        ok = true;
        return;
    }
}

void solve() {
    cin >> n >> k;

    vector<int> len(n + 10);
    len[0] = s.size();

    for (int i = 1; i <= n; i++) {
        len[i] = 2 * len[i - 1] + t1.size() + t2.size() + t3.size();
        len[i] = min(len[i], (int)2e18); // ç‚¹ç›ä¹‹ç¬”...
    }

    // ç‰¹åˆ¤ä¸‹æ ‡è¶Šç•Œçš„æƒ…å†µ
    if (k > len[n]) {
        cout << ".";
        return;
    }

    // å¦åˆ™å¼€å§‹ä»ç¬¬nå±‚å¼€å§‹é€’å½’æœç´¢
    bool ok = false;
    dfs(len, n, k, ok);
}

signed main() {
    int T = 1;
    cin >> T;
    while (T--) {
        solve();
    }
    return 0;
}
```

### ã€dfsã€‘è®©æˆ‘ä»¬å¼‚æˆ–å§

<https://www.luogu.com.cn/problem/P2420>

> é¢˜æ„ï¼šç»™å®šä¸€æ£µæ ‘ï¼Œæ ‘ä¸Šæ¯ä¸€æ¡è¾¹éƒ½æœ‰ä¸€ä¸ªæƒå€¼ï¼Œç°åœ¨æœ‰Qæ¬¡è¯¢é—®ï¼Œå¯¹äºæ¯æ¬¡è¯¢é—®ä¼šç»™å‡ºä¸¤ä¸ªç»“ç‚¹ç¼–å·uï¼Œvï¼Œéœ€è¦è¾“å‡ºç»“ç‚¹uåˆ°ç»“ç‚¹væ‰€ç»è¿‡çš„è·¯å¾„çš„æ‰€æœ‰è¾¹æƒçš„å¼‚æˆ–ä¹‹å’Œ
>
> æ€è·¯ï¼šå¯¹äºæ¯æ¬¡è¯¢é—®ï¼Œæˆ‘ä»¬å½“ç„¶å¯ä»¥éå†ä»æ ¹åˆ°ä¸¤ä¸ªç»“ç‚¹çš„æ‰€æœ‰è¾¹æƒï¼Œç„¶åå…¨éƒ¨å¼‚æˆ–è®¡ç®—ç»“æœï¼Œä½†æ˜¯æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n)$ï¼Œæ˜¾ç„¶ä¸è¡Œï¼Œé‚£ä¹ˆæœ‰ä»€ä¹ˆä¼˜åŒ–ç­–ç•¥å—ï¼Ÿç­”æ¡ˆæ˜¯æœ‰çš„ã€‚æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå¯¹äºä¸¤ä¸ªç»“ç‚¹ä¹‹é—´çš„æ‰€æœ‰è¾¹æƒï¼Œå…¶å®å°±æ˜¯æ ¹åˆ°ä¸¤ä¸ªç»“ç‚¹çš„è¾¹æƒç›¸å¼‚æˆ–å¾—åˆ°çš„ç»“æœï¼ˆå¼‚æˆ–çš„æ€§è´¨ï¼‰ï¼Œæˆ‘ä»¬åªéœ€è¦é¢„å¤„ç†å‡ºæ ¹ç»“ç‚¹åˆ°æ‰€æœ‰ç»“ç‚¹çš„è¾¹æƒå·²å¼‚æˆ–å€¼ï¼Œåç»­è¯¢é—®çš„æ—¶å€™ç›´æ¥ $O(1)$ è®¡ç®—å³å¯
>
> æ—¶é—´å¤æ‚åº¦ï¼š$\Theta(n+q)$

```cpp
const int N = 100010;

struct node {
    int id;
    int w;
};

int n, m, f[N];        // f[i] è¡¨ç¤ºä»æ ¹ç»“ç‚¹åˆ° i å·ç»“ç‚¹çš„æ‰€æœ‰è¾¹æƒçš„å¼‚æˆ–å€¼
vector<node> G[N];
bool vis[N];

void dfs(int fa) {
    if (!vis[fa]) {
        vis[fa] = true;
        for (auto& ch: G[fa]) {
            f[ch.id] = f[fa] ^ ch.w;
            dfs(ch.id);
        }
    }
}

void solve() {
    cin >> n;

    for (int i = 0; i < n - 1; i++) {
        int a, b, w;
        cin >> a >> b >> w;
        G[a].push_back({b, w});
        G[b].push_back({a, w});
    }

    dfs(1);

    cin >> m;

    while (m--) {
        int u, v;
        cin >> u >> v;
        cout << (f[u] ^ f[v]) << "\n";
    }
}
```

### ã€è®°å¿†åŒ–æœç´¢ã€‘Function

<https://www.luogu.com.cn/problem/P1464>

> é¢˜æ„ï¼š
>
> æ€è·¯ä¸€ï¼šç›´æ¥dfs
>
> - ç›´æ¥æŒ‰ç…§é¢˜æ„è¿›è¡Œdfsä»£ç çš„ç¼–å†™ï¼Œä½†æ˜¯å¾ˆæ˜¾ç„¶æ—¶é—´å¤æ‚æé«˜
> - æ—¶é—´å¤æ‚åº¦ï¼š$O(T \times \text{æƒ…å†µæ•°})$
>
> æ€è·¯äºŒï¼šè®°å¿†åŒ–dfs
>
> - è®°å¿†åŒ–é€»è¾‘ï¼š
>     - å¦‚æœå½“å‰çš„çŠ¶æ€æ²¡æœ‰è®°å¿†è¿‡ï¼Œå°±è®°å¿†ä¸€ä¸‹
>     - å¦‚æœå½“å‰çš„çŠ¶æ€å·²ç»è®°å¿†è¿‡äº†ï¼Œå°±ä¸éœ€è¦ç»§ç»­é€’å½’æœç´¢äº†ï¼Œç›´æ¥ä½¿ç”¨ä¹‹å‰å·²ç»è®°å¿†è¿‡çš„ç­”æ¡ˆå³å¯
> - ä¸Šè¿°èµ·å§‹çŠ¶æ€éœ€è¦å’Œæœåˆ°ç­”æ¡ˆçš„çŠ¶æ€åšä¸€ä¸ªåŒºåˆ«ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå¯¹äºä¸€ç»„åˆæ³•çš„è¾“å…¥ï¼Œç­”æ¡ˆä¸€å®šæ˜¯
> - æ³¨æ„ç‚¹ï¼š
>     - è¾“å…¥ç»ˆæ­¢æ¡ä»¶ä¸æ˜¯ `a != -1 && b != -1 && c != -1`ï¼Œè€Œæ˜¯è¦ä¸‰è€…éƒ½ä¸æ˜¯ `-1` æ‰è¡Œ
>     - å¯¹äºæ¯ä¸€ç»„è¾“å…¥ï¼Œæˆ‘ä»¬ä¸éœ€è¦ `memset` è®°å¿†æ•°ç»„ï¼Œå› ä¸ºæ¯ä¸€ç»„çš„è®°å¿†ä¾èµ–æ˜¯ç›¸åŒçš„
>     - ç”±äºç­”æ¡ˆä¸€å®šæ˜¯ $>0$ çš„ï¼Œå› æ­¤æ˜¯å¦è®°å¿†è¿‡åªéœ€è¦çœ‹å½“å‰çŠ¶æ€çš„ç­”æ¡ˆæ˜¯å¦ $>0$ å³å¯
> - æ—¶é—´å¤æ‚åº¦ï¼š$<O(T \times n^3)$

ç›´æ¥dfsä»£ç ï¼š

```cpp
#include <bits/stdc++.h>
using namespace std;
typedef long long ll;

ll dfs(int a, int b, int c) {
    if (a <= 0 || b <= 0 || c <= 0) return 1;
    else if (a > 20 || b > 20 || c > 20) return dfs(20, 20, 20);
    else if (a < b && b < c) return dfs(a, b, c - 1) + dfs(a, b - 1, c - 1) - dfs(a, b - 1, c);
    else return dfs(a - 1, b, c) + dfs(a - 1, b - 1, c) + dfs(a - 1, b, c - 1) - dfs(a - 1, b - 1, c - 1);
}

void solve() {
    int a, b, c;
    cin >> a >> b >> c;
    while (a != -1 && b != -1 && c != -1) {
        printf("w(%d, %d, %d) = %lld\n", a, b, c, dfs(a, b, c));
        cin >> a >> b >> c;
    }
}

signed main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();
    return 0;
}
```

è®°å¿†åŒ–dfsä»£ç ï¼š

```cpp
#include <bits/stdc++.h>
using namespace std;
typedef long long ll;

const int N = 25;

ll f[N][N][N];

ll dfs(ll a, ll b, ll c) {
    // ä¸Šä¸‹ç•Œ
    if (a <= 0 || b <= 0 || c <= 0) return 1;
    else if (a > 20 || b > 20 || c > 20) return dfs(20, 20, 20);

    if (f[a][b][c]) {
        // å·²ç»è®°å¿†åŒ–è¿‡äº†ï¼Œç›´æ¥è¿”å›å½“å‰çŠ¶æ€çš„è§£
        return f[a][b][c];
    }
    else {
        // æ²¡æœ‰è®°å¿†åŒ–è¿‡ï¼Œå°±é€’å½’è®¡ç®—å¹¶ä¸”è®°å¿†åŒ–
        if (a < b && b < c) return f[a][b][c] = dfs(a, b, c - 1) + dfs(a, b - 1, c - 1) - dfs(a, b - 1, c);
        else return f[a][b][c] = dfs(a - 1, b, c) + dfs(a - 1, b - 1, c) + dfs(a - 1, b, c - 1) - dfs(a - 1, b - 1, c - 1);
    }
}

void solve() {
    ll a, b, c;
    cin >> a >> b >> c;
    while (!(a == -1 && b == -1 && c == -1)) {
        printf("w(%lld, %lld, %lld) = %lld\n", a, b, c, dfs(a, b, c));
        cin >> a >> b >> c;
    }
}

signed main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();
    return 0;
}
```

### ã€é€’å½’ã€‘å¤–æ˜Ÿå¯†ç 

<https://www.luogu.com.cn/problem/P1928>

> çº¿æ€§é€’å½’
>
> é¢˜æ„ï¼šç»™å®šä¸€ä¸ªå‹ç¼©åçš„å¯†ç ä¸²ï¼Œéœ€è¦è§£å‹ä¸ºåŸæ¥çš„å½¢å¼ã€‚å‹ç¼©å½¢å¼è·ç¦»
>
> - `AC[3FUN]` $\to$ `ACFUNFUNFUN`
> - `AB[2[2GH]]OP` $\to$ `ABGHGHGHGHOP`
>
> æ€è·¯ï¼š
>
> - æˆ‘ä»¬é‡‡ç”¨é€’å½’çš„ç­–ç•¥
>
> - æˆ‘ä»¬çŸ¥é“ï¼Œå¯¹äºæ¯ä¸€ä¸ªå­—ç¬¦ï¼Œä¸€å…±æœ‰4ç§æƒ…å†µï¼Œåˆ†åˆ«æ˜¯ï¼š"å­—æ¯"ã€"æ•°å­—"ã€"["ã€"]"ã€‚å¦‚æœæ˜¯å­—æ¯ã€‚æˆ‘ä»¬åˆ†æƒ…å†µè€ƒè™‘
>
>     - "å­—æ¯"ï¼š
>         1. ç›´æ¥åŠ å…¥ç­”æ¡ˆå­—ç¬¦ä¸²å³å¯
>     - "["ï¼š
>         1. è·å–å·¦æ‹¬å·åé¢çš„æ•´ä½“ - é‡‡ç”¨**é€’å½’**ç­–ç•¥è·å–åé¢çš„æ•´ä½“
>         2. åŠ å…¥ç­”æ¡ˆå­—ç¬¦ä¸²
>     - "æ•°å­—"ï¼š
>         1. è·å–å®Œæ•´çš„æ•° - å¾ªç¯å°trick
>         2. è·å–æ•°å­—åé¢çš„æ•´ä½“ - é‡‡ç”¨**é€’å½’**ç­–ç•¥è·å–åé¢çš„æ•´ä½“
>         3. åŠ å…¥ç­”æ¡ˆå­—ç¬¦ä¸² - å¾ªç¯å°¾åŠ å…¥å³å¯
>         4. **è¿”å›å½“å‰çš„ç­”æ¡ˆå­—ç¬¦ä¸²**
>     - "]"ï¼š
>         1. **è¿”å›å½“å‰çš„ç­”æ¡ˆå­—ç¬¦ä¸²** - ä¸ä¸Šè¿° "[" å¯¹åº”
>
> - ä»£ç è®¾è®¡åˆ†æï¼š
>
>     - æˆ‘ä»¬å°†å‹ç¼©åçš„å­—ç¬¦ä¸²çœ‹æˆç”±ä¸‹é¢ä¸¤ç§å•å…ƒç»„æˆï¼š
>
>         1. **æœ€å¤–å±‚ä¸­æ‹¬å·ç»„æˆçš„å•å…ƒ**ï¼šå¦‚ `[2[2AB]]` å°±ç®—ä¸€ä¸ªæœ€å¤–å±‚ä¸­æ‹¬å·ç»„æˆçš„å•å…ƒ
>         2. **è¿ç»­çš„å­—æ¯å•å…ƒ**ï¼šå¦‚ `OPQ` å°±ç®—ä¸€ä¸ªè¿ç»­çš„å­—æ¯å•å…ƒ
>
>     - è§£å†³å„å•å…ƒè¿æ¥é—®é¢˜ï¼š
>     - ä¸ºäº†åœ¨é€’å½’å¤„ç†å®Œç¬¬ä¸€ç§å•å…ƒåè¿˜èƒ½ç»§ç»­å¤„ç†åç»­çš„ç¬¬äºŒç§å•å…ƒï¼Œæˆ‘ä»¬ç›´æ¥æŒ‰ç…§å‹ç¼©å­—ç¬¦ä¸²çš„é•¿åº¦è¿›è¡Œéå†ï¼Œå³ `while (i < s.size())` æ“ä½œ
>     - è§£å†³ä¸¤ç§å•å…ƒå†…éƒ¨é—®é¢˜ï¼š
>         - æœ€å¤–å±‚ä¸­æ‹¬å·ç»„æˆçš„å•å…ƒï¼šé€’å½’å¤„ç†
>         - è¿ç»­çš„å­—æ¯å•å…ƒï¼šç›´æ¥åŠ å…¥å½“å‰ç­”æ¡ˆå­—ç¬¦ä¸²å³å¯
>
> - æ‰‹ç©æ ·ä¾‹ï¼š
>
>     ![æ‰‹ç©æ ·ä¾‹](https://dwj-oss.oss-cn-nanjing.aliyuncs.com/images/202407250147150.png)
>
>     - æ˜¾ç„¶æŒ‰ç…§å®šä¹‰ï¼Œä¸Šè¿°å‹ç¼©å­—ç¬¦ä¸²ä¸€å…±æœ‰äº”ä¸ªå•å…ƒ
>     - æˆ‘ä»¬ç”¨çº¢è‰²è¡¨ç¤ºè¿›å…¥é€’å½’ï¼Œè“è‰²è¡¨ç¤ºé©±åŠ¨é€’å½’ç»“æŸå¹¶å›æº¯ã€‚å¯ä»¥å‘ç°
>
> - æ—¶é—´å¤æ‚åº¦ï¼š$\Theta(\text{res.length()})$

```cpp
#include <bits/stdc++.h>
using namespace std;
typedef long long ll;

string s;
int i;

string dfs() {
    string res;

    while (i < s.size()) {
        if (s[i] >= 'A' && s[i] <= 'Z') {
            while (s[i] >= 'A' && s[i] <= 'Z') {
                res += s[i++];
            }
        }
        if (s[i] == '[') {
            i++;
            res += dfs();
        }
        if (isdigit(s[i])) {
            int cnt = 0;
            while (isdigit(s[i])) {
                cnt = cnt * 10 + s[i] - '0';
                i++;
            }
            string t = dfs();
            while (cnt--) {
                res += t;
            }
            return res;
        }
        if (s[i] == ']') {
            i++;
            return res;
        }
    }

    return res;
}

void solve() {
    cin >> s;
    cout << dfs() << "\n";
}

signed main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();
    return 0;
}
```

### ã€dfs+å‰ªæ/äºŒè¿›åˆ¶æšä¸¾ã€‘é€‰æ•°

<https://www.luogu.com.cn/problem/P1036>

> é¢˜æ„ï¼šç»™å®šnä¸ªæ•°ï¼Œä»ä¸­é€‰å‡ºkä¸ªæ•°ï¼Œé—®ä¸€å…±æœ‰å¤šå°‘ç§æ–¹æ¡ˆå¯ä»¥ä½¿å¾—é€‰å‡ºæ¥çš„kä¸ªæ•°ä¹‹å’Œä¸ºè´¨æ•°
>
> æ€è·¯ä¸€ï¼šdfs+å‰ªæ
>
> - æŒ‰ç…§æ•°æ®é‡å¯ä»¥ç›´æ¥æš´æœï¼Œæœç´¢ä¾æ®æ˜¯æ¯ä¸€ä¸ªæ•°æœ‰ä¸¤ç§çŠ¶æ€ï¼Œå³é€‰å’Œä¸é€‰ï¼Œäºæ˜¯æœç´¢æ ‘å°±æ˜¯ä¸€æ£µäºŒå‰æ ‘
> - æœç´¢çŠ¶æ€å®šä¹‰ä¸ºï¼šå¯¹äºå½“å‰ç¬¬idxä¸ªæ•°ï¼Œå·²ç»é€‰æ‹©äº†cntä¸ªæ•°ï¼Œå·²ç»é€‰æ‹©çš„æ•°ä¹‹å’Œä¸ºsum
> - æœç´¢ç»ˆæ­¢æ¡ä»¶ä¸ºï¼šidxè¶Šç•Œ
> - å‰ªæï¼šå·²ç»é€‰æ‹©äº†kä¸ªæ•°å°±ç›´æ¥è¿”å›ï¼Œä¸ç”¨å†é€‰å‰©ä¸‹çš„æ•°äº†
> - æ—¶é—´å¤æ‚åº¦ï¼š$O(2^n)$ - å‰ªæåä¸€å®šæ˜¯å°äºè¿™ä¸ªå¤æ‚åº¦çš„
>
> æ€è·¯äºŒï¼šäºŒè¿›åˆ¶æšä¸¾
>
> - ç›´æ¥æšä¸¾ $0\to 2^n-1$ï¼ŒæŒ‰ç…§å…¶ä¸­å«æœ‰çš„ $1$ çš„ä¸ªæ•°ï¼Œæ¥è¿›è¡Œé€‰æ•°åˆ¤æ–­
> - æ—¶é—´å¤æ‚åº¦ï¼š$O(2^n)$ - ä¸€å®šä¼šè·‘æ»¡çš„

dfs+å‰ªæ

```cpp
#include <bits/stdc++.h>
using namespace std;
typedef long long ll;

const int N = 30;

int n, k, a[N];
int res;

bool isPrime(int x) {
    if (x < 2) return false;
    for (int i = 2; i <= x / i; i++)
        if (x % i == 0)
            return false;
    return true;
}

/**
 * @param cnt å½“å‰å·²ç»é€‰æ‹©çš„æ•°çš„æ•°é‡
 * @param idx å½“å‰æ•°çš„ä¸‹æ ‡
 * @param sum å½“å‰é€‰æ•°çŠ¶æ€ä¸‹çš„æ€»å’Œ
 */
void dfs(int cnt, int idx, int sum) {
    if (idx > n) return;

    if (cnt == k) {
        if (isPrime(sum)) res++;
        return;
    }

    dfs(cnt, idx + 1, sum);
    dfs(cnt + 1, idx + 1, sum + a[idx + 1]);
}

void solve() {
    cin >> n >> k;
    for (int i = 1; i <= n; i++)
        cin >> a[i];

    dfs(0, 1, 0);        // ä¸é€‰ç¬¬ä¸€ä¸ªæ•°
    dfs(1, 1, a[1]);    // é€‰ç¬¬ä¸€ä¸ªæ•°

    cout << res << "\n";
}

signed main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();
    return 0;
}
```

äºŒè¿›åˆ¶æšä¸¾

```cpp
#include <bits/stdc++.h>
using namespace std;
typedef long long ll;

const int N = 30;

int n, k, a[N];
int res;

bool isPrime(int x) {
    if (x < 2) return false;
    for (int i = 2; i <= x / i; i++)
        if (x % i == 0)
            return false;
    return true;
}

void solve() {
    cin >> n >> k;
    for (int i = 1; i <= n; i++)
        cin >> a[i];

    for (int i = 0; i < (1 << n); i++) {
        int cnt = 0, sum = 0;
        for (int j = 0; j < n; j++)
            if (i & (1 << j))
                cnt++, sum += a[j + 1];

        if (cnt != k) continue;

        if (isPrime(sum)) res++;
    }

    cout << res << "\n";
}

signed main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();
    return 0;
}
```

### ã€dfs/bfsã€‘01è¿·å®«

<https://www.luogu.com.cn/problem/P1141>

> é¢˜æ„ï¼šç»™å®šä¸€ä¸ª01çŸ©é˜µï¼Œè¡Œèµ°è§„åˆ™ä¸ºâ€œå¯ä»¥èµ°åˆ°ç›¸é‚»çš„æ•°å­—ä¸åŒçš„ä½ç½®â€ï¼Œç°åœ¨ç»™å®šmæ¬¡è¯¢é—® `(u,v)`ï¼Œè¾“å‡ºä» `(u,v)` å¼€å§‹æœ€å¤šå¯ä»¥èµ°å¤šå°‘ä¸ªä½ç½®ï¼Ÿ
>
> æ€è·¯ï¼šæˆ‘ä»¬å¯ä»¥å°†æ­¤é—®é¢˜è½¬åŒ–ä¸ºä¸€ä¸ªæ±‚è§£è¿é€šå—çš„é—®é¢˜ã€‚å¯¹äºçŸ©é˜µä¸­çš„ä¸€ä¸ªè¿é€šå—ï¼Œæˆ‘ä»¬å®šä¹‰ä¸ºï¼šåœ¨å…¶ä¸­ä»»æ„ä¸€ä¸ªä½ç½®å¼€å§‹è¡Œèµ°ï¼Œéƒ½å¯ä»¥èµ°è¿‡æ•´ä¸ªè¿é€šå—æ¯ä¸€ä¸ªä½ç½®ã€‚é‚£ä¹ˆåœ¨è¯¢é—®æ—¶ï¼Œåªéœ€è¦è¾“å‡ºæ‰€åœ¨è¿é€šå—å…ƒç´ çš„ä¸ªæ•°å³å¯ã€‚ç°åœ¨å°†é—®é¢˜è½¬åŒ–ä¸ºäº†
>
> 1. å¦‚ä½•éå†æ¯ä¸€ä¸ªè¿é€šå—ï¼ŸæŒ‰ç…§æ ‡è®°æ•°ç»„çš„æƒ…å†µï¼Œå¦‚æœä¸€ä¸ªä½ç½®æ²¡æœ‰è¢«æ ‡è®°ï¼Œå°±ä»è¿™ä¸ªä½ç½®å‡ºå‘å¼€å§‹æ‰“æ ‡è®°å¹¶ç»Ÿè®¡
>
> 2. å¦‚ä½•ç»Ÿè®¡æ¯ä¸€ä¸ªè¿é€šå—ä¸­å…ƒç´ çš„ä¸ªæ•°ï¼ŸæŒ‰ç…§é¢˜ç›®ä¸­ç»™å®šçš„è¿·å®«è¡Œèµ°è§„åˆ™ï¼Œå¯ä»¥é€šè¿‡bfsæˆ–è€…dfså®ç°éå†
>

bfsä»£ç 

```cpp
#include <bits/stdc++.h>
using namespace std;

const int N = 1010;

int n, m, res[N][N];
char g[N][N];
bool vis[N][N];

void bfs(int u, int v) {
    queue<pair<int, int>> q;
    int cnt = 0; // å½“å‰â€œè¿é€šå—â€çš„å¤§å°
    vector<pair<int, int>> a;

    q.push({u, v});
    a.push_back({u, v});
    vis[u][v] = true;
    cnt++;

    int dx[4] = {-1, 1, 0, 0}, dy[4] = {0, 0, 1, -1};

    while (q.size()) {
        auto& now = q.front();
        q.pop();

        for (int i = 0; i < 4; i++) {
            int x = dx[i] + now.first, y = dy[i] + now.second;
            if (x >= 1 && x <= n && y >= 1 && y <= n && !vis[x][y] && g[x][y] != g[now.first][now.second]) {
                q.push({x, y});
                a.push_back({x, y});
                vis[x][y] = true;
                cnt++;
            }
        }
    }

    for (auto& loc: a) {
        res[loc.first][loc.second] = cnt;
    }
}

void solve() {
    cin >> n >> m;
    for (int i = 1; i <= n; i++)
        for (int j = 1; j <= n; j++)
            cin >> g[i][j];

    for (int i = 1; i <= n; i++)
        for (int j = 1; j <= n; j++)
            if (!vis[i][j])
                bfs(i, j);

    while (m--) {
        int a, b;
        cin >> a >> b;
        if (vis[a][b]) {
            cout << res[a][b] << "\n";
        } else {
            cout << 1 << "\n";
        }
    }
}

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();
    return 0;
}
```

dfsä»£ç 

```cpp
#include <bits/stdc++.h>
using namespace std;

const int N = 1010;

int n, m, res[N][N];
char g[N][N];
bool vis[N][N];

// å½“å‰ç‚¹çš„åæ ‡ (u, v)ï¼Œå½“å‰è¿é€šå—çš„å…ƒç´ ä¸ªæ•°cntï¼Œå½“å‰è¿é€šå—çš„å…ƒç´ å­˜åˆ° a æ•°ç»„
void dfs(int u, int v, int& cnt, vector<pair<int, int>>& a) {
    cnt++;
    a.push_back({u, v});
    vis[u][v] = true;

    int dx[4] = {0, 0, 1, -1}, dy[4] = {1, -1, 0, 0};

    for (int k = 0; k < 4; k++) {
        int x = u + dx[k], y = v + dy[k];
        if (x >= 1 && x <= n && y >= 1 && y <= n && !vis[x][y] && g[x][y] != g[u][v]) {
            dfs(x, y, cnt, a);
        }
    }
}

void solve() {
    cin >> n >> m;
    for (int i = 1; i <= n; i++)
        for (int j = 1; j <= n; j++)
            cin >> g[i][j];

    for (int i = 1; i <= n; i++)
        for (int j = 1; j <= n; j++)
            if (!vis[i][j]) {
                int cnt = 0;
                vector<pair<int, int>> a;
                dfs(i, j, cnt, a);
                for (auto& loc: a) {
                    res[loc.first][loc.second] = cnt;
                }
            }

    while (m--) {
        int a, b;
        cin >> a >> b;
        if (vis[a][b]) {
            cout << res[a][b] << "\n";
        } else {
            cout << 1 << "\n";
        }
    }
}

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();
    return 0;
}
```

### ã€dfs/äºŒè¿›åˆ¶æšä¸¾ã€‘kkksc03è€ƒå‰ä¸´æ—¶æŠ±ä½›è„š

<https://www.luogu.com.cn/problem/P2392>

> é¢˜æ„ï¼šç»™å®šå››ç»„æ•°æ®ï¼Œæ¯ç»„æ•°æ®ç”± n ä¸ªæ•°å­—ç»„æˆï¼Œå¯¹äºæ¯ä¸€ç»„æ•°å­—éœ€è¦åˆ†ä¸ºä¸¤ç»„ä½¿å¾—ä¸¤ç»„ä¹‹å’Œç›¸å·®å°½å¯èƒ½å°ï¼Œé—®æœ€ç»ˆå››ç»„æ•°æ®åˆ†ç»„åï¼Œæ¯ä¸€ç»„ä¹‹å’Œçš„æœ€å¤§å€¼ä¹‹å’Œæ˜¯å¤šå°‘
>
> - æ€è·¯ä¸€ï¼šäºŒè¿›åˆ¶æšä¸¾
>
>     å¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬å¯ä»¥åªè®¾è®¡å¤„ç†ä¸€ç»„æ•°æ®çš„ç®—æ³•ï¼Œå…¶ä½™ç»„æ•°çš„æ•°æ®è°ƒç”¨è¯¥ç®—æ³•å³å¯ã€‚å¯¹äºä¸€ä¸ªåºåˆ—ï¼Œæƒ³è¦å°†å…¶åˆ’åˆ†ä¸º 2 ç»„ä½¿å¾— 2 ç»„ä¹‹å’Œçš„å·®å€¼æœ€å°ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå¯¹äºåºåˆ—ä¸­çš„ä¸€ä¸ªæ•°è€Œè¨€ï¼Œæœ‰ä¸¤ä¸ªçŠ¶æ€ï¼Œè¦ä¹ˆåˆ†åˆ°ç¬¬ä¸€ç»„ï¼Œè¦ä¹ˆå°±åˆ†åˆ°ç¬¬äºŒç»„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é‡‡ç”¨äºŒè¿›åˆ¶æšä¸¾çš„æ–¹å¼ï¼Œå°†æ‰€æœ‰çš„åˆ†ç»„æƒ…å†µå…¨éƒ¨æšä¸¾å‡ºæ¥ï¼Œæ¯ä¸€ä¸ªçŠ¶æ€è®¡ç®—ä¸€ä¸‹å’Œçš„å·®å€¼ï¼Œæœ€åå–æœ€å°å·®å€¼æ—¶ï¼Œä¸¤ç»„ä¸­å’Œçš„æœ€å¤§å€¼å³å¯
>
>     æ—¶é—´å¤æ‚åº¦ï¼š$O(4 \times 2^n)$
>
> - æ€è·¯äºŒï¼šdfs
>
>     ä»ä¸Šé¢çš„äºŒè¿›åˆ¶æšä¸¾å¾—åˆ°å¯å‘ï¼Œä¸€å®šå¯ä»¥è¿›è¡ŒäºŒå‰æ ‘æœç´¢ã€‚å¾ˆæ˜¾ç„¶å°±ç›´æ¥å·¦ç»“ç‚¹è®©å½“å‰æ•°åˆ†åˆ°å·¦ç»„ï¼Œå³ç»“ç‚¹è®©å½“å‰æ•°åˆ†åˆ°å³ç»„å³å¯ã€‚æœ¬é¢˜æ— æ³•å‰ªæï¼Œå› ä¸ºä¸¤ç»„ä¹‹å’Œçš„å·®å€¼æ²¡æœ‰è§„å¾‹
>
>     æ—¶é—´å¤æ‚åº¦ï¼š$O(4 \times 2^n)$

äºŒè¿›åˆ¶æšä¸¾ä»£ç 

```cpp
#include <bits/stdc++.h>
#define int long long
using namespace std;

const int N = 25;

int a[N], res;

void fun(int n) {
    int MIN = 20 * 60;
    for (int i = 0; i <= (1 << n); i++) {
        int l = 0, r = 0; 
        for (int j = 0; j < n; j++) {
            if (i & (1 << j)) r += a[j];
            else l += a[j];
        }
        MIN = min(MIN, max(l, r));
    }
    res += MIN;
}

void solve() {
    int x[4] {};
    for (int i = 0; i < 4; i++) cin >> x[i];
    
    for (int i = 0; i < 4; i++) {
        for (int j = 0; j < x[i]; j++) cin >> a[j];
        fun(x[i]);
    }
    
    cout << res << "\n";
}

signed main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();
    return 0;
}
```

dfsä»£ç 

```cpp
#include <bits/stdc++.h>
#define int long long
using namespace std;

const int N = 25;

int a[N], res;
int MIN; // æ¯ä¸€ç»„æ•°æ®åˆ’åˆ†ä¸º 2 ç»„åæ¯ä¸€ç»„çš„æœ€å¤§å’Œå€¼ 

// ç¬¬ idx ä¸ªæ•°åˆ†åˆ°æŸä¸€ç»„æ—¶å·¦ç»„ä¹‹å’Œ lsï¼Œå³ç»„ä¹‹å’Œ rs 
void dfs(int idx, bool isRight, int ls, int rs, int n) {
    if (idx == n) {
        MIN = min(MIN, max(ls, rs));
        return;
    }
    
    if (ls > MIN || rs > MIN) {
        // å‰ªæï¼šå½“å‰å·¦ç»„ä¹‹å’Œ or å³ç»„ä¹‹å’Œæ¯”æœ€å¤§å’Œå€¼éƒ½å¤§ 
        return;
    }
    
    if (isRight) rs += a[idx];
    else ls += a[idx];
    
    dfs(idx + 1, false, ls, rs, n);
    dfs(idx + 1, true , ls, rs, n); 
}

void solve() {
    int x[4] {};
    for (int i = 0; i < 4; i++) cin >> x[i];
    
    for (int i = 0; i < 4; i++) {
        for (int j = 0; j < x[i]; j++) cin >> a[j];
        
        MIN = 20 * 60;
        dfs(0, false, 0, 0, x[i]);
        dfs(0, true , 0, 0, x[i]);
        res += MIN;
    }
    
    cout << res << "\n";
}

signed main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();
    return 0;
}
```

### ã€dfs/äºŒè¿›åˆ¶æšä¸¾ã€‘PERKET

<https://www.luogu.com.cn/problem/P2036>

> é¢˜æ„ï¼šç»™å®šä¸€ä¸ªäºŒå…ƒç»„åºåˆ—ï¼Œæ¯ä¸€ä¸ªäºŒå…ƒç»„ä¸­ï¼Œä¸€ä¸ªè¡¨ç¤ºé…¸åº¦ï¼Œä¸€ä¸ªè¡¨ç¤ºè‹¦åº¦ï¼Œç°åœ¨åœ¨è‡³å°‘éœ€è¦é€‰æ‹©ä¸€ä¸ªäºŒå…ƒç»„çš„æƒ…å†µä¸‹ï¼Œå¸Œæœ›é…¸åº¦ä¹‹ç§¯ä¸è‹¦åº¦ä¹‹å’Œçš„å·®å€¼æœ€å°
>
> - æ€è·¯ä¸€ï¼šäºŒè¿›åˆ¶æšä¸¾
>
>     å¾ˆæ˜¾ç„¶çš„ä¸€ä¸ªäºŒè¿›åˆ¶æšä¸¾ã€‚æ¯ä¸€ä¸ªäºŒå…ƒç»„éƒ½åªæœ‰ä¸¤ä¸ªçŠ¶æ€ï¼Œå³è¢«é€‰æ‹© or ä¸è¢«é€‰æ‹©ï¼Œæ•…å¯é‡‡ç”¨äºŒè¿›åˆ¶æšä¸¾ï¼Œå¯¹äºæ¯ä¸€ä¸ªçŠ¶æ€ç»Ÿè®¡é…¸åº¦ä¹‹ç§¯ä¸è‹¦åº¦ä¹‹å’Œå³å¯
>
>     æ—¶é—´å¤æ‚åº¦ï¼š$O(2^n)$
>
> - æ€è·¯äºŒï¼šdfs
>
>     æŒ‰ç…§ä¸Šè¿°äºŒè¿›åˆ¶æšä¸¾çš„æ€è·¯è¿›è¡Œæ¨¡æ‹Ÿå³å¯ï¼Œæœ¬é¢˜æ— æ³•å‰ªæï¼Œå› ä¸ºé…¸åº¦ä¸è‹¦åº¦ä¹‹å·®æ²¡æœ‰è§„å¾‹
>
>     æ—¶é—´å¤æ‚åº¦ï¼š$O(2^n)$

äºŒè¿›åˆ¶æšä¸¾ä»£ç 

```cpp
#include <bits/stdc++.h>
#define int long long
using namespace std;

const int N = 15;

int n;
int res = 1e9;

struct {
    int l, r;
} a[N];

void solve() {
    cin >> n;
    for (int i = 0; i < n; i++) cin >> a[i].l >> a[i].r;
    
    for (int i = 0; i <= (1 << n); i++) {
        // ç‰¹åˆ¤æ²¡æœ‰è°ƒæ–™çš„æƒ…å†µ 
        int cnt = 0;
        for (int j = 0; j < n; j++)
            if (i & (1 << j))
                cnt++;
                
        if (!cnt) continue;
        
        // è®¡ç®—ä¸¤ä¸ªå‘³é“çš„å·®å€¼
        int ls = 1, rs = 0;
        for (int j = 0; j < n; j++)
            if (i & (1 << j))
                ls *= a[j].l, rs += a[j].r;
                
        res = min(res, abs(ls - rs));
    }
    
    cout << res << "\n";
}

signed main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();
    return 0;
}
```

dfsä»£ç 

```cpp
#include <bits/stdc++.h>
#define int long long
using namespace std;

const int N = 15;

int n;
int res = 1e9;

struct {
    int l, r;
} a[N];

// å½“å‰å†³ç­–å…ƒç´ çš„ä¸‹æ ‡idxï¼Œæ˜¯å¦è¢«é€‰æ‹©chooseï¼Œé…¸åº¦ä¹‹ç§¯lsï¼Œè‹¦åº¦ä¹‹å’Œrs 
void dfs(int idx, bool choose, int ls, int rs) {
    if (idx == n) {
        if (ls == 1 && rs == 0) return;
        res = min(res, abs(ls - rs));
        return;
    }
    
    if (choose) {
        ls *= a[idx].l;
        rs += a[idx].r;
    }
    
    dfs(idx + 1, false, ls, rs);
    dfs(idx + 1, true , ls, rs);
}

void solve() {
    cin >> n;
    for (int i = 0; i < n; i++) cin >> a[i].l >> a[i].r;
    
    dfs(0, false, 1, 0);
    dfs(0, true , 1, 0);
    
    cout << res << "\n";
}

signed main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();
    return 0;
}
```

### ã€dfsã€‘è¿·å®«

<https://www.luogu.com.cn/problem/P1605>

> é¢˜æ„ï¼šçŸ©é˜µå¯»è·¯ï¼Œæœ‰éšœç¢ç‰©ï¼Œæ¯ä¸€ä¸ªç‚¹åªèƒ½èµ°ä¸€æ¬¡ï¼Œæ‰¾åˆ°èµ·ç‚¹åˆ°ç»ˆç‚¹å¯è¾¾è·¯å¾„æ•°
>
> æ€è·¯ï¼šå…¶å®å°±æ˜¯ä¸€ä¸ªå››å‰æ ‘çš„é¢˜ç›®ï¼Œåªéœ€è¦è¿›è¡Œå››ä¸ªæ–¹å‘çš„éå†æœç´¢å³å¯æ‰¾åˆ°è·¯å¾„ï¼Œç”±äºä¼šè¿›è¡Œï¼šè¶Šç•Œã€éšœç¢ç‰©ã€ä»¥åŠä¸å¯é‡å¤éå†çš„å‰ªæï¼Œæ•…éå†çš„æ•°é‡ä¼šå¾ˆå°‘
>
> æ—¶é—´å¤æ‚åº¦ï¼š$<< O(4^{nm})$

```cpp
#include <bits/stdc++.h>
#define int long long
using namespace std;

const int N = 10;

int n, m, k;
int aa, bb, cc, dd;
int g[N][N], vis[N][N];
int res;

int dx[] = {-1, 1, 0, 0}, dy[] = {0, 0, 1, -1};

void dfs(int x, int y) {
    if (x == cc && y == dd) {
        res++;
        return;
    }
    
    for (int k = 0; k < 4; k++) {
        int xx = x + dx[k], yy = y + dy[k];
        if (xx > 0 && xx <= n && yy > 0 && yy <= m && !g[xx][yy] && !vis[xx][yy]) {
            vis[x][y] = true;
            dfs(xx, yy);
            vis[x][y] = false;
        }
    }
}

void solve() {
    cin >> n >> m >> k;
    cin >> aa >> bb >> cc >> dd;
    
    while (k--) {
        int x, y;
        cin >> x >> y;
        g[x][y] = 1;
    }
    
    dfs(aa, bb);
    
    cout << res << "\n";
} 

signed main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();
    return 0;
}
```

### ã€dfsã€‘å•è¯æ–¹é˜µ

<https://www.luogu.com.cn/problem/P1101>

> - é¢˜æ„ï¼šç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²æ–¹é˜µï¼Œé—®å¯¹äºå…¶ä¸­çš„ 8 ä¸ªæ–¹å‘ï¼Œæ˜¯å¦å­˜åœ¨ä¸€ä¸ªæŒ‡å®šçš„å­—ç¬¦ä¸²
> - æ€è·¯ï¼šå¾ˆæ˜¾ç„¶çš„æš´åŠ›æšä¸¾ï¼Œåªä¸è¿‡é‡‡ç”¨ dfs è¿›è¡Œä¼˜åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°æœç´¢çš„é€»è¾‘éå¸¸çš„ç®€å•ï¼Œåªéœ€è¦åœ¨çº¦æŸæ–¹å‘çš„æƒ…å†µä¸‹æ¯æ¬¡éå†å…«ä¸ªæ–¹å‘å³å¯ã€‚æœ¬é¢˜çš„å…³é”®åœ¨äºå¦‚ä½•å¿«é€Ÿæ­£ç¡®çš„ç¼–ç ã€‚å¯¹äºå…«ä¸ªè§’åº¦åˆ¤æ–­æ˜¯å¦ä¸åŸå§‹æ–¹å‘ä¸€è‡´ï¼Œæˆ‘ä»¬é‡‡ç”¨**å¢é‡çš„æ€è·¯**ï¼Œåªéœ€è¦é€šè¿‡ä¼ é€’çˆ¶ç»“ç‚¹çš„ä½ç½®åæ ‡å³å¯å”¯ä¸€ç¡®å®šï¼Œå› ä¸ºä¸¤ç‚¹ç¡®å®šä¸€æ¡äº†ä¸€æ¡å°„çº¿ï¼Œæ–¹å‘ä¹Ÿå°±ç¡®å®šäº†ã€‚å…¶æ¬¡å°±æ˜¯å¦‚ä½•æ„é€ ç­”æ¡ˆçŸ©é˜µï¼Œæ€è·¯ä¸ä¸¤ç‚¹ç¡®å®šå°„çº¿çš„é€»è¾‘ç±»ä¼¼ï¼Œæˆ‘ä»¬åœ¨æŠµè¾¾æœç´¢çš„ç»ˆç‚¹æ—¶ï¼Œåªéœ€è¦é€šè¿‡å½“å‰ç‚¹çš„åæ ‡ä¸çˆ¶ç»“ç‚¹çš„åæ ‡å”¯ä¸€ç¡®å®šæ¥çš„è·¯å¾„çš„æ–¹å‘ï¼Œè¿›è¡Œæ„é€ å³å¯
> - æ—¶é—´å¤æ‚åº¦ï¼šéš¾ä»¥è®¡ç®—ï¼Œä½†æ˜¯ dfs ä¸€å®šå¯è¡Œ

```cpp
#include <bits/stdc++.h>
#define int long long
using namespace std;

const int N = 110;

int n;
char g[N][N], res[N][N], s[10] = "yizhong";

// oa,ob çˆ¶ç»“ç‚¹åæ ‡ï¼Œa,b å½“å‰ç»“ç‚¹åæ ‡ï¼Œidx å½“å‰åŒ¹é…çš„ä½ç½®
void dfs(int oa, int ob, int a, int b, int idx) {
    if (s[idx] != g[a][b]) return;
    
    if (idx == 6) {
        int i = a, j = b;
        for (int t = 6; t >= 0; t--) {
            res[i][j] = s[t];
            i -= a - oa;
            j -= b - ob;
        }
        return;
    }
    
    int dx[] = {1, -1, 0, 0, 1, -1, -1, 1}, dy[] = {0, 0, 1, -1, 1, 1, -1, -1};
    
    for (int k = 0; k < 8; k++) {
        int x = a + dx[k], y = b + dy[k];
        if (x < 1 || x > n || y < 1 || y > n) continue;
        
        if ((oa == -1 && ob == -1) || (x - a == a - oa && y - b == b - ob))
            dfs(a, b, x, y, idx + 1);
    }
}

void solve() {
    cin >> n;
    for (int i = 1; i <= n; i++)
        for (int j = 1; j <= n; j++)
            cin >> g[i][j], res[i][j] = '*';
    
    for (int i = 1; i <= n; i++)
        for (int j = 1; j <= n; j++)
            dfs(-1, -1, i, j, 0);
    
    for (int i = 1; i <= n; i++) {
        for (int j = 1; j <= n; j++)
            cout << res[i][j];
        cout << "\n";
    }
}

signed main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();
    return 0;
}
```

### ã€dfsã€‘è‡ªç„¶æ•°çš„æ‹†åˆ†é—®é¢˜

<https://www.luogu.com.cn/problem/P2404>

> - é¢˜æ„ï¼šç»™å®šä¸€ä¸ªè‡ªç„¶æ•° nï¼Œé—®æœ‰å¤šå°‘ç§æ‹†åˆ†æ–¹æ³•èƒ½å°†è¯¥æ•°æ‹†åˆ†ä¸ºä¸€å®šæ•°é‡çš„å‡åºè‡ªç„¶æ•°ä¹‹å’Œ
> - æ€è·¯ï¼š**æ ‘å½¢æœç´¢çš„ä¾‹é¢˜**ã€‚æˆ‘ä»¬é‡‡ç”¨é€’å¢å‡‘æ•°çš„æ€è·¯ï¼Œå¯¹äºæ¯ä¸€ä¸ªç»“ç‚¹å€¼ï¼Œæˆ‘ä»¬ä»å…¶çˆ¶ç»“ç‚¹çš„å€¼å¼€å§‹æ·±åº¦æœç´¢ï¼Œä»è€Œç¡®ä¿äº†å’Œæ•°é€’å¢ã€‚é€’å½’ç»ˆç‚¹å°±æ˜¯å’Œå€¼ä¸ºè‡ªç„¶æ•° n çš„å€¼ã€‚å‰ªæå°±æ˜¯å’Œå€¼è¶…è¿‡äº†è‡ªç„¶æ•° n çš„å€¼
> - æ—¶é—´å¤æ‚åº¦ï¼š$<<O(n^n)$

```cpp
#include <bits/stdc++.h>
#define int long long
using namespace std;

int n;
vector<int> res;

// now è¡¨ç¤ºå½“å‰ç»“ç‚¹çš„å€¼ï¼Œsum è¡¨ç¤ºæ ¹åˆ°å½“å‰ç»“ç‚¹çš„è·¯å¾„ä¹‹å’Œ
void dfs(int now, int sum) {
    if (sum > n) return;
    
    if (sum == n) {
        for (int i = 0; i < res.size(); i++)
            cout << res[i] << "+\n"[i == res.size() - 1];
        return;
    }
    
    for (int i = now; i < n; i++) {
        res.push_back(i);
        dfs(i, sum + i);
        res.pop_back();
    }
}

void solve() {
    cin >> n;
    
    for (int i = 1; i < n; i++) {
        res.push_back(i);
        dfs(i, i);
        res.pop_back();
    }
}

signed main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();
    return 0;
}
```

### ã€dfsã€‘Lake Counting S

<https://www.luogu.com.cn/problem/P1596>

> - é¢˜æ„ï¼šç»™å®šä¸€ä¸ªçŸ©é˜µï¼Œè®¡ç®—å…¶ä¸­è¿é€šå—çš„æ•°é‡
> - æ€è·¯ï¼šç›´æ¥é€ä¸ªå…ƒç´ éå†å³å¯ï¼Œå¯¹äºæ¯ä¸€ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬é‡‡ç”¨ dfs æˆ–è€… bfs çš„æ–¹å¼è¿›è¡Œæ‰“æ ‡ç­¾ä»è€Œå°†æ•´ä¸ªè¿é€šå—éƒ½æ ‡è®°å‡ºæ¥å³å¯
> - æ—¶é—´å¤æ‚åº¦ï¼š$O(nm)$

dfs ä»£ç 

```cpp
#include <bits/stdc++.h>
#define int long long
using namespace std;

const int N = 110;

int n, m;
char g[N][N];
bool vis[N][N];
int res, dx[] = {1, -1, 0, 0, 1, 1, -1, -1}, dy[] = {0, 0, 1, -1, 1, -1, 1, -1};

void dfs(int i, int j) {
    if (i < 1 || i > n || j < 1 || j > m || vis[i][j] || g[i][j] != 'W') return;
    
    vis[i][j] = true;
    
    for (int k = 0; k < 8; k++) {
        int x = i + dx[k], y = j + dy[k];
        dfs(x, y);
    }
}

void solve() {
    cin >> n >> m;
    for (int i = 1; i <= n; i++)
        for (int j = 1; j <= m; j++)
            cin >> g[i][j];
    
    for (int i = 1; i <= n; i++)
        for (int j = 1; j <= m; j++)
            if (!vis[i][j] && g[i][j] == 'W')
                dfs(i, j), res++;
    
    cout << res << "\n";
}

signed main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();
    return 0;
}
```

bfs ä»£ç 

```cpp
#include <bits/stdc++.h>
#define int long long
using namespace std;

const int N = 110;

int n, m;
char g[N][N];
bool vis[N][N];
int res, dx[] = {1, -1, 0, 0, 1, 1, -1, -1}, dy[] = {0, 0, 1, -1, 1, -1, 1, -1};

void bfs(int i, int j) {
    queue<pair<int, int>> q;
    
    q.push({i, j});
    vis[i][j] = true;
    
    while (q.size()) {
        auto h = q.front();
        q.pop();
        
        int x = h.first, y = h.second;
        for (int k = 0; k < 8; k++) {
            int xx = x + dx[k], yy = y + dy[k];
            if (!vis[xx][yy] && g[xx][yy] == 'W') {
                q.push({xx, yy});
                vis[xx][yy] = true;
            }
        }
    }
}

void solve() {
    cin >> n >> m;
    for (int i = 1; i <= n; i++)
        for (int j = 1; j <= m; j++)
            cin >> g[i][j];
    
    for (int i = 1; i <= n; i++)
        for (int j = 1; j <= m; j++)
            if (!vis[i][j] && g[i][j] == 'W')
                bfs(i, j), res++;
    
    cout << res << "\n";
}

signed main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();
    return 0;
}
```

### ã€dfsã€‘å¡«æ¶‚é¢œè‰²

<https://www.luogu.com.cn/problem/P1162>

> - é¢˜æ„ï¼šç»™å®šä¸€ä¸ªæ–¹é˜µï¼Œå…¶ä¸­åªæœ‰ 0 å’Œ 1ï¼Œå…¶ä¸­çš„ 1 å°†éƒ¨åˆ†çš„ 0 å›´æˆäº†ä¸€ä¸ªåœˆï¼Œç°åœ¨éœ€è¦å°†è¢«å›´ä½çš„ 0 è½¬ä¸º 2 åï¼Œå°†è½¬åŒ–åçš„æ–¹é˜µè¾“å‡º
> - æ€è·¯ï¼šé¢˜æ„å¾ˆç®€å•ï¼Œæ€è·¯ä¹Ÿå¾ˆæ˜¾ç„¶ï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯åŒºåˆ†å¼€åœˆå†…ä¸åœˆå¤–çš„ 0ï¼Œå¦‚ä½•åŒºåˆ†å‘¢ï¼Ÿæˆ‘ä»¬é‡‡ç”¨æœç´¢æ‰“æ ‡è®°çš„æ–¹å¼å°†å¤–åœˆçš„ 0 å…¨éƒ¨æ‰“æ ‡è®°ä¹‹åï¼Œé‡åˆ°çš„æ²¡æœ‰æ‰“æ ‡è®°çš„ 0 æ˜¾ç„¶å°±æ˜¯åœˆå†…çš„äº†ã€‚ä¸ºäº†æ»¡è¶³æ‰€æœ‰æƒ…å†µä¸‹åœˆå†…çš„ 0ï¼Œæˆ‘ä»¬ä»æ–¹é˜µçš„å››æ¡è¾¹è¿›è¡Œæ¢æµ‹å¼æ‰“æ ‡ç­¾å³å¯
> - æ—¶é—´å¤æ‚åº¦ï¼š$O(n^2)$

```cpp
#include <bits/stdc++.h>
#define int long long
using namespace std;

const int N = 35;

int n, g[N][N];
int dx[] = {0, 0, 1, -1}, dy[] = {1, -1, 0, 0};
bool vis[N][N];

void dfs(int i, int j) {
    if (i < 1 || i > n || j < 1 || j > n || g[i][j] == 1 || vis[i][j]) return;
    
    vis[i][j] = true;
    
    for (int k = 0; k < 4; k++) {
        int x = i + dx[k], y = j + dy[k];
        dfs(x, y);
    }
}

void solve() {
    cin >> n;
    
    for (int i = 1; i <= n; i++)
        for (int j = 1; j <= n; j++)
            cin >> g[i][j];
    
    for (int i = 1; i <= n; i++) if (g[1][i] == 0 && !vis[1][i]) dfs(1, i);
    for (int i = 1; i <= n; i++) if (g[i][n] == 0 && !vis[i][n]) dfs(i, n);
    for (int i = 1; i <= n; i++) if (g[n][i] == 0 && !vis[n][i]) dfs(n, i);
    for (int i = 1; i <= n; i++) if (g[i][1] == 0 && !vis[i][1]) dfs(i, 1);
    
    for (int i = 1; i <= n; i++)
        for (int j = 1; j <= n; j++)
            if (vis[i][j]) cout << 0 << " \n"[j == n];
            else if (g[i][j] == 0) cout << 2 << " \n"[j == n];
            else cout << g[i][j] << " \n"[j == n];
}

signed main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();
    return 0;
}
```

### ã€bfsã€‘é©¬çš„éå†

<https://www.luogu.com.cn/problem/P1443>

> - é¢˜æ„ï¼šç»™å®šä¸€ä¸ªçŸ©é˜µæ£‹ç›˜èŒƒå›´ä¸ä¸€ä¸ªé©¬çš„ä½ç½®åæ ‡ï¼Œç°åœ¨é—®æ£‹ç›˜ä¸­æ¯ä¸€ä¸ªç‚¹çš„æœ€å°åˆ°è¾¾è·ç¦»æ˜¯å¤šå°‘
> - æ€è·¯ï¼šå¾ˆæ˜¾ç„¶çš„ä¸€ä¸ª bfs å®½æœæ¨¡å‹ï¼Œæˆ‘ä»¬åªéœ€è¦ä»è¯¥é¢—é©¬çš„èµ·å§‹ä½ç½®å¼€å§‹å®½æœï¼Œå¯¹äºæ¯ä¸€ä¸ªç¬¬ä¸€ä¸ªæœç´¢åˆ°çš„æ­¤å‰æ²¡æœ‰åˆ°è¾¾çš„ç‚¹ï¼Œè®¡ç®—æ­¤æ—¶åˆ°èµ·ç‚¹çš„æ­¥é•¿è·ç¦»å°±æ˜¯æœ€å°åˆ°è¾¾è·ç¦»
> - æ—¶é—´å¤æ‚åº¦ï¼š$O(n \times m)$

```cpp
#include <bits/stdc++.h>
#define int long long
using namespace std;

const int N = 410;

struct Idx {
    int x, y;
};

int n, m, x, y;
int d[N][N];
int dx[] = {1, 1, -1, -1, 2, 2, -2, -2}, dy[] = {2, -2, 2, -2, 1, -1, 1, -1};

void bfs() {
    queue<Idx> q;
    q.push({x, y});
    d[x][y] = 0;
    
    while (q.size()) {
        auto h = q.front();
        q.pop();
        
        for (int k = 0; k < 8; k++) {
            int i = h.x + dx[k], j = h.y + dy[k];
            if (i < 1 || i > n || j < 1 || j > m || d[i][j] != -1) continue;
            d[i][j] = d[h.x][h.y] + 1;
            q.push({i, j});
        }
    }
}

void solve() {
    cin >> n >> m >> x >> y;
    
    for (int i = 1; i <= n; i++)
        for (int j = 1; j <= m; j++)
            d[i][j] = -1;
    
    bfs();
    
    for (int i = 1; i <= n; i++)
        for (int j = 1; j <= m; j++)
            cout << d[i][j] << " \n"[j == m];
}

signed main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();
    return 0;
}
```

### ã€bfsã€‘å¥‡æ€ªçš„ç”µæ¢¯

<https://www.luogu.com.cn/problem/P1135>

> - é¢˜æ„ï¼šç»™å®šä¸€ä¸ªç”µæ¢¯ï¼Œç¬¬ `i` å±‚åªèƒ½ä¸Šå‡æˆ–è€…ä¸‹é™ `a[i]` å±‚ï¼Œé—®ä»èµ·ç‚¹å¼€å§‹åˆ°ç»ˆç‚¹æœ€å°‘éœ€è¦ä¹˜åå‡ æ¬¡ç”µæ¢¯
> - æ€è·¯ï¼šå¾ˆæ˜¾ç„¶çš„ä¸€ä¸ªå®½æœï¼Œå…³é”®åœ¨äºéœ€è¦å¯¹æ‰“æ ‡è®°é¿å…é‡å¤è®¿é—®ç»“ç‚¹é€ æˆæ­»å¾ªç¯
> - æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$

```cpp
#include <bits/stdc++.h>
#define int long long
using namespace std;

const int N = 210;

int n, x, y, a[N];
int d[N]; // d[i] è¡¨ç¤ºèµ·ç‚¹åˆ°ç¬¬ i å±‚æ¥¼çš„æœ€å°æ“ä½œæ¬¡æ•°
bool vis[N];

void bfs() {
    queue<int> q;
    
    q.push(x);
    d[x] = 0;
    vis[x] = true;
    
    while (q.size()) {
        int now = q.front();
        q.pop();
        
        if (now == y) break;
        
        int high = now + a[now], low = now - a[now];
        
        if (!vis[high] && high >= 1 && high <= n) {
            q.push(high);
            d[high] = d[now] + 1;
            vis[high] = true;
        }
        if (!vis[low] && low >= 1 && low <= n) {
            q.push(low);
            d[low] = d[now] + 1;
            vis[low] = true;
        }
    }
}

void solve() {
    cin >> n >> x >> y;
    for (int i = 1; i <= n; i++) {
        cin >> a[i];
        d[i] = -1;
    }
    
    bfs();
    
    cout << d[y] << "\n";
} 

signed main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();
    return 0;
}
```

### ã€dfs/çŠ¶å‹dpã€‘åƒå¥¶é…ª :star:

> é¢˜æ„ï¼šç»™å®šä¸€ä¸ªå¹³é¢ç›´è§’åæ ‡ç³»ä¸ n ä¸ªç‚¹çš„åæ ‡ï¼Œèµ·ç‚¹åœ¨åæ ‡åŸç‚¹ã€‚é—®å¦‚ä½•é€‰æ‹©è¡Œè¿›è·¯çº¿ä½¿å¾—åˆ°è¾¾æ¯ä¸€ä¸ªç‚¹ä¸”æ€»è·¯ç¨‹æœ€çŸ­ 
> - æ€è·¯ä¸€ï¼šçˆ†æœã€‚é¢˜ä¸­çš„ $n \le 15$ ç›´æ¥æ— è„‘çˆ†æœï¼Œä½†æ˜¯ **TLE**ã€‚çˆ†æœçš„æ€è·¯ä¸ºï¼šæ¯æ¬¡é€‰æ‹©å…¶ä¸­çš„ä¸€ä¸ªç‚¹ï¼Œæ¥ä¸‹æ¥é€‰æ‹©å‰©ä½™çš„æ²¡æœ‰è¢«é€‰æ‹©è¿‡çš„ç‚¹ç»§ç»­æœç´¢ï¼ŒçŸ¥é“æ‰€æœ‰çš„ç‚¹å…¨éƒ¨éƒ½æœåˆ°ä¸ºæ­¢
>
>     æ—¶é—´å¤æ‚åº¦ï¼š$O(n!)$
>
> - æ€è·¯äºŒï¼šçŠ¶æ€å‹ç¼© DPã€‚
>
>     æ—¶é—´å¤æ‚åº¦ï¼š$O()$

çˆ†æœä»£ç 

```cpp
#include <bits/stdc++.h>
#define int long long
using namespace std;

const int N = 20;

int n;
double res = 4000.0;
bool vis[N];

struct Idx {
    double x, y;
} a[N];

double d(Idx be, Idx en) {
    return sqrt((be.x - en.x) * (be.x - en.x) + (be.y - en.y) * (be.y - en.y));
}

// çˆ¶ç»“ç‚¹åæ ‡ faï¼Œå½“å‰ç»“ç‚¹æ¬¡åº nowï¼Œå½“å‰è·¯å¾„é•¿åº¦ len 
void dfs(Idx fa, int now, double len) {
    vis[now] = true;
    
    if (count(vis + 1, vis + n + 1, true) == n) {
        res = min(res, len);
    }
    
    for (int i = 1; i <= n; i++)
        if (!vis[i])
            dfs(a[now], i, len + d(a[now], a[i]));
    
    vis[now] = false;
}

void solve() {
    cin >> n;
    for (int i = 1; i <= n; i++) {
        cin >> a[i].x >> a[i].y; 
    }
    
    for (int i = 1; i <= n; i++) {
        Idx fa = {0, 0};
        dfs(fa, i, d(fa, a[i]));
    }
    
    cout << fixed << setprecision(2) << res << "\n";
}

signed main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();
    return 0;
}
```

çŠ¶å‹ dp ä»£ç 

```cpp

```

### ã€dfsã€‘é€’å½’å®ç°æŒ‡æ•°å‹æšä¸¾

<https://www.acwing.com/problem/content/94/>

> - é¢˜æ„ï¼šç»™å®š n ä¸ªæ•°ï¼Œä»å…¶ä¸­é€‰æ‹© 0-n ä¸ªæ•°ï¼Œå°†æ‰€æœ‰çš„é€‰æ‹©æ–¹æ¡ˆæ‰“å°å‡ºæ¥ï¼Œæ¯ä¸€ä¸ªæ–¹æ¡ˆä¸­æ•°å­—æŒ‰ç…§å‡åºæ’åˆ—
> - æ€è·¯ï¼šå¾ˆæ˜¾ç„¶çš„ä¸€ä¸ªäºŒå‰æ ‘é—®é¢˜ã€‚æ¯ä¸€ä¸ªæ•°åªæœ‰ä¸¤ç§çŠ¶æ€ï¼Œé€‰æ‹© or ä¸é€‰æ‹©ï¼Œäºæ˜¯å¯ä»¥é‡‡ç”¨äºŒè¿›åˆ¶æšä¸¾ or äºŒå‰æ ‘ dfs çš„æ–¹æ³•è¿›è¡Œã€‚ä¸ºäº†æ»¡è¶³å‡åºï¼ŒäºŒè¿›åˆ¶æšä¸¾æ—¶ä»ä½ä½åˆ°é«˜ä½åˆ¤æ–­æ˜¯å¦ä¸º 1 å³å¯ï¼›æœç´¢æ—¶ä»ä½ä½å¼€å§‹æœç´¢ï¼Œé€šè¿‡ä¸€ä¸ªåŠ¨æ€æ•°ç»„å­˜å‚¨æœç´¢è·¯å¾„ä¸Šçš„æ•°å­—å³å¯
> - æ—¶é—´å¤æ‚åº¦ï¼š$O(2^n)$

äºŒè¿›åˆ¶æšä¸¾

```cpp
#include <bits/stdc++.h>
#define int long long
using namespace std;

int n;

void solve() {
    cin >> n;
    
    for (int i = 0; i < (1 << n); i++) {
        for (int j = 0; j < n; j++) {
            if (i & (1 << j)) {
                cout << j + 1 << ' ';
            }
        }
        cout << "\n";
    }
}

signed main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();
    return 0;
}
```

dfs

```cpp
#include <bits/stdc++.h>
#define int long long
using namespace std;

int n;
vector<int> a;

void dfs(int now, bool cho) {
    if (now == n) {
        for (auto& x: a) {
            cout << x << ' ';
        }
        cout << "\n";
        return;
    }
    
    dfs(now + 1, false);
    
    a.push_back(now + 1);
    dfs(now + 1, true);
    a.pop_back();
}

void solve() {
    cin >> n;
    
    dfs(1, false);

    a.push_back(1);
    dfs(1, true);
    a.pop_back();
}

signed main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();
    return 0;
}
```

### ã€dfsã€‘é€’å½’å®ç°æ’åˆ—å‹æšä¸¾

<https://www.acwing.com/problem/content/96/>

> - é¢˜æ„ï¼šæŒ‰ç…§å­—å…¸åºå‡åºï¼Œæ‰“å° n ä¸ªæ•°çš„æ‰€æœ‰å…¨æ’åˆ—æƒ…å†µ
> - æ€è·¯ï¼šä»ç¬¬ä¸€ä½å¼€å§‹æšä¸¾æ¯ä¸€ä½å¯ä»¥é€‰æ‹©çš„æ•°ï¼Œæ˜¾ç„¶æ¯ä¸€ä½å¯é€‰æ‹©æ•°çš„æ•°é‡é€æ¸å‡å°‘ï¼Œç›´åˆ°åªæœ‰ä¸€ç§é€‰æ‹©ç»“æŸæœç´¢
> - æ—¶é—´å¤æ‚åº¦ï¼š$O(n!)$

```cpp
#include <bits/stdc++.h>
#define int long long
using namespace std;

const int N = 10;

int n;
bool vis[N];
vector<int> a;

// å½“å‰æ•°ä½ now
void dfs(int now) {
    if (now > n) {
        for (auto& x: a) {
            cout << x << ' ';
        }
        cout << "\n";
        return;
    }

    for (int i = 1; i <= n; i++) {
        if (!vis[i]) {
            a.push_back(i);
            vis[i] = true;
            dfs(now + 1);
            a.pop_back();
            vis[i] = false;
        }
    }
}

void solve() {
    cin >> n;
    dfs(1);
}

signed main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr), cout.tie(nullptr);
    int T = 1;
//    cin >> T;
    while (T--) solve();
    return 0;
}
```

### ã€dfs/æ ‘å½¢dpã€‘æ ‘çš„ç›´å¾„ :star:

æ ‘çš„è·¯å¾„é—®é¢˜ï¼Œè€ƒè™‘å›æº¯ã€‚å¦‚ä½•æ›´æ–°å€¼ï¼Ÿå¦‚ä½•è¿”å›å€¼ï¼Ÿ

å‚è€ƒï¼š<https://www.bilibili.com/video/BV17o4y187h1/>



### ã€dfsã€‘åœ¨å¸¦æƒæ ‘ç½‘ç»œä¸­ç»Ÿè®¡å¯è¿æ¥æœåŠ¡å™¨å¯¹æ•°ç›®

<https://leetcode.cn/problems/count-pairs-of-connectable-servers-in-a-weighted-tree-network/description/>

> é¢˜æ„ï¼šç»™å®šä¸€æ£µå¸¦æƒæ— æ ¹æ ‘ï¼Œå®šä¹‰ã€Œä¸­è½¬ç»“ç‚¹ã€ä¸ºä»¥å½“å‰ç»“ç‚¹ä¸ºæ ¹ï¼Œèƒ½å¤Ÿå¯»æ‰¾åˆ°ä¸¤ä¸ªä¸åŒåˆ†æ”¯ä¸‹çš„ç»“ç‚¹ï¼Œä½¿å¾—è¿™ä¸¤ä¸ªç»“ç‚¹åˆ°å½“å‰ç»“ç‚¹çš„ç®€å•è·¯å¾„é•¿åº¦å¯ä»¥è¢«ç»™å®šå€¼ k æ•´é™¤ï¼Œé—®æ ‘ä¸­æ¯ä¸€ä¸ªç»“ç‚¹çš„ã€Œä¸­è½¬ç»“ç‚¹ã€çš„æœ‰æ•ˆå¯¹æ•°æ˜¯å¤šå°‘
>
> æ€è·¯ï¼šdfs+ä¹˜æ³•åŸç†ã€‚
>
> - ç”±äºæ•°æ®é‡æ˜¯ $n=10^3$ï¼Œå¯ä»¥ç›´æ¥æšä¸¾æ¯ä¸€ä¸ªé¡¶ç‚¹ï¼Œå¹¶ä¸”æ¯ä¸€ä¸ªé¡¶ç‚¹çš„æ“ä½œå¯ä»¥æ˜¯ $O(n)$ çš„ï¼Œæˆ‘ä»¬è€ƒè™‘éå†ã€‚å¯¹äºæ¯ä¸€ä¸ªç»“ç‚¹ï¼Œå¯¹åº”çš„æœ‰æ•ˆå¯¹æ•°å–å†³äºæ¯ä¸€ä¸ªå­æ ‘ä¸­çš„ç®€å•è·¯å¾„é•¿åº¦åˆæ³•çš„ç»“ç‚¹æ•°ï¼Œé€šè¿‡æ·±æœç»Ÿè®¡å³å¯
> - ç»Ÿè®¡å‡ºæ¯ä¸€ä¸ªå­æ ‘çš„åˆæ³•ç»“ç‚¹åè¿˜éœ€è¦è¿›è¡Œç­”æ¡ˆçš„è®¡ç®—ï¼Œä¹Ÿå°±æ˜¯æœ‰æ•ˆå¯¹æ•°çš„ç»Ÿè®¡ã€‚å¯¹äºæ¯ä¸€ä¸ªåˆæ³•ç»“ç‚¹ï¼Œéƒ½å¯ä»¥å’Œéå½“å‰å­æ ‘ä¸Šçš„æ‰€æœ‰ç»“ç‚¹ç»“åˆå½¢æˆä¸€ä¸ªåˆæ³•æœ‰æ•ˆå¯¹ï¼Œç›´æ¥è¿™æ ·ç»Ÿè®¡ä¼šå¯¼è‡´ç»“æœé‡å¤è®¡ç®—ä¸€æ¬¡ï¼Œå› æ­¤éœ€è¦ç­”æ¡ˆé™¤ä»¥äºŒã€‚å½“ç„¶ä¹Ÿå¯ä»¥åˆ©ç”¨ä¹˜æ³•åŸç†ï¼Œä¸€è¾¹ç»Ÿè®¡æ¯ä¸€ä¸ªå­æ ‘ä¸­æœ‰æ•ˆçš„ç»“ç‚¹æ•°ï¼Œä¸€è¾¹å’Œå·²ç»Ÿè®¡è¿‡çš„æœ‰æ•ˆç»“ç‚¹æ•°è¿›è¡Œè®¡ç®—
>
> æ—¶é—´å¤æ‚åº¦ï¼š$O(n^2)$
>
> æ³¨ï¼šæ€»ç»“æœ¬é¢˜æ ¹æœ¬åŸå› æ˜¯æå‡å¯¹å»ºå›¾çš„ç†è§£ä»¥åŠé’ˆå¯¹ `vector` ç”¨æ³•çš„æ€»ç»“
>
> - å…³äºå»ºå›¾
>     - ä¸€å¼€å§‹ç¼–ç æ—¶ï¼Œæˆ‘è®¾ç½®äº†ç»“ç‚¹è®¿é—®çŠ¶æ€æ•°ç»„ `vector<bool> vis` å’Œæ¯ä¸€ä¸ªç»“ç‚¹åˆ°å½“å‰æ ¹ç»“ç‚¹çš„è·ç¦»æ•°ç»„ `vector<int> d`ï¼Œä½†å…¶å®éƒ½å¯ä»¥è§„é¿ï¼Œå› ä¸ºæœ¬é¢˜æ˜¯ã€Œæ ‘ã€å½¢å›¾ï¼Œå¯ä»¥é€šè¿‡åœ¨æ·±æœæ—¶åŒæ—¶ä¼ é€’çˆ¶ç»“ç‚¹æ¥è§„é¿æ‰ `vis` æ•°ç»„çš„ä½¿ç”¨
>     - åŒæ—¶ç”±äºåªéœ€è¦åœ¨éå†æ—¶è®¡ç®—è·¯å¾„æ˜¯å¦åˆæ³•ä»è€Œè®¡æ•°ï¼Œå› æ­¤ä¸éœ€è¦å­˜å‚¨æ¯ä¸€ä¸ªç»“ç‚¹åˆ°å½“å‰æ ¹ç»“ç‚¹çš„è·¯å¾„å€¼ï¼Œå¯ä»¥é€šè¿‡å†å¢åŠ ä¸€ä¸ªæœç´¢çŠ¶æ€å‚æ•°æ¥è§„é¿æ‰ `d` æ•°ç»„çš„ä½¿ç”¨
> - å…³äº `vector`
>     - ä¸€å¼€å§‹ä½¿ç”¨äº†å…¨å±€ `vis` æ•°ç»„ï¼Œå› æ­¤æ¯æ¬¡éƒ½éœ€è¦è¿›è¡Œæ¸…ç©ºæ“ä½œã€‚æˆ‘ä½¿ç”¨äº† `.clear()` æ–¹æ³•è¯•å›¾é‡æ–°åˆå§‹åŒ–æ•°ç»„ï¼Œä½†è¿™å¯¼è‡´äº†çŠ¶æ€çš„é”™è¯¯è®°å½•ï¼Œå¯èƒ½æ˜¯ LeetCode å¹³å° C++ è¯­è¨€ç‰¹æœ‰çš„å‘ï¼Œè¿˜æ˜¯å°‘ç”¨å…¨å±€å˜é‡
>     - `.clear()` æ–¹æ³•ä¼šå¯¼è‡´ `.size()` ä¸º 0ï¼Œä½†æ˜¯ä»ç„¶å¯ä»¥é€šè¿‡ `[]` æ–¹æ³•è·å¾—åˆæ³•èŒƒå›´å†…çš„å…ƒç´ å€¼ï¼Œè¿™æ˜¯ `vector` å†…å­˜åˆ†é…ä¼˜åŒ–çš„ç»“æœ

```cpp []
class Solution {
public:
    vector<int> countPairsOfConnectableServers(vector<vector<int>>& edges, int signalSpeed) {
        int n = edges.size() + 1;
        
        struct node { int to, w; };
        vector<vector<node>> g(n, vector<node>());
        for (auto e: edges) {
            int u = e[0], v = e[1], w = e[2];
            g[u].push_back({v, w});
            g[v].push_back({u, w});
        }

        function<int(int, int, int)> dfs = [&](int fa, int now, int d) {
            int res = d % signalSpeed == 0;
            for (auto ch: g[now]) {
                if (ch.to != fa) {
                    res += dfs(now, ch.to, d + ch.w);
                }
            }
            return res;
        };

        vector<int> res(n);
        for (int i = 0; i < n; i++) {
            int sum = 0;
            for (auto ch: g[i]) {
                int cnt = dfs(i, ch.to, ch.w);
                res[i] += cnt * sum;
                sum += cnt;
            }
        }

        return res;
    }
};
```

```python []
class Solution:
    def countPairsOfConnectableServers(self, edges: List[List[int]], signalSpeed: int) -> List[int]:
        n = len(edges) + 1

        g = [[] for _ in range(n)]
        for u, v, w in edges:
            g[u].append((v, w))
            g[v].append((u, w))

        def dfs(fa: int, now: int, d: int) -> int:
            ret = d % signalSpeed == 0
            for ch in g[now]:
                if ch[0] != fa:
                    ret += dfs(now, ch[0], d + ch[1])
            return ret

        res = [0] * n
        for i in range(n):
            sum = 0
            for ch in g[i]:
                cnt = dfs(i, ch[0], ch[1])
                res[i] += sum * cnt
                sum += cnt

        return res
```

### ã€dfsã€‘å°†çŸ³å¤´åˆ†æ•£åˆ°ç½‘æ ¼å›¾çš„æœ€å°‘ç§»åŠ¨æ¬¡æ•°

<https://leetcode.cn/problems/minimum-moves-to-spread-stones-over-grid/>

> æ ‡ç­¾ï¼šæœç´¢ã€å…¨æ’åˆ—ã€åº“å‡½æ•°
>
> é¢˜æ„ï¼šç»™å®šä¸€ä¸ª $3\times 3$ çš„çŸ©é˜µ $g$ï¼Œå…¶ä¸­æ•°å­—æ€»å’Œä¸º 9 ä¸” $g[i][j] \ge 0$ï¼Œç°åœ¨éœ€è¦å°†å…¶ä¸­ $>1$ çš„æ•°å­—é€ä¸ªç§»åŠ¨åˆ°å€¼ä¸º 0 çš„ä½ç½®ä¸Šä½¿å¾—æœ€ç»ˆçŸ©é˜µå…¨ä¸º 1ï¼Œé—®æœ€å°‘ç§»åŠ¨é•¿åº¦æ˜¯å¤šå°‘ã€‚
>
> æ€è·¯ä¸€ï¼šæ‰‹å†™å…¨æ’åˆ—
>
> - æ€è·¯ï¼šå¯ä»¥å°†è¿™é“é¢˜æŠ½è±¡ä¸ºæ±‚è§£ã€Œå°† a ä¸ªå¤§äº 1 ä½ç½®çš„æ•°åˆ†é…åˆ° b ä¸ª 0 ä½ç½®ã€çš„æ–¹æ¡ˆä¸­çš„æœ€å°ä»£ä»·é—®é¢˜ã€‚å®¹æ˜“è”æƒ³åˆ°å…¨æ’åˆ—é€‰æ•°çš„æ¯é—®é¢˜ï¼šæ•°å­—çš„ä½æ•°å¯¹åº”è¿™é‡Œçš„ b ä¸ª 0 ä½ç½®ï¼Œæ¯ä¸ªä½ç½®å¯ä»¥å¡«çš„æ•°å¯¹åº”è¿™é‡Œçš„ç”¨å“ªä¸ª a æ¥å¡«ã€‚åŒºåˆ«åœ¨äºï¼š0 çš„ä½ç½®é¡ºåºä¸æ˜¯å›ºå®šçš„ï¼Œç”¨å“ªä¸ª a æ¥å¡«çš„é¡ºåºä¹Ÿä¸æ˜¯å›ºå®šçš„ã€‚è¿™ä¸å…¨æ’åˆ—æ•°ä¸­ï¼šè¢«å¡«çš„ä½ç½®é¡ºåºæ˜¯å›ºå®šçš„ï¼Œç”¨å“ªä¸ªæ•°æ¥å¡«ä¸æ˜¯å›ºå®šçš„ï¼Œæœ‰æ‰€åŒºåˆ«ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥å…¨æ’åˆ—æšä¸¾æ¯ä¸€ä¸ªä½ç½®ï¼Œåœ¨æ­¤åŸºç¡€ä¹‹ä¸Šå†å…¨æ’åˆ—æšä¸¾æ¯ä¸€ä¸ªä½ç½®ä¸Šå¯é€‰çš„ a è¿›è¡Œå¡«å……ã€‚å¯ä»¥ç†è§£ä¸ºå…¨æ’åˆ—çš„åµŒå¥—ã€‚é‚£ä¹ˆæœ€ç»ˆé€’å½’æ ‘çš„æ·±åº¦å°±æ˜¯ 0 çš„ä¸ªæ•°ï¼Œé€’å½’æ—¶å†ç”¨ä¸€ä¸ªå‚æ•°è®°å½•æ¯ä¸€ä¸ªé€‰æ•°åˆ†æ”¯å¯¹åº”çš„ä»£ä»·å³å¯ã€‚
> - æ—¶é—´å¤æ‚åº¦ï¼š$O(9\times 9!)$
>
> æ€è·¯äºŒï¼šåº“å‡½æ•°å…¨æ’åˆ—
>
> - æ€è·¯ï¼šç”±äºæ–¹é˜µçš„æ€»å’Œä¸º 9ï¼Œå› æ­¤ >1 çš„ä½ç½®ä¸Šå‡å» 1 å‰©ä¸‹çš„æ•°å€¼ä¹‹å’Œä¸€å®šç­‰äºæ–¹é˜µä¸­ 0 çš„ä¸ªæ•°ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥å°†å‰è€…å±•å¼€ä¸ºå’Œ 0 ç›¸åŒå¤§å°çš„å‘é‡ï¼Œå¹¶å…¨æ’åˆ—æšä¸¾ä»»æ„ä¸€è€…è¿›è¡Œä¸¤è€…çš„åŒ¹é…è®¡ç®—ï¼Œç»´æŠ¤å…¶ä¸­çš„æœ€å°ä»£ä»·å³æ˜¯ç­”æ¡ˆã€‚
>     - C++ çš„å…¨æ’åˆ—æšä¸¾åº“å‡½æ•°ä¸º `std::next_permutation(ItFirst, ItEnd)`
>     - Python çš„å…¨æ’åˆ—æšä¸¾åº“å‡½æ•°ä¸º `itertools.permutations(Iterable)`
> - æ—¶é—´å¤æ‚åº¦ï¼š$O(9\times 9!)$

```cpp []
class Solution {
public:
    int minimumMoves(vector<vector<int>>& g) {
        vector<pair<int, int>> z, a;
        for (int i = 0; i < 3; i++) {
            for (int j = 0; j < 3; j++) {
                if (!g[i][j]) {
                    z.push_back({i, j});
                } else if (g[i][j] > 1) {
                    a.push_back({i, j});
                }
            }
        }

        int res = INT_MAX, n = z.size();
        vector<bool> vis(n);

        auto dfs = [&](auto&& dfs, int dep, int t) -> void {
            if (dep == n) {
                res = min(res, t);
                return;
            }

            for (int i = 0; i < n; i++) {
                if (vis[i]) continue;
                vis[i] = true;
                for (auto& [x, y]: a) {
                    if (g[x][y] <= 1) continue;
                    g[x][y]--;
                    dfs(dfs, dep + 1, t + abs(z[i].first - x) + abs(z[i].second - y));
                    g[x][y]++;
                }
                vis[i] = false;
            }
        };
        
        dfs(dfs, 0, 0);

        return res;
    }
};
```

```cpp [C++åº“å‡½æ•°]
class Solution {
public:
    int minimumMoves(vector<vector<int>>& g) {
        vector<pair<int, int>> z, a;
        for (int i = 0; i < 3; i++) {
            for (int j = 0; j < 3; j++) {
                if (!g[i][j]) {
                    z.push_back({i, j});
                } else {
                    while (g[i][j] > 1) {
                        a.push_back({i, j});
                        g[i][j]--;
                    }
                }
            }
        }

        int res = INT_MAX;
        do {
            int t = 0;
            for (int i = 0; i < z.size(); i++) {
                t += abs(a[i].first - z[i].first) + abs(a[i].second - z[i].second);
            }
            res = min(res, t);
        } while (next_permutation(a.begin(), a.end()));

        return res;
    }
};
```

```python []
class Solution:
    def minimumMoves(self, g: List[List[int]]) -> int:
        a, z = [], []
        for i in range(3):
            for j in range(3):
                if not g[i][j]:
                    z.append((i, j))
                elif g[i][j] > 1:
                    a.append((i, j))

        res = 1000
        n = len(z)
        vis = [False] * n
        
        def dfs(dep: int, t: int) -> None:
            nonlocal res
            if dep == n:
                res = min(res, t)
                return
            for i in range(n):
                if vis[i]: continue
                vis[i] = True
                for x, y in a:
                    if g[x][y] <= 1: continue
                    g[x][y] -= 1
                    dfs(dep + 1, t + abs(z[i][0] - x) + abs(z[i][1] - y))
                    g[x][y] += 1
                vis[i] = False

        dfs(0, 0)
        
        return res
```

```python [Pythonåº“å‡½æ•°]
class Solution:
    def minimumMoves(self, g: List[List[int]]) -> int:
        from itertools import permutations
        a, z = [], []
        for i in range(3):
            for j in range(3):
                if not g[i][j]:
                    z.append((i, j))
                while g[i][j] > 1:
                    a.append((i, j))
                    g[i][j] -= 1
        
        res, n = 1000, len(a)
        for p in permutations(a):
            t = 0
            for i in range(n):
                t += abs(p[i][0] - z[i][0]) + abs(p[i][1] - z[i][1])
            res = min(res, t)

        return res
```

## åˆ†æ²»

å°†å¤§é—®é¢˜è½¬åŒ–ä¸ºç­‰ä»·å°é—®é¢˜è¿›è¡Œæ±‚è§£ã€‚

### ã€åˆ†æ²»ã€‘éšæœºæ’åˆ—

<https://www.acwing.com/problem/content/5469/>

> é¢˜æ„ï¼šç»™å®šä¸€ä¸ª n ä¸ªæ•°çš„å…¨æ’åˆ—åºåˆ—ï¼Œå¹¶å°†å…¶è¿›è¡Œä¸€å®šçš„å¯¹æ¢ï¼Œé—®æ˜¯å¯¹æ¢äº† 3n æ¬¡è¿˜æ˜¯ 7n+1 æ¬¡
>
> æ€è·¯ï¼šå¯ä»¥å‘ç°å¯¹äºä¸¤ç§æƒ…å†µï¼Œå°±å¯¹åº”å¯¹æ¢æ¬¡æ•°çš„å¥‡å¶æ€§ã€‚å½“ n ä¸ºå¥‡æ•°ï¼š3n ä¸ºå¥‡æ•°ï¼Œ7n+1 ä¸ºå¶æ•°ï¼›å½“ n ä¸ºå¶æ•°ï¼š3n ä¸ºå¶æ•°ï¼Œ7n+1 ä¸ºå¥‡æ•°ã€‚æ•…æˆ‘ä»¬åªéœ€è¦åˆ¤æ–­åºåˆ—çš„é€†åºæ•°å³å¯ã€‚ä¸ºäº†æ±‚è§£é€†åºæ•°ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨å½’å¹¶æ’åºçš„ combine è¿‡ç¨‹è¿›è¡Œç»Ÿè®¡å³å¯
>
> æ—¶é—´å¤æ‚åº¦ï¼š$O(n \log n)$

```cpp
#include <bits/stdc++.h>
#define int long long
using namespace std;

const int N = 1000010;

int n, a[N], t[N];
int cnt; // é€†åºæ•° 

void MergeSort(int l, int r) {
	if (l >= r) return;
	
	int mid = (l + r) >> 1;
	
	MergeSort(l, mid), MergeSort(mid + 1, r);
	
	int i = l, j = mid + 1, idx = 0;
	
	while (i <= mid && j <= r) {
		if (a[i] < a[j]) t[idx++] = a[i++];
		else {
			cnt += mid - i + 1;
			t[idx++] = a[j++];
		}
	}
	
	while (i <= mid) t[idx++] = a[i++];
	while (j <= r) t[idx++] = a[j++];
	
	for (i = l, idx = 0; i <= r; i++, idx++) a[i] = t[idx];
}

void solve() {
	cin >> n;
	
	for (int i = 0; i < n; i++) cin >> a[i];
	
	MergeSort(0, n - 1);
	
	int res;
	
	if (n % 2 == 1) {
		if (cnt % 2) res = 1;
		else res = 2;
	} else {
		if (cnt % 2) res = 2;
		else res = 1;
	}
	
	cout << res << "\n"; 
}

signed main() {
	ios::sync_with_stdio(false);
	cin.tie(nullptr), cout.tie(nullptr);
	int T = 1;
//	cin >> T;
	while (T--) solve();
	return 0;
}
```

## åè®°

æ•°å­¦é¢˜ï¼šæ²¡æ€è·¯å°±æ‰“è¡¨æ‰¾è§„å¾‹

ç½‘æ ¼å›¾ï¼šä¸èƒ½DPçš„è€ƒè™‘å“ˆå¸Œï¼ˆæ³¨æ„ç½‘æ ¼å›¾çš„æˆªè·ç”¨æ³•ï¼‰

å¤šå…³é”®å­—æ’åºï¼šä½¿ç”¨å…ƒç»„ä½œä¸º lambda çš„å‚æ•°

æœªçŸ¥è¡Œæ•°çš„æ•°æ®è¯»å…¥ï¼šç”¨ try except EOFError

DPï¼šåˆå§‹åŒ–è¦è€ƒè™‘å‘¨å…¨

è´ªå¿ƒï¼šå–„ç”¨æšä¸¾ï¼Œå¯ä»¥ä»ä¸€ä¸¤ä¸ªå…ƒç´ å¼€å§‹è€ƒè™‘