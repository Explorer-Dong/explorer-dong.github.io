---
title: åŸºç¡€ç®—æ³•ä¾‹é¢˜ç²¾è®²
---

## å‰è¨€

æœ¬æ–‡ç²¾é€‰ä¸€äº›ã€ŒåŸºç¡€ç®—æ³•ã€çš„ä¾‹é¢˜å¹¶è¿›è¡Œè¯¦ç»†çš„åŸç†è®²è§£ä¸ä»£ç å®ç°ã€‚ç®—æ³•æ ‡ç­¾ä¸»è¦æ˜¯ã€Œè´ªå¿ƒã€å‰ç¼€å’Œä¸å·®åˆ†ã€äºŒåˆ†ã€é€’å½’ã€ã€‚é¢˜ç›®æ¥æºä¸»è¦æ˜¯ Codeforcesã€æ´›è°·ã€LeetCodeã€‚

ä¸€äº›åšé¢˜å°æŠ€å·§ï¼š

- è´ªå¿ƒï¼šå–„ç”¨æšä¸¾ï¼Œå¯ä»¥ä»ä¸€ä¸¤ä¸ªå…ƒç´ å¼€å§‹è€ƒè™‘ï¼›
- å‰ç¼€å’Œä¸å·®åˆ†ï¼šé‡åˆ°åŒºé—´ä¿®æ”¹æ“ä½œæ—¶ï¼Œåº”è¯¥ç«‹å³æƒ³åˆ°å…¶ç­‰ä»·äºå¯¹å·®åˆ†æ•°ç»„åšç«¯ç‚¹ä¿®æ”¹æ“ä½œï¼›
- äºŒåˆ†ï¼šå½“æŒ‰ç…§é¢˜æ„è¿›è¡Œæ­£é¢æ¨¡æ‹Ÿå‘ç°éš¾ä»¥å®ç°æˆ–è€…å¤æ‚åº¦è¿‡é«˜æ—¶ï¼Œå¯ä»¥è§‚å¯Ÿå˜é‡ä¹‹é—´æ˜¯å¦æœ‰å•è°ƒæ€§å…³ç³»ï¼›
- é€’å½’ï¼šæœç´¢ç±»é¢˜ç›®ï¼Œè„‘å­é‡Œå§‹ç»ˆæœ‰ä¸€ä¸ªæœç´¢æ ‘ï¼Œæ— è®ºæ˜¯å…·è±¡åŒ–çš„æ ‘çš„é¢˜ï¼Œè¿˜æ˜¯å¯ä»¥æŠ½è±¡ä¸ºæ ‘çš„æœç´¢é¢˜ï¼›åˆ†æ²»ç±»é¢˜ç›®ï¼Œæ€è€ƒèƒ½ä¸èƒ½å…ˆè§£å†³å­é—®é¢˜ï¼Œç„¶ååˆ©ç”¨è§£å†³å¥½çš„æ‰€æœ‰å­é—®é¢˜æ¥è§£å†³å½“å‰å±€é¢çš„é—®é¢˜ã€‚

ä¸ºäº†æå‡é˜…è¯»æ•ˆç‡ï¼Œæˆ‘å°†é¢˜ç›®çš„é‡è¦å…ƒä¿¡æ¯å•ç‹¬ç½—åˆ—ä¸ºäº†ä¸€å¼ è¡¨æ ¼ï¼Œå¯ä»¥æŒ‰ç…§è‡ªå·±çš„å®é™…éœ€æ±‚æŒ‰éœ€è·³è½¬é˜…è¯»ã€‚

| æ ‡ç­¾ ğŸ· |  éš¾åº¦ ğŸ”¥  |                     é“¾æ¥ ğŸ”—                     |     é”šç‚¹ âš“     | å¤‡æ³¨ â­ |
| :--: | :----: | :---------------------------------------------: | :----------: | :--: |
| è´ªå¿ƒ | CF 800 | [CF](https://codeforces.com/contest/1873/problem/B) | [Good Kid](#good-kid) | / |
| è´ªå¿ƒã€åˆ†è®¨ | CF 1500 | [CF](https://codeforces.com/contest/1873/problem/G) | [ABBC or BACB](#abbc-or-bacb) | / |
| è´ªå¿ƒã€å † | CF 1200 * | [è“æ¡¥](https://www.lanqiao.cn/problems/5889/learning/?contest_id=145) | [é€šå…³](#é€šå…³) | / |
| è´ªå¿ƒã€æ ‘ã€æœ€çŸ­è·¯ | CF 1400 * | [è“æ¡¥](https://www.lanqiao.cn/problems/5890/learning/?contest_id=145) | [ä¸²é—¨](#ä¸²é—¨) | æ ‘çš„ç›´å¾„ |
| è´ªå¿ƒ | CF 1200 * | [Vijos](https://vijos.org/d/nnu_contest/p/1532) | [Codeforces rating](#codeforces-rating) | ç›¸é‚»äº¤æ¢éªŒè¯æœ€ä¼˜ |
| è´ªå¿ƒã€é€’æ¨ | æ´›è°· é»„ | [æ´›è°·](https://www.luogu.com.cn/problem/P5019) | [é“ºè®¾é“è·¯](#é“ºè®¾é“è·¯) | ä»è¾¹ç•Œå¼€å§‹è€ƒè™‘ |
| è´ªå¿ƒã€æšä¸¾ | CF 1300 * | [AcWing](https://www.acwing.com/problem/content/5483/) | [æˆªæ–­æ•°ç»„](#æˆªæ–­æ•°ç»„) | å‰ç¼€å’Œæ€§è´¨æ¨å¹¿ |
| è´ªå¿ƒã€æ„é€  | CF 1300 * | [åŠ›æ‰£](https://leetcode.cn/problems/maximum-binary-string-after-change/description/) | [ä¿®æ”¹åçš„æœ€å¤§äºŒè¿›åˆ¶å­—ç¬¦ä¸²](#ä¿®æ”¹åçš„æœ€å¤§äºŒè¿›åˆ¶å­—ç¬¦ä¸²) | / |
| è´ªå¿ƒ | CF 1800 * | [åŠ›æ‰£](https://leetcode.cn/problems/maximum-elegance-of-a-k-length-subsequence/) | [å­åºåˆ—æœ€å¤§ä¼˜é›…åº¦](#å­åºåˆ—æœ€å¤§ä¼˜é›…åº¦) | åæ‚”è´ªå¿ƒ |
| è´ªå¿ƒã€ä½è¿ç®—ã€åˆ†è®¨ | æ´›è°· ç»¿ | [æ´›è°·](https://www.luogu.com.cn/problem/P2114) | [èµ·åºŠå›°éš¾ç»¼åˆç—‡](#èµ·åºŠå›°éš¾ç»¼åˆç—‡) | æŒ‰ä½è´ªå¿ƒ |
| å·®åˆ† | CF 1500 * | [AcWing](https://www.acwing.com/problem/content/description/102/) | [å¢å‡åºåˆ—](#å¢å‡åºåˆ—) | / |
| äºŒåˆ† | æ´›è°· é»„ | [æ´›è°·](https://www.luogu.com.cn/problem/P2440) | [æœ¨æåŠ å·¥](#æœ¨æåŠ å·¥) | / |
| äºŒåˆ†ã€å‰ç¼€å’Œã€åŒæŒ‡é’ˆ | CF 1300 * | [AcWing](https://www.acwing.com/problem/content/5562/) | [æ‘†æ”¾æ£‹å­](#æ‘†æ”¾æ£‹å­) | / |
| äºŒåˆ†ã€è´ªå¿ƒ | CF 1400 * | [AcWing](https://www.acwing.com/problem/content/description/5569/) | [ç›–æ¥¼](#ç›–æ¥¼) | åˆ©ç”¨é›†åˆç®€åŒ–é—®é¢˜ |
| äºŒåˆ†ã€åŒæŒ‡é’ˆã€å“ˆå¸Œ | CF 1700 * | [åŠ›æ‰£](https://leetcode.cn/problems/find-the-median-of-the-uniqueness-array/) | [æ‰¾å‡ºå”¯ä¸€æ€§æ•°ç»„çš„ä¸­ä½æ•°](#æ‰¾å‡ºå”¯ä¸€æ€§æ•°ç»„çš„ä¸­ä½æ•°) | æšä¸¾å³ç»´æŠ¤å·¦ |
| äºŒåˆ† | CF 1900 | [CF](https://codeforces.com/contest/1996/problem/F) | [bomb](#bomb) | è·³è„±äºŒåˆ†ç­”æ¡ˆæ€ç»´å®šåŠ¿ |
| äºŒåˆ†ã€å›¾è®º | æ´›è°· ç»¿ | [æ´›è°·](https://www.luogu.com.cn/problem/P1525) | [å…³æŠ¼ç½ªçŠ¯](#å…³æŠ¼ç½ªçŠ¯) | / |
| æœç´¢ | CF 1000 * | [AcWing](https://www.acwing.com/problem/content/5150/) | [æ•°é‡](#æ•°é‡) | / |
| æœç´¢ã€ç»„åˆæ•°ã€å‰ªæ | CF 1200 * | [åŠ›æ‰£](https://leetcode.cn/problems/combination-sum/) | [ç»„åˆæ€»å’Œ](#ç»„åˆæ€»å’Œ) | ç»„åˆæ•°æ¿å­é¢˜ |
| æœç´¢ | CF 1500 * | [AcWing](https://www.acwing.com/problem/content/5284/) | [æ‰©å±•å­—ç¬¦ä¸²](#æ‰©å±•å­—ç¬¦ä¸²) | è®¾ç½®ä¸Šé™ trick |
| æœç´¢ã€å¹¶æŸ¥é›† | æ´›è°· é»„ | [æ´›è°·](https://www.luogu.com.cn/problem/P1141) | [01 è¿·å®«](#01-è¿·å®«) | è¿é€šåˆ†é‡æ¿å­é¢˜ |
| æœç´¢ã€æ’åˆ—æ•° | CF 1400 * | [åŠ›æ‰£](https://leetcode.cn/problems/minimum-moves-to-spread-stones-over-grid/) | [å°†çŸ³å¤´åˆ†æ•£çš„æœ€å°‘ç§»åŠ¨æ¬¡æ•°](#å°†çŸ³å¤´åˆ†æ•£çš„æœ€å°‘ç§»åŠ¨æ¬¡æ•°) | æ’åˆ—æ•°æ¿å­é¢˜ |
| åˆ†æ²»ã€åŒä½™ | CF 1400 * | [AcWing](https://www.acwing.com/problem/content/5469/) | [éšæœºæ’åˆ—](#éšæœºæ’åˆ—) | é€†åºæ•°æ¿å­é¢˜ |

/// caption | <
åŸºç¡€ç®—æ³•ä¾‹é¢˜å¯¼è¯»è¡¨ï¼ˆæ‰“ * è¡¨ç¤ºè‡ªå·±é¢„ä¼°çš„éš¾åº¦ï¼‰
///

## Good Kid

é¢˜æ„ï¼šç»™å®šä¸€ä¸ªå«æœ‰ $n\ (1\le n \le 9)$ ä¸ªæ•°çš„æ•°åˆ—ï¼Œç°åœ¨å¯ä»¥é€‰æ‹©å…¶ä¸­çš„ä»»æ„ä¸€ä¸ªæ•°ä½¿å…¶ $+1$ã€‚é—®å¦‚ä½•é€‰æ‹©è¿™ä¸ªæ•°ï¼Œå¯ä»¥ä½¿å¾—ä¿®æ”¹åçš„æ•°åˆ—ä¸­çš„æ‰€æœ‰æ•°ä¹‹ç§¯çš„å€¼æœ€å¤§ã€‚è¾“å‡ºè¿™ä¸ªæœ€å¤§å€¼ã€‚

æ€è·¯ï¼šæ— è®ºé€‰æ‹©å“ªä¸ªæ•° $+1$ï¼Œå…¶å®å°±æ˜¯é€‰æ‹© $n-1$ ä¸ªæ•°çš„ä¹˜ç§¯å¢åŠ ä¸€å€ã€‚ä¸ºäº†æœ€å¤§åŒ–ç»“æœï¼Œé‚£è‡ªç„¶å°±æ˜¯é€‰æ‹©æœ€å¤§çš„ $n-1$ ä¸ªæ•°ä½¿å…¶ä¹˜ç§¯ç¿»å€ï¼Œé‚£ä¹ˆå°±æ˜¯é€‰æ‹©æ•°åˆ—ä¸­çš„æœ€å°å€¼ä½¿å…¶ $+1$ å³å¯ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$

=== "C"

    ```c
    #include <stdio.h>
    #include <stdlib.h>
    
    void solve() {
        int n;
        scanf("%d", &n);
    
        int *a = (int*)malloc(n * sizeof(int));
        for (int i = 0; i < n; i++) {
            scanf("%d", &a[i]);
        }
    
        int min_index = 0;
        for (int i = 1; i < n; i++) {
            if (a[i] < a[min_index]) {
                min_index = i;
            }
        }
    
        a[min_index] += 1;
        
        int ans = 1;
        for (int i = 0; i < n; i++) {
            ans *= a[i];
        }
    
        printf("%d\n", ans);
    
        free(a);
    }
    
    int main() {
        int T;
        scanf("%d", &T);
        while (T--) {
            solve();
        }
    }
    ```

=== "C++"

    ```c++
    #include <iostream>
    #include <vector>
    
    void solve() {
        int n;
        std::cin >> n;
        std::vector<int> a(n);
        for (int i = 0; i < n; i++) {
            std::cin >> a[i];
        }
    
        int min_index = 0;
        for (int i = 1; i < n; i++) {
            if (a[i] < a[min_index]) {
                min_index = i;
            }
        }
    
        a[min_index] += 1;
    
        int ans = 1;
        for (int i = 0; i < n; i++) {
            ans *= a[i];
        }
        
        std::cout << ans << "\n";
    }
    
    int main() {
        std::ios::sync_with_stdio(0);
        std::cin.tie(0);
    
        int T;
        std::cin >> T;
        while (T--) {
            solve();
        }
    }
    ```

=== "Java"

    ```java
    import java.util.Scanner;
    import java.util.ArrayList;
    
    public class Main {
        public static void main(String[] args) {
            Scanner sc = new Scanner(System.in);
            int T = sc.nextInt();
            while (T-- > 0) {
                solve(sc);
            }
            sc.close();
        }
    
        public static void solve(Scanner sc) {
            int n = sc.nextInt();
            ArrayList<Integer> a = new ArrayList<>(n);
            for (int i = 0; i < n; i++) {
                a.add(sc.nextInt());
            }
    
            int min_index = 0;
            for (int i = 1; i < n; i++) {
                if (a.get(i) < a.get(min_index)) {
                    min_index = i;
                }
            }
    
            a.set(min_index, a.get(min_index) + 1);
    
            int ans = 1;
            for (int i = 0; i < n; i++) {
                ans *= a.get(i);
            }
    
            System.out.println(ans);
        }
    }
    ```

=== "Python"

    ```python
    T = int(input())
    for _ in range(T):
        n = int(input())
        a = list(map(int, input().split()))
    
        a[a.index(min(a))] += 1
    
        ans = 1
        for num in a:
            ans *= num
        print(ans)
    ```

=== "JavaScript"

    ```javascript
    const readline = require('readline');
    const rl = readline.createInterface({
        input: process.stdin,
        output: process.stdout
    });
    
    let inputs = []
    let idx = 0;
    
    rl.on('line', (line_data) => {
        inputs.push(line_data);
    });
    
    rl.on('close', () => {
        let T = inputs[idx++];
        while (T--) {
            solve();
        }
    });
    
    function solve() {
        let n = inputs[idx++];
        let a = inputs[idx++].split(' ').map(Number);
    
        const min_index = a.indexOf(Math.min(...a));
        a[min_index] += 1;
    
        let ans = 1;
        for (const num of a) {
            ans *= num;
        }
    
        console.log('%d', ans);
    }
    ```

## ABBC or BACB

é¢˜æ„ï¼šç°åœ¨æœ‰ä¸€ä¸ªç”± A å’Œ B ä¸¤ç§å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸² $s\ (1\le|s|\le2\cdot 10^5)$ã€‚æ“ä½œä¸€ï¼Œå¯ä»¥å°† AB è½¬åŒ–ä¸º BCï¼›æ“ä½œäºŒï¼Œå¯ä»¥å°† BA è½¬åŒ–ä¸º CBã€‚é—®æœ€å¤šå¯ä»¥æ‰§è¡Œä¸Šè¿°æ“ä½œå¤šå°‘æ¬¡ã€‚ç»™å‡ºæœ€å¤šæ“ä½œæ¬¡æ•°ã€‚

æ€è·¯ï¼š

- ä»é¢˜é¢å¯ä»¥çœ‹å‡ºï¼Œæœ¬é¢˜çš„ä¸¤ç§æ“ä½œéƒ½å¯ä»¥çœ‹åšæ˜¯å¯¹ B å­—ç¬¦çš„ç§»åŠ¨ï¼Œæ“ä½œä¸€æ˜¯å‘å·¦ç§»åŠ¨ï¼Œæ“ä½œäºŒæ˜¯å‘å³ç§»åŠ¨ï¼Œå¹¶ä¸”åªèƒ½å•æ–¹å‘ç§»åŠ¨ã€‚æœ‰äº†è¿™ä¸ªæ€§è´¨ï¼Œé¢˜ç›®å°±è½¬åŒ–ä¸ºäº†æ€ä¹ˆé€‰æ‹©æ¯ä¸€ä¸ª B å­—ç¬¦çš„ç§»åŠ¨æ–¹å‘å¯ä»¥å°½å¯èƒ½å¤šçš„ç»è¿‡ A å­—ç¬¦ï¼›
- ä¸éš¾å‘ç°ï¼Œå¦‚æœå­—ç¬¦ä¸²çš„è¾¹ç¼˜æœ‰ B å­—ç¬¦æˆ–è€…æœ‰è‡³å°‘ä¸¤ä¸ªè¿ç»­çš„ B å­—ç¬¦ï¼Œå°±ä¸€å®šå¯ä»¥å°†æ‰€æœ‰çš„ A å­—ç¬¦éƒ½ç»è¿‡ã€‚åä¹‹ï¼Œå°±æ˜¯å•ç‹¬çš„ B å­—ç¬¦å°†ä¸€ä¸ªå®Œæ•´çš„ A ä¸²åˆ‡å‰²å¼€æ¥çš„æƒ…æ™¯ï¼ˆç‰¹åˆ¤æ²¡æœ‰ B å­—ç¬¦åˆ‡å‰² A å­—ç¬¦çš„æƒ…å†µï¼‰ï¼Œæ­¤æ—¶å°±æ˜¯å°å­¦å­¦åˆ°çš„çº¿æ®µæ¨¡å‹ã€‚ç”±äºçº¿æ®µä¸€å®šæ¯”ç«¯ç‚¹å¤šä¸€ä»½ï¼Œä¸ºäº†æœ€å¤§åŒ–ç»è¿‡çš„ A å­—ç¬¦æ•°é‡ï¼Œé€‰æ‹©é•¿åº¦æœ€çŸ­çš„ A å­ä¸²ä¸ç»è¿‡å³å¯ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$

=== "Python"

    ```python
    T = int(input())
    for _ in range(T):
        s = input()
        if s.count('BB') or s[0] == 'B' or s[-1] == 'B':
            print(s.count('A'))
        elif s.count('A') == len(s):
            print(0)
        else:
            ans = s.count('A')
            sub_length = len(s)  # æœ€çŸ­ A ä¸²é•¿åº¦
            i = 0
            while i < len(s):
                if s[i] == 'A':
                    j = i
                    while j < len(s) and s[j] == 'A':
                        j += 1
                    sub_length = min(sub_length, j - i)
                    i = j
                else:
                    i += 1
            ans -= sub_length
            print(ans)
    ```

## é€šå…³

é¢˜æ„ï¼šç»™å®šä¸€æ£µå«æœ‰ $n$ ä¸ªç»“ç‚¹çš„æ ‘å’Œä¸€ä¸ªåˆå§‹ä»·å€¼ï¼Œæ ‘ä¸­æ¯ä¸ªç»“ç‚¹ä»£è¡¨ä¸€ä¸ªå…³å¡ï¼Œæ¯ä¸ªå…³å¡æœ‰ã€Œé€šè¿‡æœ€ä½éœ€æ±‚ä»·å€¼ã€å’Œã€Œé€šè¿‡å¥–åŠ±ä»·å€¼ã€ä¸¤ä¸ªå±æ€§ã€‚åªæœ‰é€šè¿‡äº†çˆ¶ç»“ç‚¹å…³å¡æ‰èƒ½ç»§ç»­æŒ‘æˆ˜å­ç»“ç‚¹å…³å¡ã€‚ç°åœ¨ä»æ ¹ç»“ç‚¹å¼€å§‹å°è¯•é€šå…³ï¼Œé—®åº”è¯¥å¦‚ä½•é€‰æ‹©é€šå…³é¡ºåºä½¿å¾—é€šè¿‡çš„å…³å¡æ•°æœ€å¤šï¼Ÿç»™å‡ºæœ€å¤šé€šå…³çš„å…³å¡æ•°ã€‚

æ€è·¯ï¼šæˆ‘ä»¬æ¯æ¬¡è´ªå¿ƒåœ°é€‰æ‹©éœ€æ±‚ä»·å€¼æœ€å°çš„å…³å¡è¿›è¡Œé—¯å…³å³å¯ã€‚å¯ä»¥é€šè¿‡äºŒå‰å †æ•°æ®ç»“æ„æ¥å®ç°ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(n \log n)$

=== "Python"

    ```python
    from heapq import *
    
    n, have = tuple(map(int, input().split()))
    g = [[] for _ in range(n + 1)]
    
    for i in range(1, n + 1):
        fa, get, need = tuple(map(int, input().split()))
        g[fa].append((need, -get, i))
    
    ans = 0
    h = [g[0][0]]
    while len(h):
        need, neg_get, now = heappop(h)
        if have < need:
            break
        have += -neg_get
        ans += 1
        for ch in g[now]:
            heappush(h, ch)
    
    print(ans)
    ```

## ä¸²é—¨

é¢˜æ„ï¼šç»™å®šä¸€æ£µè¾¹æƒä¸ºæ­£çš„æ— å‘æ ‘ï¼Œå…±æœ‰ $n\ (1\le n \le 10^5)$ ä¸ªç»“ç‚¹ã€‚ç»™å‡ºã€Œåœ¨è®¿é—®åˆ°æ ‘ä¸­æ¯ä¸€ä¸ªç»“ç‚¹ã€æƒ…å†µä¸‹çš„æœ€çŸ­è·¯å¾„é•¿åº¦ã€‚

æ€è·¯ï¼š

- ä¸éš¾å‘ç°ä¸€ä¸ªæ€§è´¨ã€‚å¯¹äºè®¿é—®çš„èµ·ç‚¹ä¸ç»ˆç‚¹ï¼Œè·¯å¾„æ€»é•¿åº¦ä¸€å®šæ˜¯ã€Œèµ·ç‚¹åˆ°ç»ˆç‚¹çš„ç®€å•è·¯å¾„é•¿åº¦ã€+ã€Œæ‰€æœ‰åˆ†æ”¯è·¯å¾„é•¿åº¦çš„ä¸¤å€ã€ï¼Œç­‰ä»·äºã€Œæ‰€æœ‰è¾¹ä¹‹å’Œçš„ä¸¤å€ã€-ã€Œèµ·ç‚¹åˆ°ç»ˆç‚¹çš„ç®€å•è·¯å¾„é•¿åº¦ã€ï¼›
- æœ‰äº†ä¸Šè¿°çš„æ€§è´¨ï¼Œä¸ºäº†æœ€å°åŒ–æ€»è·¯å¾„é•¿åº¦ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰¾åˆ°ç®€å•è·ç¦»æœ€é•¿çš„ä¸¤ä¸ªç»“ç‚¹ä½œä¸ºèµ·ç‚¹ä¸ç»ˆç‚¹å³å¯ï¼Œè¿™é‡Œçš„ç®€å•è·¯å¾„å…¶å®å°±æ˜¯ã€Œæ ‘çš„ç›´å¾„ã€ï¼›
- ä¸ºäº†æ±‚è§£æ ‘çš„ç›´å¾„ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ç¡®å®šç›´å¾„çš„ä¸¤ä¸ªç«¯ç‚¹ã€‚å®¹æ˜“è¯æ˜ï¼Œæ¯éå†ä¸€æ¬¡æ ‘å³å¯ç¡®å®šç›´å¾„çš„ä¸€ä¸ªç«¯ç‚¹ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$

=== "Python"

    ```python
    from collections import deque
    
    n = int(input())
    g = [[] for _ in range(n + 1)]
    
    ans = 0
    for _ in range(n - 1):
        u, v, w = tuple(map(int, input().split()))
        g[u].append((v, w))
        g[v].append((u, w))
        ans += w << 1
    
    def bfs(u: int) -> tuple[int, int]:
        dst = [0] * (n + 1)
        vis = [False] * (n + 1)
        q = deque()
        dst[u] = 0
        vis[u] = True
        q.append(u)
        while len(q):
            u = q.popleft()
            for v, w in g[u]:
                if vis[v]:
                    continue
                dst[v] = dst[u] + w
                vis[v] = True
                q.append(v)
        max_d = max(dst)
        max_i = dst.index(max_d)
        return max_d, max_i
    
    _, max_i = bfs(1)
    max_d, _ = bfs(max_i)
    
    print(ans - max_d)
    ```

## Codeforces rating

é¢˜æ„ï¼šç»™å®šä¸€ä¸ªå«æœ‰ $n\ (1 \le n \le 10^5)$ ä¸ªæ•°çš„æ•°åˆ— $P$ å’Œä¸€ä¸ªåˆå§‹å€¼ $R$ã€‚ç°åœ¨å¯ä»¥é€‰æ‹©æ•°åˆ—ä¸­ä»»æ„æ•°é‡ä¸ªå…ƒç´ å¹¶å¯¹ $R$ æ‰§è¡Œ $R'\leftarrow \dfrac{3}{4} R + \dfrac{1}{4} P$ çš„å˜æ¢ã€‚ç»™å‡ºè¿ç®—åçš„æœ€å¤§ $R$ å€¼ã€‚

æ€è·¯ï¼šæ’é˜Ÿæ‰“æ°´ç»å…¸ä¾‹é¢˜ã€‚æˆ‘ä»¬å°†æ•°åˆ—å‡åºæ’åºåéå†æ¨¡æ‹Ÿå³å¯ã€‚è‡³äºä¸ºä»€ä¹ˆè¿™æ ·è´ªå¿ƒæœ€ä¼˜ï¼Œå¯ä»¥ä½¿ç”¨äº¤æ¢æ³•ç»“åˆå½’çº³æ³•è¿›è¡Œè¯æ˜ã€‚å…·ä½“åœ°ï¼Œä¸ºäº†è®© $R$ å˜å¤§ï¼Œé€‰æ‹©çš„å…ƒç´ ä¸€å®šè¦æ¯” $R$ å¤§ã€‚å¦‚æœä»…æœ‰ä¸¤ä¸ªæ¯” $R$ å¤§çš„å…ƒç´  $P_i$ å’Œ $P_j$ï¼Œå‡è®¾å¯ä»¥ç»è¿‡ä¸¤æ­¥è¿ç®—ï¼š

$$
\begin{aligned}
R'&=\frac{3}{4}R+\frac{1}{4}P_i \\
R''&=\frac{3}{4}R'+\frac{1}{4}P_j \\
&=\frac{9}{16}R+\frac{3}{16}P_i+\frac{1}{4}P_j
\end{aligned}
$$

å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªå…ƒç´ å¯¹äºä¸¤æ¬¡æ“ä½œåå¾—åˆ°çš„ $R''$ è´¡çŒ®æ˜¯ä¸ä¸€æ ·çš„ï¼Œæˆ‘ä»¬å½“ç„¶å¸Œæœ›æ›´å¤§å€¼å¯¹åº”çš„è´¡çŒ®ç³»æ•°æ›´å¤§ï¼Œä¹Ÿå°±æ˜¯è¯´ $P_j$ çš„å€¼åº”è¯¥å¤§äº $P_i$ã€‚æ¨è€Œå¹¿ä¹‹ï¼Œå®¹æ˜“å‘ç°å¯¹äºæ‰€æœ‰èƒ½å¤Ÿè´¡çŒ®ç»™ $R$ çš„ $P$ å…ƒç´ ï¼Œè¶Šæ™šè´¡çŒ®çš„å€¼å¯¹åº”çš„ã€Œè´¡çŒ®ç³»æ•°ã€æ˜¯é€’å¢çš„ï¼Œå› æ­¤æˆ‘ä»¬åœ¨é€‰æ‹© $P$ ä¸­å…ƒç´ æ—¶ï¼ŒæŒ‰ç…§ã€Œå€¼çš„é€’å¢ã€é¡ºåºå°±æ˜¯æœ€ä¼˜çš„ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(n\log n)$

=== "C++"

    ```c++
    #include <iostream>
    #include <algorithm>
    #include <cmath>
    #include <vector>
    
    int main() {
        int n;
        double r;
        std::cin >> n >> r;
    
        std::vector<int> a(n);
        for (int i = 0; i < n; i++) {
            std::cin >> a[i];
        }
    
        sort(a.begin(), a.end());
    
        for (auto num: a) {
            if (num > r) {
                r = 0.75 * r + 0.25 * num;
            }
        }
    
        std::cout << std::round(r) << "\n";
    
        return 0;
    }
    ```

=== "Python"

    ```python
    n, r = tuple(map(int, input().split()))
    a = list(map(int, input().split()))
    
    a.sort()
    for num in a:
        if num > r:
            r = r * 0.75 + num * 0.25
    print(round(r))
    ```

## é“ºè®¾é“è·¯

é¢˜æ„ï¼šç»™å®šä¸€ä¸ªå«æœ‰ $n\ (1 \le n \le 10^5)$ ä¸ªæ•°åºåˆ— $a$ï¼Œæ¯æ¬¡æ“ä½œå¯ä»¥è®©åºåˆ—ä¸­ä¸€ä¸ªè¿ç»­åŒºé—´å†…æ‰€æœ‰æ•° $-1$ï¼Œå‰ææ˜¯åŒºé—´ä¸­çš„æ•°éƒ½è¦ $>1$ã€‚è¾“å‡ºå°†æ‰€æœ‰çš„æ•°å…¨éƒ¨éƒ½å‡åˆ° $0$ çš„æœ€å°æ“ä½œæ¬¡æ•°ã€‚

æ€è·¯ï¼šä»ã€Œè¾¹ç•Œã€å¼€å§‹è€ƒè™‘ã€‚å®šä¹‰ $f_i$ è¡¨ç¤ºåºåˆ— $[0,i]$ å…¨éƒ¨å‡åˆ° $0$ çš„æœ€å°æ“ä½œæ¬¡æ•°ï¼Œé‚£ä¹ˆ $f_i$ ä»…ä»…å–å†³äº $f_{i-1}$ ä»¥åŠ $a_i$ å’Œ $a_{i-1}$ çš„å¤§å°å…³ç³»ã€‚ç”¨æ»šåŠ¨å˜é‡æ‰«æä¸€éå³å¯ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$

=== "Python"

    ```python
    n = int(input())
    a = list(map(int, input().split()))
    
    ans = a[0]
    for i in range(1, n):
        ans += max(0, a[i] - a[i - 1])
    
    print(ans)
    ```

## æˆªæ–­æ•°ç»„

é¢˜æ„ï¼šå®šä¹‰ã€Œå¹³è¡¡æ•°ç»„ã€ä¸ºå¥‡å¶å…ƒç´ æ•°é‡ç›¸åŒçš„æ•°ç»„ã€‚ç»™å®šä¸€ä¸ªå«æœ‰ $n\ (1 \le n \le 100)$ ä¸ªæ•°çš„å¹³è¡¡æ•°ç»„ $a$ å’Œæˆªæ–­æ€»æˆæœ¬ï¼Œç°åœ¨éœ€è¦å°†è¯¥æ•°ç»„æˆªæ–­ä¸ºå°½å¯èƒ½å¤šçš„å­å¹³è¡¡æ•°ç»„ï¼Œå®šä¹‰æˆªæ–­ä»£ä»·ä¸º $|a_i-a_{i+1}|$ã€‚ç»™å‡ºæœ€å¤šæˆªæ–­æ“ä½œæ¬¡æ•°ã€‚

æ€è·¯ï¼šæœ¬é¢˜æœ€å…³é”®çš„æ€§è´¨å°±æ˜¯ï¼Œå‡è®¾éƒ½æ˜¯å¹³è¡¡æ•°ç»„ï¼Œé‚£ä¹ˆä¹Ÿä¸€å®šæ˜¯å¹³è¡¡æ•°ç»„ï¼Œå³æˆªæ–­ç‚¹ä¹‹é—´ä¹Ÿä¸€å®šæ˜¯å¹³è¡¡æ•°ç»„ï¼ˆè¿™ä¸å‰ç¼€å’Œæ€§è´¨ç±»ä¼¼ï¼‰ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥æšä¸¾æ‰€æœ‰çš„å¯æˆªæ–­ä½ç½®ï¼Œç„¶åæŒ‰ç…§ä»£ä»·è´ªå¿ƒåœ°å‡åºæšä¸¾å³å¯ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(n \log n)$

=== "Python"

    ```python
    n, B = tuple(map(int, input().split()))
    a = list(map(int, input().split()))
    
    odd_cnt, even_cnt = 0, 0
    cuts = []
    for i in range(n):
        if a[i] & 1:
            odd_cnt += 1
        else:
            even_cnt += 1
        if i < n - 1 and odd_cnt == even_cnt:
            cuts.append(abs(a[i + 1] - a[i]))
    
    cuts.sort()
    ans = 0
    for cut in cuts:
        if cut > B:
            break
        B -= cut
        ans += 1
    
    print(ans)
    ```

## ä¿®æ”¹åçš„æœ€å¤§äºŒè¿›åˆ¶å­—ç¬¦ä¸²

é¢˜æ„ï¼šç»™å®šä¸€ä¸ª 01 å­—ç¬¦ä¸² $s\ (1 \le |s| \le 10^5)$ï¼Œç»™å‡ºä»»æ„æ¬¡ä¸‹åˆ—æ“ä½œåæœ€å¤§å€¼å¯¹åº”çš„å­—ç¬¦ä¸²ã€‚

1. $00 \to 10$
2. $10 \to 01$

æ€è·¯ï¼š

- æ“ä½œäºŒå¯ä»¥çœ‹åšå°† 1 å‘å³ç§»åŠ¨ï¼Œè¿™å¯¹æœ€ç»ˆæ•°å€¼å¤§å°æ— ç›Šã€‚æ“ä½œä¸€å¯ä»¥æå‡æ•°å€¼å¤§å°ï¼Œè¿™æ˜¯æˆ‘ä»¬å¸Œæœ›å¹²çš„ï¼›
- è€ƒè™‘è´ªå¿ƒã€‚æ˜¾ç„¶å¯¹äºå‰ç¼€è¿ç»­çš„ 1 æˆ‘ä»¬æ²¡æ³•æ“ä½œï¼Œä¿ç•™å³å¯ã€‚å¯¹äºä»ç¬¬ä¸€ä¸ª 0 å¼€å§‹çš„å°¾ä¸²ï¼Œæœ€ä½³è´ªå¿ƒç­–ç•¥æ˜¯åˆ©ç”¨æ“ä½œäºŒå°†æ‰€æœ‰çš„ 0 ç§»åŠ¨åˆ°å°¾ä¸²çš„æœ€å‰é¢ï¼Œç„¶åå†ç”¨æ“ä½œä¸€å¾—åˆ°æœ€å¤§å°¾ä¸²ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$

=== "C++"

    ```cpp
    class Solution {
    public:
        string maximumBinaryString(string binary) {
            int n = binary.size();
    
            string res;
    
            // å‰ç¼€1å…¨éƒ¨åŠ å…¥ç­”æ¡ˆ
            int i = 0;
            for (i = 0; i < n; i++) {
                if (binary[i] == '0') {
                    break;
                } else {
                    res += '1';
                }
            }
    
            // éå‰ç¼€1çš„éƒ¨åˆ†ä¸€å®šå¯ä»¥æ“ä½œä¸º 00...011..1ï¼Œè¿›è€Œè½¬åŒ–ä¸º 11...11011...1
            int zero = count(binary.begin() + i, binary.end(), '0');
            if (zero > 0) {
                for (int j = 0; j < zero - 1; j++) res += '1';
                res += '0';
            }
    
            while (res.size() < n) res += '1';
    
            return res;
        }
    };
    ```

=== "Python"

    ```python
    class Solution:
        def maximumBinaryString(self, binary: str) -> str:
            ans = ""
    
            # å‰ç¼€
            for c in binary:
                if c == '0':
                    break
                ans += '1'
    
            # å°¾ä¸²
            cnt0 = binary.count('0')
            if cnt0 in [0, 1]:
                return binary
            ans += '1' * (cnt0 - 1) + '0'
            while len(ans) < len(binary):
                ans += '1'
    
            return ans
    ```

## å­åºåˆ—æœ€å¤§ä¼˜é›…åº¦

é¢˜æ„ï¼šç»™å®šé•¿åº¦ä¸º $n \ (1\le n \le 10^5)$ çš„äºŒå…ƒç»„åºåˆ—ï¼ŒäºŒå…ƒç»„è¡¨ç¤ºæ¯ä¸€ä¸ªå…ƒç´ çš„ä»·å€¼ä¸ç§ç±»ã€‚ç°åœ¨éœ€è¦ä»ä¸­å¯»æ‰¾ä¸€ä¸ªé•¿åº¦ä¸º $k$ çš„å­åºåˆ—ä½¿å¾—è¯¥åºåˆ—ã€Œæ‰€æœ‰ç‰©å“ä»·å€¼ä¹‹å’Œ + ç‰©å“ç§ç±»æ•°çš„å¹³æ–¹ã€çš„å€¼æœ€å¤§ã€‚è¿”å›è¯¥æœ€å¤§å€¼ã€‚

æ€è·¯ï¼šæˆ‘ä»¬é‡‡ç”¨åæ‚”è´ªå¿ƒçš„æ€è·¯ã€‚é¦–å…ˆæŒ‰ç…§ç‰©å“æœ¬èº«ä»·å€¼è¿›è¡Œé™åºæ’åºå¹¶é€‰æ‹©å‰ $k$ ä¸ªç‰©å“ä½œä¸ºé›†åˆ $S$ï¼Œç„¶åæŒ‰é¡ºåºæšä¸¾å‰©ä¸‹çš„ç‰©å“è¿›è¡Œæ›¿æ¢å†³ç­–ã€‚å½“ä¸”ä»…å½“é›†åˆ S æœ‰ç‰©å“çš„ç±»åˆ«é‡å¤ä¸”å‰©ä¸‹ç‰©å“çš„ç±»åˆ«ä¸å­˜åœ¨äºé›†åˆ S ä¸­æ‰æœ‰å¯èƒ½è®©ç­”æ¡ˆæ›´å¤§ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(n \log n)$

=== "Python"

    ```python
    class Solution:
        def findMaximumElegance(self, items: List[List[int]], k: int) -> int:
            n = len(items)
            items.sort(key=lambda x: -x[0])
    
            # è´ªå¿ƒ
            val, cat = 0, 0
            cnt = [0] * (n + 1)
            rep = []
            for i in range(k):
                v, c = items[i]
                val += v
                cat += cnt[c] == 0
                cnt[c] += 1
                if cnt[c] > 1:
                    rep.append(v)
    
            # åæ‚”
            ans = val + cat ** 2
            for i in range(k, n):
                v, c = items[i]
                if cnt[c] == 0 and len(rep):
                    val -= rep.pop()
                    val += v
                    cat += 1
                    cnt[c] += 1
                    ans = max(ans, val + cat ** 2)
    
            return ans
    ```

## èµ·åºŠå›°éš¾ç»¼åˆç—‡

é¢˜æ„ï¼šç»™å®š $n\ (2 \le n \le 10^5)$ ä¸ªæ“ä½œï¼ˆåªå¯èƒ½æ˜¯ã€ŒæŒ‰ä½ä¸ã€æŒ‰ä½æˆ–ã€æŒ‰ä½å¼‚æˆ–ã€ä¸‰ç§ä¹‹ä¸€ï¼‰ä¸æ“ä½œæ•° $t\ (0 \le t \le 10^9)$ï¼Œå†ç»™å®šä¸€ä¸ªèŒƒå›´ä¸Šç•Œ $m\ (2 \le m \le  10^9)$ã€‚ç°åœ¨éœ€è¦é€‰æ‹©ä¸€ä¸ª $[0,m]$ çš„åˆå§‹å€¼ï¼Œä½¿å¾—åˆå§‹å€¼ç»è¿‡è¿™ $n$ æ¬¡äºŒå…ƒè¿ç®—åå¾—åˆ°çš„ç»“æœæœ€å¤§ã€‚è¾“å‡ºæœ€å¤§è¿ç®—ç»“æœã€‚

æ€è·¯ï¼šç”±äºä¸‰ç§æ“ä½œæ˜¯ç›¸é‚»æ— å…³çš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æŒ‰ä½å•ç‹¬è€ƒè™‘ã€‚å¯¹äºç¬¬ $i$ ä½ï¼Œåˆå§‹å€¼ä¸º $0$ æˆ– $1$ åœ¨ç»è¿‡ $n$ æ¬¡è¿ç®—åå‡æœ‰å¯èƒ½å¾—åˆ° $0$ å’Œ $1$ï¼Œå› æ­¤æˆ‘ä»¬æœ‰ $4$ ç§æƒ…å†µéœ€è¦è®¨è®ºï¼Œæ¯ç§æƒ…å†µè´ªå¿ƒåœ°é€‰æ‹©æœ€ä¼˜å³å¯ã€‚è€Œä¸ºäº†è®©ç»“æœæœ€å¤§ï¼Œæˆ‘ä»¬éœ€è¦ä»é«˜ä½å¼€å§‹æšä¸¾ï¼Œå› ä¸ºå½“åˆå§‹å€¼å¡« $1$ æ›´ä¼˜æ—¶ï¼Œå¦‚æœå…ˆå¡«ä½ä½ï¼Œå¯èƒ½ä¼šå¯¼è‡´é«˜ä½å¡«ä¸äº† $1$ ä»è€Œå¾—ä¸åˆ°æœ€å¤§çš„ç­”æ¡ˆå€¼ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$

=== "Python"

    ```python
    n, m = map(int, input().strip().split())
    
    x, y = 0, -1
    for _ in range(n):
        inp = input().strip().split()
        op, t = inp[0], int(inp[1])
        if op == "AND":
            x &= t
            y &= t
        elif op == "OR":
            x |= t
            y |= t
        else:
            x ^= t
            y ^= t
    
    ans, num = 0, 0
    for i in range(30, -1, -1):
        a, b = (x >> i) & 1, (y >> i) & 1
        # ä¸‹åˆ—å››ç§æƒ…å†µå¯ä»¥ç®€åŒ–ï¼Œä¸ºäº†é€»è¾‘æ¸…æ™°æ€§å°±ä¸ç®€åŒ–äº†
        if a and b:
            ans |= 1 << i
        elif a and not b:
            ans |= 1 << i
        elif not a and b:
            if num | (1 << i) <= m:
                num |= 1 << i
                ans |= 1 << i
        else:
            pass
    
    print(ans)
    ```

## å¢å‡åºåˆ—

é¢˜æ„ï¼šç»™å®šä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„æ•°ç»„ï¼Œæ¯æ¬¡å¯ä»¥é€‰æ‹©ä¸€ä¸ªåŒºé—´ $[l,r]$ï¼Œä½¿ä¸‹æ ‡åœ¨è¿™ä¸ªåŒºé—´å†…çš„æ•°éƒ½åŠ ä¸€æˆ–è€…éƒ½å‡ä¸€ã€‚æ±‚è‡³å°‘éœ€è¦å¤šå°‘æ¬¡æ“ä½œæ‰èƒ½ä½¿æ•°ç»„ä¸­çš„æ‰€æœ‰æ•°éƒ½ä¸€æ ·ï¼Œå¹¶æ±‚å‡ºåœ¨ä¿è¯æœ€å°‘æ¬¡æ•°çš„å‰æä¸‹ï¼Œæœ€ç»ˆå¾—åˆ°çš„æ•°ç»„å¯èƒ½æœ‰å¤šå°‘ç§ã€‚

æ€è·¯ï¼š

- åŒºé—´ä¿®æ”¹ä¸å¥½åˆ‡å…¥ï¼Œå°†å…¶è½¬åŒ–ä¸ºå·®åˆ†æ•°ç»„çš„ç«¯ç‚¹ä¿®æ”¹æ“ä½œã€‚è®°åŸæ•°ç»„ä¸º $s$ï¼Œå·®åˆ†æ•°ç»„ä¸º $a$ï¼Œé‚£ä¹ˆã€Œé€šè¿‡åŒºé—´ä¿®æ”¹æ“ä½œè®©æ•°ç»„ä¸­æ‰€æœ‰çš„æ•°éƒ½ä¸€æ ·ã€å°±ç­‰ä»·äºã€Œé€šè¿‡ç«¯ç‚¹ä¿®æ”¹æ“ä½œè®©å·®åˆ†æ•°ç»„ä¸­ä¸‹æ ‡åœ¨ $[1,n-1]$ åŒºé—´çš„å…ƒç´  $a_{1\sim n-1}$ éƒ½ä¸º $0$ï¼Œæ¯æ¬¡æ“ä½œè´ªå¿ƒåœ°é€‰æ‹© $a_{1\sim n-1}$ ä¸­ç¬¦å·ç›¸å¼‚çš„ä¸€å¯¹å…ƒç´ å³å¯ï¼›
- æ˜¾ç„¶åœ¨ç»è¿‡ä¸Šè¿°ç«¯ç‚¹ä¿®æ”¹æ“ä½œåå·®åˆ†æ•°ç»„ $a_{1\sim n-1}$ ä¸ä¸€å®šæ°å¥½å…¨ä¸º $0$ï¼Œå¯èƒ½ä¼šå‡ºç°æŸä¸ªæ•°ä¸ä¸º $0$ çš„æƒ…å†µï¼Œè®°ä½œ $a_i$ã€‚æ­¤æ—¶åŸæ•°ç»„ $s$ å‘ˆç°çš„å¤§å°å…³ç³»å°±æ˜¯ $s_{0\sim i-1}$ å…¨éƒ¨ç›¸ç­‰ï¼Œ$s_{i\sim n-1}$ å…¨éƒ¨ç›¸ç­‰ï¼Œä¸”åè€…ä¸å‰è€…çš„å·®å€¼å°±æ˜¯ $a_i$ã€‚ä¸ºäº†è®©è¿™ä¸¤éƒ¨åˆ†ç›¸ç­‰ï¼Œå°±å¯ä»¥é€šè¿‡ $a_i$ æ¬¡æ“ä½œå¾—åˆ° $a_i$ ç§ä¸åŒçš„æœ€ç»ˆç»“æœã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$

=== "Python"

    ```python
    n = int(input())
    s = [int(input()) for _ in range(n)]
    
    pos = neg = 0
    for i in range(1, n):
        a = s[i] - s[i - 1]
        if a >= 0:
            pos += a
        else:
            neg += a
    
    print("%d\n%d" % (max(pos, -neg), abs(pos + neg) + 1))
    ```

## æœ¨æåŠ å·¥

é¢˜æ„ï¼šç»™å®š $n\ (1\le n \le 10^5)$ æ ¹æœ¨å¤´ï¼Œç°åœ¨éœ€è¦å°†è¿™äº›æœ¨å¤´åˆ‡æˆ $k\ (1\le k \le 10^8)$ æ®µç­‰é•¿çš„å°æ®µï¼Œé—®å°æ®µçš„æœ€å¤§é•¿åº¦æ˜¯å¤šå°‘ã€‚

æ€è·¯ï¼šå°æ®µé•¿åº¦è¶Šé•¿ï¼Œå¯åˆ‡å‡ºçš„å°æ®µå°±è¶Šå°‘ï¼Œå…·å¤‡å•è°ƒæ€§ï¼Œé‚£ä¹ˆç›´æ¥äºŒåˆ†å°æ®µé•¿åº¦ï¼Œæ‰¾åˆ°æœ€å¤§çš„å°æ®µé•¿åº¦å€¼ä½¿å¾—å¯åˆ‡å‡ºçš„å°æ®µä¸ªæ•° $\ge k$ å³å¯ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(n\log k)$

=== "Python"

    ```python
    n, k = map(int, input().strip().split())
    a = [int(input()) for _ in range(n)]
    
    def chk(v: int) -> bool:
        s = 0
        for x in a:
            s += x // v
        return s >= k
    
    l, r = 0, max(a)
    while l < r:
        mid = (l + r + 1) >> 1
        if chk(mid):
            l = mid
        else:
            r = mid - 1
    
    print(l)
    ```

## å…³æŠ¼ç½ªçŠ¯

é¢˜æ„ï¼šç»™å®šä¸€ä¸ªå«æœ‰ $n\ (n\le2\cdot 10^4)$ ä¸ªé¡¶ç‚¹ $m\ (m\le10^5)$ æ¡è¾¹çš„æ— å‘å›¾ï¼Œæ²¡æœ‰é‡è¾¹å’Œè‡ªç¯ï¼Œè¾¹æƒ $w\ (1\le w_i\le 10^9)$ ä¸ºæ­£ã€‚ç°åœ¨éœ€è¦å°†å›¾ä¸­æ‰€æœ‰çš„é¡¶ç‚¹åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä½¿å¾—ä¸¤éƒ¨åˆ†ä¸­æœ€å¤§çš„è¾¹æƒå°½å¯èƒ½å°ï¼Œè¾“å‡ºè¯¥æœ€å°è¾¹æƒã€‚

æ€è·¯ï¼š

- å‡è®¾ç­”æ¡ˆæ˜¯ $m$ æ¡è¾¹ä¸­æŸä¸€æ¡çš„æƒé‡ $w_i$ï¼Œé‚£ä¹ˆæ‰€æœ‰æƒé‡å°äº $w_i$ çš„è¾¹å¯¹åº”çš„é¡¶ç‚¹å¦‚ä½•åˆ†é…æ— å…³ç´§è¦ï¼Œæˆ‘ä»¬åªå…³æ³¨è¾¹æƒå¤§äº $w_i$ çš„è¾¹å¯¹åº”çš„é¡¶ç‚¹èƒ½ä¸èƒ½è¢«åˆ†åˆ°ä¸¤éƒ¨åˆ†ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åªå…³å¿ƒè¾¹æƒå¤§äº $w_i$ çš„è¾¹å¯¹åº”çš„é¡¶ç‚¹ç»„æˆçš„å›¾æ˜¯å¦å¯äºŒåˆ†ã€‚é‡‡ç”¨æŸ“è‰²æ³•å³å¯å¿«é€Ÿåˆ¤å®šä¸€ä¸ªå›¾æ˜¯å¦å¯äºŒåˆ†ã€‚æ³¨æ„è¿™é‡Œçš„å¯äºŒåˆ†çš„å›¾å…¶å®ä¸ç¬¦åˆã€ŒäºŒåˆ†å›¾ã€çš„ä¸¥æ ¼å®šä¹‰ï¼Œå› ä¸ºä¸¤ä¸ªéƒ¨åˆ†çš„é¡¶ç‚¹ä¹‹é—´å¯èƒ½æœ‰è¿è¾¹ï¼›
- ç”±äº $w_i$ è¶Šå°éœ€è¦åˆ¤æ–­çš„é¡¶ç‚¹æ•°å°±è¶Šå¤šï¼Œå…·å¤‡äºŒåˆ†æ€§ã€‚å› æ­¤æˆ‘ä»¬ç›´æ¥åœ¨ $m$ æ¡è¾¹ä¸­äºŒåˆ†æŸ¥æ‰¾æœ€å°çš„ç¬¦åˆæ¡ä»¶çš„è¾¹å³å¯ï¼›

æ—¶é—´å¤æ‚åº¦ï¼š$O(m\log n)$

æœ¬é¢˜ä¹Ÿå¯ä»¥ä½¿ç”¨ã€Œæ‹“å±•åŸŸå¹¶æŸ¥é›†ã€æ¥è§£å†³ï¼Œè¯¦æƒ…è§ [è¿›é˜¶æ•°æ®ç»“æ„](./examples-ds.md/#å…³æŠ¼ç½ªçŠ¯)

*[äºŒåˆ†å›¾]: åˆç§°äºŒéƒ¨å›¾ (Bipartite Graph)ã€‚å®šä¹‰ä¸ºï¼šèŠ‚ç‚¹ç”±ä¸¤ä¸ªé›†åˆç»„æˆï¼Œä¸”ä¸¤ä¸ªé›†åˆå†…éƒ¨æ²¡æœ‰è¾¹çš„å›¾ã€‚

=== "Python"

    ```cpp
    from collections import deque
    
    n, m = map(int, input().strip().split())
    edges = [(-1, -1, 0)]  # ä¸‹æ ‡ä» 1 å¼€å§‹
    for _ in range(m):
        u, v, w = map(int, input().strip().split())
        edges.append((u, v, w))
    
    edges.sort(key=lambda x: x[2])
    
    # æŸ“è‰²æ³• check äºŒåˆ†å›¾
    def chk(idx: int) -> bool:
        g = [[] for _ in range(n + 1)]
        for u, v, w in edges[idx + 1:]:
            g[u].append((v, w))
            g[v].append((u, w))
    
        color = [0] * (n + 1)
    
        def bfs(now: int) -> bool:
            color[now] = 1
            q = deque()
            q.append(now)
            while len(q):
                fa = q.popleft()
                for ch, _ in g[fa]:
                    if color[ch] == 0:
                        color[ch] = -color[fa]
                        q.append(ch)
                    elif color[ch] == color[fa]:
                        return False
            return True
    
        for i in range(1, n + 1):
            if color[i] == 0:
                ok = bfs(i)
                if not ok:
                    return False
        return True
    
    l, r = 0, m
    while l < r:
        mid = (l + r) >> 1
        if chk(mid):
            r = mid
        else:
            l = mid + 1
    
    print(edges[r][2])
    ```

## æ‘†æ”¾æ£‹å­

é¢˜æ„ï¼šç»™å®šä¸€ä¸ªé•¿åº¦ä¸º $n\ (1\le n \le 3\cdot 10^5)$ çš„äºŒè¿›åˆ¶åºåˆ—ï¼Œç°åœ¨å¯ä»¥å°†åºåˆ—ä¸­ $0$ è½¬æˆ $1$ã€‚é—®åœ¨è½¬æ¢æ¬¡æ•°ä¸è¶…è¿‡ $k\ (0\le k\le n)$ çš„æƒ…å†µä¸‹ï¼Œæœ€é•¿è¿ç»­ $1$ åºåˆ—çš„é•¿åº¦ä¸å¯¹åº”çš„åºåˆ—æ˜¯ä»€ä¹ˆã€‚

æ€è·¯ï¼šé¦–å…ˆä¸éš¾å‘ç°ï¼Œè¿ç»­ 1 åºåˆ—è¶Šé•¿éœ€è¦çš„è½¬æ¢æ¬¡æ•°å°±è¶Šå¤šï¼Œå› æ­¤å¯ä»¥äºŒåˆ†ç­”æ¡ˆã€‚åœ¨ check æ—¶ï¼Œå¦‚æœæƒ³è¦çº¿æ€§åˆ¤å®šä¸€ä¸ªé•¿åº¦æ˜¯å¦åˆæ³•ï¼Œå¯ä»¥å€ŸåŠ©å‰ç¼€å’Œä¸æ»‘åŠ¨çª—å£æ¥å®ç°ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(n \log n)$

=== "Python"

    ```python
    n, k = map(int, input().strip().split())
    a = list(map(int, input().strip().split()))
    
    s = [a[0]] + [0] * (n - 1)
    for i in range(1, n):
        s[i] = s[i - 1] + a[i]
    
    def chk(v: int) -> tuple[bool, int, int]:
        i, j = 0, v - 1
        while j < n:
            need = (j - i + 1) - (s[j] - (s[i - 1] if i else 0))
            if need <= k:
                return True, i, j
            i += 1
            j += 1
        return False, -1, -1
    
    l, r = 0, n
    while l < r:
        mid = (l + r + 1) >> 1
        if chk(mid)[0]:
            l = mid
        else:
            r = mid - 1
    
    cond, i, j = chk(r)
    if cond:
        for p in range(i, j + 1):
            a[p] = 1
    
    print(r)
    print(' '.join(map(str, a)))
    ```

## ç›–æ¥¼

é¢˜æ„ï¼šç»™å®š $n,m,x,y\ (1\le n,m\le10^9,2\le x,y< 30000)$ï¼Œå…¶ä¸­ $x$ å’Œ $y$ å‡ä¸ºè´¨æ•°ã€‚ç°åœ¨æœ‰ä¸€ä¸ªæ’åˆ—æ•°æ•°ç»„ï¼Œéœ€è¦å°†æ•°ç»„ä¸­çš„éƒ¨åˆ†æ•°å­—åˆ†é…ç»™ä¸¤ä¸ªäººã€‚å…¶ä¸­ä¸€ä¸ªäººéœ€è¦ $n$ ä¸ªæ•°ä¸”ä¸å…è®¸ç»™å®ƒèƒ½è¢« $x$ æ•´é™¤çš„æ•°ï¼Œå¦ä¸€ä¸ªäººéœ€è¦ $m$ ä¸ªæ•°ä¸”ä¸å…è®¸ç»™å®ƒèƒ½è¢« $y$ æ•´é™¤çš„æ•°ã€‚é—®è¿™ä¸ªæ’åˆ—æ•°æ•°ç»„çš„å¤§å°æœ€å°æ˜¯å¤šå°‘ã€‚

æ€è·¯ï¼šå‡è®¾æ’åˆ—æ•°å…±æœ‰ $h$ ä¸ªï¼Œä¸¤ä¸ªäººåˆ†åˆ«å« $A$ å’Œ $B$ã€‚ç”±äº $x$ å’Œ $y$ å‡ä¸ºè´¨æ•°ï¼Œé‚£ä¹ˆ $[1,h]$ ä¸­èƒ½è¢« $x$ å’Œ $y$ æ•´é™¤çš„æ•°ä¸€å®šå‘ˆç°ä¸‹å›¾ä¸­æœ‰éƒ¨åˆ†äº¤é›†æˆ–æ²¡æœ‰äº¤é›†çš„æƒ…å†µã€‚ä¸€ç§è´ªå¿ƒçš„åˆ†é…ç­–ç•¥å°±æ˜¯ï¼Œä¼˜å…ˆå°† $B$ ä¸éœ€è¦çš„æ•°åˆ†é…ç»™ $A$ï¼Œç„¶åå†ä» $h-p-q+a$ ä¸­åˆ†é…ï¼Œå¯¹ $B$ ä¹Ÿæ˜¯å¦‚æ­¤ã€‚åˆç”±äº $h$ è¶Šå¤§ï¼Œå¯åˆ†é…çš„æ•°å­—å°±è¶Šå¤šï¼Œä¸ºäº†æ‰¾åˆ°æœ€å°çš„ $h$ æˆ‘ä»¬äºŒåˆ†ç­”æ¡ˆå³å¯ã€‚

![é›†åˆå…³ç³»](https://cdn.dwj601.cn/images/20250225154154468.png)

/// fc
é›†åˆå…³ç³»
///

æ—¶é—´å¤æ‚åº¦ï¼š$O(\log n)$

=== "Python"

    ```python
    n, m, x, y = map(int, input().strip().split())
    
    def chk(h: int) -> bool:
        p = h // x
        q = h // y
        a = h // (x * y)
        return h - p - q + a < max(0, n - (q - a)) + max(0, m - (p - a))
    
    l, r = 0, 10**15
    while l < r:
        mid = (l + r) >> 1
        if chk(mid):
            l = mid + 1
        else:
            r = mid
    
    print(l)
    ```

## æ‰¾å‡ºå”¯ä¸€æ€§æ•°ç»„çš„ä¸­ä½æ•°

é¢˜æ„ï¼šç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œè¿”å›å…¶ã€Œå”¯ä¸€æ€§æ•°ç»„ã€çš„ä¸­ä½æ•°ã€‚å¦‚æœå”¯ä¸€æ€§æ•°ç»„æœ‰å¥‡æ•°ä¸ªå…ƒç´ ï¼Œåˆ™è¿”å›ä¸­é—´å…ƒç´ ï¼Œå¦‚æœæœ‰å¶æ•°ä¸ªå…ƒç´ ï¼Œåˆ™è¿”å›ä¸¤ä¸ªä¸­é—´å…ƒç´ ä¸­è¾ƒå°çš„é‚£ä¸ªã€‚å”¯ä¸€æ€§æ•°ç»„å®šä¹‰ä¸ºï¼šåŸæ•°ç»„çš„æ‰€æœ‰éç©ºå­æ•°ç»„ä¸­ã€Œä¸åŒå…ƒç´ çš„ä¸ªæ•°ã€ç»„æˆçš„åºåˆ—ã€‚

æ€è·¯ï¼š

- é¦–å…ˆæ ¹æ®é¢˜æ„å¯ä»¥æ˜ç¡®çš„è®¡ç®—å‡ºè¿™ä¸ªå”¯ä¸€æ€§æ•°ç»„çš„å…ƒç´ ä¸ªæ•° $tot$ã€‚å‡è®¾åŸæ•°ç»„æœ‰ $n$ ä¸ªå…ƒç´ ï¼Œåˆ™å…¶å”¯ä¸€æ€§æ•°ç»„ä¸€å®šæœ‰ $tot=\dfrac{(1+n) \cdot n}{2}$ ä¸ªå…ƒç´ ï¼Œä¸”æœ€å°å€¼ä¸€å®šæ˜¯ $1$ï¼Œæœ€å¤§å€¼ $\le n$ã€‚æœ€æš´åŠ›çš„åšæ³•å°±æ˜¯ $O(n^3)$ çš„ç»´æŠ¤å‡ºè¿™ä¸ªå”¯ä¸€æ€§æ•°ç»„ç„¶åè¿”å›å…¶ä¸­ä½æ•°ï¼Œä½†è¿™å¯¹äº $10^5$ çº§åˆ«çš„æ•°æ®æ˜¾ç„¶æ˜¯ä¸åˆé€‚çš„ã€‚è§‚å¯Ÿå…¶ä»–æ€§è´¨ï¼›
- ä¸éš¾å‘ç°ï¼Œå¦‚æœæ•°ç»„ä¸­ã€Œä¸åŒå…ƒç´ çš„ä¸ªæ•°ã€è¶Šå¤šï¼Œé‚£ä¹ˆæ»¡è¶³æ¡ä»¶çš„å­æ•°ç»„æ•°é‡å°±è¶Šå°‘ï¼Œå…·å¤‡å•è°ƒæ€§ã€‚åˆç”±äºæœ€ç»ˆçš„ç­”æ¡ˆä¸€å®šåœ¨ $[1,n]$ åŒºé—´å†…ï¼Œæˆ‘ä»¬ç›´æ¥äºŒåˆ†æŸ¥æ‰¾å³å¯ã€‚å¯¹äºä¸€ä¸ªç»™å®šçš„ã€Œä¸åŒå…ƒç´ çš„ä¸ªæ•°ã€å€¼ï¼Œè®°ä½œ $x$ï¼Œcheck æ¡ä»¶å°±æ˜¯åˆ¤æ–­æ˜¯å¦åˆšå¥½æœ‰ $\lceil \dfrac{tot}{2} \rceil$ ä¸ªå­æ•°ç»„çš„ä¸åŒå…ƒç´ ä¸ªæ•° $\le x$ æˆ–è€… $\ge x$ã€‚ä¸ºäº†åœ¨çº¿æ€§æ—¶é—´å¤æ‚åº¦å†… checkï¼Œæˆ‘ä»¬åˆ©ç”¨å“ˆå¸Œè¡¨ï¼Œé‡‡ç”¨æšä¸¾å³ç»´æŠ¤å·¦çš„æ€è·¯ç»Ÿè®¡åˆæ³•å­æ•°ç»„çš„ä¸ªæ•°å³å¯ï¼›
- å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç”±äºéœ€è¦åœ¨å”¯ä¸€æ€§æ•°ç»„å«æœ‰å¶æ•°ä¸ªå…ƒç´ æ—¶è¿”å›è¾ƒå°çš„é‚£ä¸€ä¸ªï¼Œæˆ‘ä»¬å¥—ç”¨é—­åŒºé—´äºŒåˆ†æ‰¾å·¦è¾¹ç•Œçš„æ¿å­ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(n\log n)$

=== "C++"

    ```cpp
    class Solution {
    public:
        int medianOfUniquenessArray(vector<int>& nums) {
            using ll = long long;
            int n = nums.size();
    
            ll tot = 1ll * (1 + n) * n / 2;
            int ma = *max_element(nums.begin(), nums.end());
            int f[ma + 1];
            memset(f, 0, sizeof f);
    
            // åŒæŒ‡é’ˆ check
            auto chk = [&](int upper) -> bool {
                ll cnt = 0;
                int size = 0;  // å“ˆå¸Œè¡¨å¤§å°
                for (int l = 0, r = 0; r < n; r++) {
                    size += f[nums[r]] == 0;
                    f[nums[r]]++;
                    while (size > upper) {
                        --f[nums[l]];
                        size -= f[nums[l]] == 0;
                        l++;
                    }
                    // æ­¤æ—¶ä»¥ nums[r] ç»“å°¾ä¸” l ä¸ºå·¦è¾¹ç•Œçš„æ‰€æœ‰å­æ•°ç»„çš„ä¸åŒå…ƒç´ çš„æ•°é‡å‡ <= upper
                    cnt += r - l + 1;
                }
                memset(f, 0, sizeof f);
                return cnt >= (tot + 1) / 2;  // ä¸Šå–æ•´å†™æ³•
            };
    
            int l = 1, r = n;
            while (l < r) {
                int mid = (l + r) >> 1;
                if (chk(mid)) r = mid;
                else l = mid + 1;
            }
            return r;
        }
    };
    ```

=== "Python"

    ```python
    class Solution:
        def medianOfUniquenessArray(self, nums: List[int]) -> int:
            n = len(nums)
            ma = max(nums)
            tot = (1 + n) * n // 2
    
            def chk(v: int) -> bool:
                f = [0] * (ma + 1)
                uni = 0  # å­æ•°ç»„ä¸­ä¸åŒå…ƒç´ çš„ä¸ªæ•°
                cnt = 0  # ä¸åŒå…ƒç´ çš„ä¸ªæ•° <= v çš„å­æ•°ç»„ä¸ªæ•°
                i = 0
                for j in range(n):
                    f[nums[j]] += 1
                    uni += f[nums[j]] == 1
                    while uni > v:
                        f[nums[i]] -= 1
                        uni -= f[nums[i]] == 0
                        i += 1
                    cnt += j - i + 1
                return cnt >= (tot + 1) >> 1
    
            l, r = 1, n
            while l < r:
                mid = (l + r) >> 1
                if chk(mid):
                    r = mid
                else:
                    l = mid + 1
    
            return l
    ```

## Bomb

é¢˜æ„ï¼šç»™å®šä¸¤ä¸ªé•¿åº¦ä¸º $n\ (1\le n \le 2\cdot10^5)$ çš„åºåˆ— $a,b\ (1\le a_i,b_i\le 10^9)$ ä»¥åŠæœ€å¤§æ“ä½œæ¬¡æ•° $k\ (1\le k\le 10^9)$ï¼Œé—®åœ¨ä¸è¶…è¿‡æœ€å¤§æ“ä½œæ¬¡æ•°çš„æƒ…å†µä¸‹ï¼Œæœ€å¤šå¯ä»¥è·å¾—å¤šå°‘æ”¶ç›Šï¼Ÿæ”¶ç›Šçš„è®¡ç®—æ–¹æ³•ä¸ºï¼šæ¯æ¬¡é€‰æ‹© $a$ ä¸­ä¸€ä¸ªæ•° $a_i$ åŠ å…¥æ”¶ç›Šå¹¶å°† $a_i$ å‡å» $b_i$ ç›´åˆ°ä¸º $0$ã€‚

æ€è·¯ï¼š

- é¦–å…ˆæ˜¾ç„¶æˆ‘ä»¬æœ‰ä¸€ä¸ªæœ´ç´ ä½†æ­£ç¡®çš„è´ªå¿ƒï¼Œå°±æ˜¯æˆ‘ä»¬æ¯æ¬¡æ“ä½œæ—¶é€‰æ‹© $a$ ä¸­çš„æœ€å¤§å€¼è¿›è¡Œè®¡æ•°å¹¶å¯¹å…¶ä¿®æ”¹ï¼Œä½†æ˜¯æ˜¾ç„¶ $O(kn)$ ä¼šè¶…æ—¶ï¼Œé‡‡ç”¨å †å¯ä»¥ä¼˜åŒ–åˆ° $O(k\log n)$ï¼Œè¿˜æ˜¯ä¼šè¶…æ—¶ï¼Œè€ƒè™‘ä¼˜åŒ–ï¼›
- æ­£éš¾åˆ™åï¼Œæ“ä½œæ¬¡æ•°è¶Šå¤šæ”¶ç›Šä¸€å®šè¶Šå¤§ï¼ˆæˆ–ä¸å˜ï¼‰å…·å¤‡å•è°ƒæ€§ï¼Œå¯ä»¥äºŒåˆ†ã€‚æˆ‘ä»¬ç›´æ¥äºŒåˆ†æœ€å¤§æ”¶ç›Šå€¼å¹¶ check å¯¹åº”çš„æ“ä½œæ¬¡æ•°æ˜¯å¦å³å¯ï¼Œå—ï¼Ÿè¿™ä¹Ÿæ˜¯æœ¬é¢˜çš„éš¾ç‚¹æ‰€åœ¨ã€‚å¦‚æœæˆ‘ä»¬æŒ‰ç…§å¸¸è§„çš„æ€è·¯ç›´æ¥äºŒåˆ†ç­”æ¡ˆï¼Œå¯ä»¥å‘ç° check çš„é€»è¾‘å’ŒåŸé¢˜ä¸€æ ·ï¼Œæ²¡æ³•åšåˆ°çº¿æ€§ checkï¼›
- ä½†æ˜¯æ“ä½œæ¬¡æ•°è¶Šå¤šæ”¶ç›Šä¸€å®šè¶Šå¤§ï¼ˆæˆ–ä¸å˜ï¼‰è¿™ä¸ªå•è°ƒæ€§æ˜¯ä¸€å®šå­˜åœ¨çš„ï¼Œæˆ‘ä»¬ç›´æ¥äºŒåˆ†æœ€å¤§æ”¶ç›Šçš„æœ¬è´¨æ˜¯æƒ³è¦è®¡ç®—ä¸€ä¸ªå±€é¢ä¸‹çš„æ“ä½œæ¬¡æ•°ä»è€Œåˆ¤æ–­æ˜¯å¦å¯ä»¥è·å¾—é‚£ä¹ˆå¤šæ”¶ç›Šã€‚å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿé€šè¿‡å…¶ä»–å±€é¢çº¿æ€§åœ° check å‡ºæ“ä½œæ¬¡æ•°ä¸æ”¶ç›Šï¼Œä¹Ÿå°±èƒ½å®ç°ç›¸åŒçš„æ•ˆæœã€‚å› æ­¤æˆ‘ä»¬è¦ **è·³è„±å‡ºäºŒåˆ†ç­”æ¡ˆçš„æ€ç»´å®šåŠ¿**ï¼ŒäºŒåˆ†ã€Œå…ƒç´ é€‰æ‹©çš„é˜ˆå€¼ä¸‹ç•Œã€ï¼Œæˆ‘ä»¬å°†è¿™ä¸ªä¸‹ç•Œè®°ä½œ lowerã€‚å¯¹äºå½“å‰å±€é¢çš„ lowerï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“çš„çº¿æ€§è®¡ç®—å‡ºæ“ä½œæ¬¡æ•°ä¸æ”¶ç›Šï¼Œå¹¶ä¸” lower è¶Šå°ï¼Œæ“ä½œæ¬¡æ•°å°±è¶Šå¤šï¼Œå¯ä»¥è·å¾—çš„æ”¶ç›Šä¹Ÿå°±è¶Šå¤§ï¼›
- æœ¬é¢˜è¿˜æœ‰ä¸€ä¸ªæ³¨æ„ç‚¹å°±æ˜¯äºŒåˆ†çš„è¾¹ç•Œä¸æ”¶ç›Šè®¡ç®—é—®é¢˜ã€‚ä¸ºäº†ä¿è¯å½“å‰ lower å±€é¢ä¸‹çš„æ“ä½œæ¬¡æ•°ä¸ä¼šè¶…è¿‡ $k$ï¼Œéœ€è¦ç¡®ä¿äºŒåˆ†å³è¾¹ç•Œæ¯” $a$ ä¸­æœ€å¤§å€¼è¿˜è¦å¤§ã€‚åŒæ—¶å¯¹äºæœ€ç»ˆçš„äºŒåˆ†å‡ºæ¥çš„ lower ä¸å¯¹åº”çš„æ“ä½œæ¬¡æ•° $cnt$ï¼Œæˆ‘ä»¬è¿˜æœ‰ $k-cnt$ æ¬¡å‰©ä½™çš„æ“ä½œæœºä¼šï¼Œè¿™äº›å‰©ä½™çš„æ“ä½œæœºä¼šä¸€å®šå¯ä»¥é€‰æ‹© $a$ ä¸­å€¼æ°å¥½ä¸º $lower-1$ çš„å…ƒç´ ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(n\log 10^9)$

=== "Python"

    ```python
    T = int(input())
    OUTs = []
    for _ in range(T):
        n, k = map(int, input().strip().split())
        a = list(map(int, input().strip().split()))
        b = list(map(int, input().strip().split()))
    
        def chk(v: int):
            cnt = val = 0
            for i in range(n):
                if a[i] < v:
                    continue
                x = (a[i] - v) // b[i] + 1  # æ“ä½œæ¬¡æ•°
                cnt += x
                val += x * a[i] + x * (x - 1) // 2 * (-b[i])
            val += max(0, k - cnt) * (v - 1)
            return cnt > k, val
    
        l, r = 1, 10**9 + 1
        while l < r:
            mid = (l + r) >> 1
            if chk(mid)[0]:
                l = mid + 1
            else:
                r = mid
    
        OUTs.append(chk(l)[1])
    
    print("\n".join(map(str, OUTs)))
    ```

## æ•°é‡

é¢˜æ„ï¼šç»™å®šä¸€ä¸ªæ•° $n$ï¼Œé—® $[1, n]$ ä¸­æœ‰å¤šå°‘ä¸ªæ•°åªå«æœ‰ $4$ æˆ– $7$ã€‚

æ€è·¯ï¼šæ¯ä¸€ä¸ªæ•°ä½åªæœ‰å¯èƒ½æ˜¯ $4$ æˆ– $7$ï¼Œæˆ‘ä»¬æŒ‰ç…§æ•°ä½æœç´¢å³å¯ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$2^{\lg n}$

=== "Python"

    ```python
    n = int(input().strip())
    
    def dfs(x: int):
        if x > n:
            return 0
        return dfs(x * 10 + 4) + dfs(x * 10 + 7) + 1
    
    print(dfs(4) + dfs(7))
    ```

=== "C++"

    ```c++
    #include <iostream>
    #include <vector>
    
    using namespace std;
    
    long long n;
    
    int dfs(long long x) {
        if (x > n) {
            return 0;
        }
        return dfs(x * 10 + 4) + dfs(x * 10 + 7) + 1;
    }
    
    int main() {;
        cin >> n;
        cout << dfs(4) + dfs(7) << "\n";
    
        return 0;
    }
    ```

## ç»„åˆæ€»å’Œ

é¢˜æ„ï¼šç»™å®šä¸€ä¸ªå«æœ‰ $n\ (1\le n \le 30)$ ä¸ªä¸é‡å¤å…ƒç´ çš„åºåˆ—ï¼Œé—®å¦‚ä½•é€‰å–å…¶ä¸­çš„å…ƒç´ ï¼ˆå¯é‡å¤é€‰ï¼‰ï¼Œèƒ½å¤Ÿä½¿å¾—é€‰å‡ºçš„æ•°å­—æ€»å’Œä¸º $\text{target}\ (1\le \text{target}\le 40)$ã€‚ç»™å‡ºæ‰€æœ‰å…·ä½“é€‰æ•°æ–¹æ¡ˆï¼ˆä¸è€ƒè™‘æ•°å­—çš„é€‰æ‹©é¡ºåºï¼‰ã€‚

æ€è·¯ï¼šç»„åˆå‹æœç´¢ç»å…¸ä¾‹é¢˜ã€‚åœ¨æšä¸¾åºåˆ—ä¸­çš„å…ƒç´ æ—¶ï¼Œéœ€è¦ä»ä¸Šä¸€æ¬¡æšä¸¾ç»“æŸçš„ä½ç½®å¼€å§‹ï¼Œé˜²æ­¢æ–¹æ¡ˆé‡å¤ï¼ˆä¹Ÿå¯ä»¥ç†è§£ä¸ºå‰ªææ“ä½œï¼‰ã€‚ä¸‹å›¾å¯¹æœç´¢æ–¹æ¡ˆè¿›è¡Œäº†æ¸…æ™°åœ°è§£é‡Šã€‚

![ç»„åˆå‹æœç´¢ - å‰ªæé€»è¾‘](https://cdn.dwj601.cn/images/202407250146195.png)

/// fc
ç»„åˆå‹æœç´¢ - å‰ªæé€»è¾‘
///

æ—¶é—´å¤æ‚åº¦ï¼šä¸å¤ªä¼šè®¡ç®—æ—¶é—´å¤æ‚åº¦ï¼Œä½†æ˜¯åœ¨æœ¬é¢˜çš„æ•°æ®é‡ä¸‹é€šè¿‡å‰ªæå¯ä»¥å¾ˆå¿«çš„ç®—å‡ºæ–¹æ¡ˆã€‚å…·ä½“å¤æ‚åº¦æ¨å¯¼è§ [ä¸‰ç§æ–¹æ³•ï¼šé€‰æˆ–ä¸é€‰/æšä¸¾é€‰å“ªä¸ª/å®Œå…¨èƒŒåŒ…é¢„å¤„ç†+å¯è¡Œæ€§å‰ªæï¼ˆPython/Java/C++/Goï¼‰ - (LeetCode)](https://leetcode.cn/problems/combination-sum/solutions/2747858/liang-chong-fang-fa-xuan-huo-bu-xuan-mei-mhf9/)ã€‚

=== "Python"

    ```python
    class Solution:
        def combinationSum(self, candidates: List[int], target: int) -> List[List[int]]:
            n = len(candidates)
            ans = []
            path = []
    
            def dfs(remain: int, idx: int) -> None:
                if remain < 0:
                    return
                elif remain == 0:
                    ans.append(path.copy())  # å¯¹äºåˆ—è¡¨ï¼Œappend çš„æ˜¯ä¸€ä¸ªå¼•ç”¨ï¼Œæ‰€ä»¥è¦åŠ  copy
                    return
                for i in range(idx, n):
                    path.append(candidates[i])
                    dfs(remain - candidates[i], i)
                    path.pop()
    
            dfs(target, 0)
    
            return ans
    ```

=== "C++"

    ```c++
    class Solution {
    public:
        vector<vector<int>> combinationSum(vector<int>& candidates, int target) {
            int n = candidates.size();
            vector<vector<int>> ans;
            vector<int> path;
    
            function<void(int, int)> dfs = [&](int remain, int idx) {
                if (remain < 0) {
                    return;
                } else if (remain == 0) {
                    ans.push_back(path);
                    return;
                }
                for (int i = idx; i < n; i++) {
                    path.push_back(candidates[i]);
                    dfs(remain - candidates[i], i);
                    path.pop_back();
                }
            };
    
            dfs(target, 0);
    
            return ans;
        }
    };
    ```

## æ‰©å±•å­—ç¬¦ä¸²

é¢˜æ„ï¼šç»™å®šä¸€ç§å­—ç¬¦ä¸²æ„é€ æ–¹æ³•ï¼Œè¿›è¡Œ $q\ (1\le q\le 10)$ æ¬¡æŸ¥è¯¢ï¼Œæ¯æ¬¡è¯¢é—®ç¬¬ $n\ (0\le n\le 10^5)$ ä¸ªå­—ç¬¦ä¸²çš„ç¬¬ $k\ (1\le k \le 10^{18})$ ä¸ªå­—ç¬¦æ˜¯ä»€ä¹ˆï¼ˆå­—ç¬¦ä¸²ä¸‹æ ‡ä» $1$ å¼€å§‹ï¼‰ã€‚å¦‚æœè¶Šç•Œè¾“å‡º `'.'`ã€‚å­—ç¬¦ä¸²æ„é€ æ–¹æ³•å¦‚ä¸‹ï¼š

- $s_0 = $ `DKER EPH VOS GOLNJ ER RKH HNG OI RKH UOPMGB CPH VOS FSQVB DLMM VOS QETH SQB`ï¼›
- $s_i = $ `DKER EPH VOS GOLNJ UKLMH QHNGLNJ A` $+s_{iâˆ’1}+$ `AB CPH VOS FSQVB DLMM VOS QHNG A` $+s_{iâˆ’1}+$ `AB`ã€‚

æ€è·¯ï¼šå¯ä»¥å‘ç°å­—ç¬¦ä¸²æ„é€ æ–¹æ³•ç±»ä¼¼äºŒå‰é€’å½’çš„å½¢å¼ï¼Œæˆ‘ä»¬é¢„å¤„ç†æ¯ä¸€ä¸ªçŠ¶æ€çš„å­—ç¬¦ä¸²é•¿åº¦åç›´æ¥é€’å½’æœç´¢å³å¯ã€‚ç”±äº $n$ çš„ä¸Šé™å¾ˆå¤§ï¼Œå¦‚æœç›´æ¥å­˜å‚¨æ¯ä¸€ä¸ªçŠ¶æ€çš„é•¿åº¦è‚¯å®šä¼šç‚¸ï¼ˆC++ ç‚¸ long longï¼ŒPython ç‚¸æ—¶ç©ºï¼‰ï¼Œæ³¨æ„åˆ°è¯¢é—®çš„ä¸‹æ ‡ç´¢å¼•ä¸è¶…è¿‡ $10^{18}$ï¼Œå› æ­¤æˆ‘ä»¬ç›´æ¥ç»™æ¯ä¸€ä¸ªçŠ¶æ€çš„å­—ç¬¦ä¸²é•¿åº¦è®¾ç½®ä¸Šé™å³å¯ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(qn)$

=== "Python"

    ```python
    import sys
    sys.setrecursionlimit(100000)
    
    s = "DKER EPH VOS GOLNJ ER RKH HNG OI RKH UOPMGB CPH VOS FSQVB DLMM VOS QETH SQB"
    t0 = "DKER EPH VOS GOLNJ UKLMH QHNGLNJ A"
    t1 = "AB CPH VOS FSQVB DLMM VOS QHNG A"
    t2 = "AB"
    l0, l1, l2 = len(t0), len(t1), len(t2)
    
    a = [0] * 100001
    a[0] = len(s)
    for i in range(1, 100001):
        a[i] = min(2 * 10**18, l0 + l1 + l2 + a[i - 1] * 2)
    
    def dfs(n: int, k: int) -> str:
        if k > a[n]:
            return '.'
        if n == 0:
            return s[k - 1]
    
        if k > l0 + a[n - 1] + l1 + a[n - 1]:
            return t2[k - (l0 + a[n - 1] + l1 + a[n - 1]) - 1]
        elif k > l0 + a[n - 1] + l1:
            return dfs(n - 1, k - (l0 + a[n - 1] + l1))
        elif k > l0 + a[n - 1]:
            return t1[k - (l0 + a[n - 1]) - 1]
        elif k > l0:
            return dfs(n - 1, k - l0)
    
        return t0[k - 1]
    
    q = int(input())
    ans = ''
    for _ in range(q):
        n, k = map(int, input().strip().split())
        ans += dfs(n, k)
    
    print(ans)
    ```

=== "C++"

    ```c++
    #include <iostream>
    #include <vector>
    
    using namespace std;
    using ll = long long;
    
    const int N = 100001;
    
    ll a[N];
    string s = "DKER EPH VOS GOLNJ ER RKH HNG OI RKH UOPMGB CPH VOS FSQVB DLMM VOS QETH SQB";
    string t0 = "DKER EPH VOS GOLNJ UKLMH QHNGLNJ A";
    string t1 = "AB CPH VOS FSQVB DLMM VOS QHNG A";
    string t2 = "AB";
    int l0 = t0.size();
    int l1 = t1.size();
    int l2 = t2.size();
    
    char dfs(int n, ll k) {
        if (k > a[n]) {
            return '.';
        }
        if (n == 0) {
            return s[k - 1];
        }
    
        if (k > l0 + a[n - 1] + l1 + a[n - 1]) {
            return t2[k - (l0 + a[n - 1] + l1 + a[n - 1]) - 1];
        } else if (k > l0 + a[n - 1] + l1) {
            return dfs(n - 1, k - (l0 + a[n - 1] + l1));
        } else if (k > l0 + a[n - 1]) {
            return t1[k - (l0 + a[n - 1]) - 1];
        } else if (k > l0) {
            return dfs(n - 1, k - l0);
        } else {
            return t0[k - 1];
        }
    }
    
    int main() {
        a[0] = s.size();
        for (int i = 1; i < N; i++) {
            a[i] = min((ll)2E18, l0 + l1 + l2 + a[i - 1] * 2);
        }
    
        int q;
        cin >> q;
    
        string ans = "";
        while (q--) {
            int n;
            ll k;
            cin >> n >> k;
            ans += dfs(n, k);
        }
    
        cout << ans << "\n";
    
        return 0;
    }
    ```

## 01 è¿·å®«

é¢˜æ„ï¼šç»™å®šä¸€ä¸ª $n\times n\ (1\le n\le 1000)$ çš„ 01 æ–¹é˜µï¼Œè¯¢é—® $m\ (1\le m\le 10^5)$ æ¬¡ï¼Œæ¯æ¬¡è¯¢é—®ä» $i,j\ (1\le i,j\le n)$ å‡ºå‘å¯ä»¥ç§»åŠ¨å¤šå°‘æ ¼ã€‚ç§»åŠ¨è§„åˆ™ä¸ºï¼šå¯ä»¥èµ°åˆ°æ›¼å“ˆé¡¿è·ç¦»ä¸º $1$ ä¸”ä¸å½“å‰æ•°å€¼ä¸åŒçš„å››ä¸ªæ ¼å­ä¸­ã€‚

æ€è·¯ï¼š

- ä¸€é“å…¥é—¨ç½‘æ ¼å›¾éå†é—®é¢˜ï¼Œæ”¾åœ¨è¿™ä¸»è¦æ˜¯ä¸ºäº†ç†Ÿæ‚‰è¿é€šåˆ†é‡çš„æ¦‚å¿µä»¥åŠ DFS ä¸ BFS åœ¨è¿™ç±»é—®é¢˜ä¸Šçš„ä»£ç æ¿å­ï¼›
- å›åˆ°æœ¬é¢˜ï¼Œæ˜¾ç„¶ä¸å¯èƒ½é—®ä¸€æ¬¡éå†ä¸€æ¬¡ï¼Œè€ƒè™‘é¢„å¤„ç†ã€‚é¢„å¤„ç†å°±ç›´æ¥éå†ç½‘æ ¼å›¾åŒæ—¶æ ‡è®°æ¯ä¸€ä¸ªè¿é€šåˆ†é‡çš„å¤§å°å³å¯ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªéå†çš„å° trickï¼Œåœ¨éå†æ—¶ä¿ç•™èµ°è¿‡çš„è·¯å¾„ï¼Œéå†ç»“æŸåç»™èµ°è¿‡çš„è·¯å¾„ä¸Šå…¨éƒ½èµ‹ä¸Šè¿é€šåˆ†é‡çš„å¤§å°å³å¯ï¼›
- ä¸Šè¿° trick ä¹Ÿå¯ä»¥ç”¨å¹¶æŸ¥é›†å®ç°ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(n^2)$

=== "Python BFS"

    ```python
    from collections import deque
    
    n, m = map(int, input().strip().split())
    g = [""] * n
    for i in range(n):
        g[i] = input().strip()
    
    ans = [[0] * n for _ in range(n)]
    vis = [[False] * n for _ in range(n)]
    dx = [-1, 1, 0, 0]
    dy = [0, 0, 1, -1]
    
    def bfs(i: int, j: int) -> None:
        cnt = 0
        path = []
        q = deque()
    
        cnt += 1
        path.append((i, j))
        vis[i][j] = True
        q.append((i, j))
        while q:
            x, y = q.popleft()
            for k in range(4):
                nx, ny = dx[k] + x, dy[k] + y
                if nx < 0 or nx >= n or ny < 0 or ny >= n:
                    continue
                if vis[nx][ny] or int(g[x][y]) ^ int(g[nx][ny]) == 0:
                    continue
                cnt += 1
                path.append((nx, ny))
                vis[nx][ny] = True
                q.append((nx, ny))
    
        for x, y in path:
            ans[x][y] = cnt
    
    for i in range(n):
        for j in range(n):
            if not vis[i][j]:
                bfs(i, j)
    
    for _ in range(m):
        i, j = map(int, input().strip().split())
        print(ans[i - 1][j - 1])
    ```

=== "Python DSU"

    ```python
    from collections import deque
    
    class DSU:
        def __init__(self, n: int) -> None:
            self.n = n
            self.sz = n
            self.p = [i for i in range(n)]
            self.cnt = [1 for i in range(n)]
    
        def find(self, x: int) -> int:
            if self.p[x] != x:
                self.p[x] = self.find(self.p[x])
            return self.p[x]
    
        def merge(self, a: int, b: int) -> None:
            pa, pb = self.find(a), self.find(b)
            if pa != pb:
                self.p[pa] = pb
                self.cnt[pb] += self.cnt[pa]
                self.sz -= 1
    
        def same(self, a: int, b: int) -> bool:
            return self.find(a) == self.find(b)
    
        def size(self) -> int:
            return self.sz
    
        def size(self, a: int) -> int:
            return self.cnt[self.find(a)]
    
    n, m = map(int, input().strip().split())
    g = [""] * n
    for i in range(n):
        g[i] = input().strip()
    
    dsu = DSU(n * n)
    vis = [[False] * n for _ in range(n)]
    dx = [-1, 1, 0, 0]
    dy = [0, 0, 1, -1]
    
    def bfs(i: int, j: int) -> None:
        q = deque()
        vis[i][j] = True
        q.append((i, j))
        
        while q:
            x, y = q.popleft()
            for k in range(4):
                nx, ny = dx[k] + x, dy[k] + y
                if nx < 0 or nx >= n or ny < 0 or ny >= n:
                    continue
                if vis[nx][ny] or int(g[x][y]) ^ int(g[nx][ny]) == 0:
                    continue
                
                dsu.merge(x * n + y, nx * n + ny)
                
                vis[nx][ny] = True
                q.append((nx, ny))
    
    for i in range(n):
        for j in range(n):
            if not vis[i][j]:
                bfs(i, j)
    
    for _ in range(m):
        i, j = map(int, input().strip().split())
        i -= 1
        j -= 1
        print(dsu.size(i * n + j))
    ```

=== "C++ DFS"

    ```c++
    #include <iostream>
    #include <vector>
    
    using namespace std;
    
    const int N = 1010;
    
    int n, m;
    string g[N];
    int ans[N][N];
    bool vis[N][N];
    
    int cnt;
    vector<pair<int, int>> path;
    int dx[4] = {-1, 1, 0, 0}, dy[4] = {0, 0, -1, 1};
    
    void dfs(int i, int j) {
        path.push_back({i, j});
        vis[i][j] = true;
        cnt += 1;
        for (int k = 0; k < 4; k++) {
            int nx = i + dx[k], ny = j + dy[k];
            if (nx < 0 || nx >= n || ny < 0 || ny >= n || 
                vis[nx][ny] || (g[nx][ny] - '0') ^ (g[i][j] - '0') == 0) {
                continue;
            }
            dfs(nx, ny);
        }
    }
    
    int main() {
        cin >> n >> m;
        for (int i = 0; i < n; i++) {
            cin >> g[i];
        }
    
        for (int i = 0; i < n; i++) {
            for (int j = 0; j < n; j++) {
                if (vis[i][j]) {
                    continue;
                }
                cnt = 0;
                path.clear();
                dfs(i, j);
                for (auto& [x, y]: path) {
                    ans[x][y] = cnt;
                }
            }
        }
    
        while (m--) {
            int i, j;
            cin >> i >> j;
            cout << ans[i - 1][j - 1] << "\n";
        }
    
        return 0;
    }
    ```

## å°†çŸ³å¤´åˆ†æ•£çš„æœ€å°‘ç§»åŠ¨æ¬¡æ•°

é¢˜æ„ï¼šç»™å®šä¸€ä¸ª $3\times 3$ çš„çŸ©é˜µ $g$ï¼Œå…¶ä¸­æ•°å­—æ€»å’Œä¸º $9$ ä¸” $g[i][j] \ge 0$ï¼Œç°åœ¨éœ€è¦å°†å…¶ä¸­ $>1$ çš„æ•°å­—æ²¿ç€ç›´è§’è¾¹ç§»åŠ¨åˆ°å€¼ä¸º $0$ çš„ä½ç½®ä¸Šä½¿å¾—æœ€ç»ˆçŸ©é˜µå…¨ä¸º $1$ï¼Œè¾“å‡ºæœ€å°çš„æ€»ç§»åŠ¨è·ç¦»ã€‚

æ€è·¯ï¼š

- è®° $0$ ä¸ºç©ºä½ï¼Œå‡è®¾æœ‰ $k$ ä¸ªç©ºä½ï¼Œé‚£ä¹ˆå°±ä¸€å®šæœ‰ $k$ ä¸ª $1$ å¯ä»¥ç§»åŠ¨ï¼Œå› æ­¤è¿™é“é¢˜æœ¬è´¨ä¸Šå°±æ˜¯ $k$ ä¸ªç©ºä½ä¸ $k$ ä¸ª $1$ çš„åŒ¹é…é—®é¢˜ã€‚ä¸ºäº†ä¸æ¼æ‰ä»»ä½•ä¸€ç§åŒ¹é…æ–¹å¼ï¼Œæˆ‘ä»¬ç›´æ¥å…¨æ’åˆ—æšä¸¾ç©ºä½æˆ–è€… $1$ çš„ä½ç½®å³å¯ï¼Œæ­¤å¤„æˆ‘ä»¬é€‰æ‹©å‰è€…ï¼›
- Python å’Œ C++ éƒ½å†…ç½®äº†å…¨æ’åˆ—çš„åº“å‡½æ•°ï¼š
    - C++ çš„å…¨æ’åˆ—æšä¸¾åº“å‡½æ•°ä¸º `std::next_permutation(ItFirst, ItEnd)`ï¼Œæ¯æ¬¡è¿”å›åˆšå¥½æ¯”å½“å‰æ’åˆ—å­—å…¸åºå¤§çš„æ’åˆ—ï¼›
    - Python çš„å…¨æ’åˆ—æšä¸¾åº“å‡½æ•°ä¸º `itertools.permutations(Iterable)`ï¼ŒæŒ‰ç…§å­—å…¸åºä¸€æ¬¡æ€§è¿”å›æ‰€æœ‰æ’åˆ—ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(9\times 9!)$

=== "Python"

    ```python
    class Solution:
        def minimumMoves(self, g: List[List[int]]) -> int:
            a = []  # å­˜ 0 çš„ä½ç½®
            b = []  # å­˜ 1 çš„ä½ç½®
            for i in range(3):
                for j in range(3):
                    if g[i][j] == 0:
                        a.append((i, j))
                    elif g[i][j] > 1:
                        b.extend([(i, j)] * (g[i][j] - 1))
    
            ans = 1000
            n = len(a)
            vis = [False] * n
    
            def dfs(i: int, now: int) -> None:
                if i == n:
                    nonlocal ans
                    ans = min(ans, now)
                    return
    
                # i æ˜¯ 1ï¼Œj æ˜¯ç©ºä½
                for j in range(n):
                    if vis[j]:
                        continue
                    vis[j] = True
                    dfs(
                        i + 1,
                        now + abs(a[j][0] - b[i][0]) + abs(a[j][1] - b[i][1])
                    )
                    vis[j] = False
    
            dfs(0, 0)
    
            return ans
    ```

=== "Python åº“å‡½æ•°"

    ```python
    from itertools import permutations
    
    class Solution:
        def minimumMoves(self, g: List[List[int]]) -> int:
            a = []
            b = []
            for i in range(3):
                for j in range(3):
                    if g[i][j] == 0:
                        a.append((i, j))
                    elif g[i][j] > 1:
                        for _ in range(g[i][j] - 1):
                            b.append((i, j))
    
            ans = 1000
            for p in permutations(a):
                now = 0
                for i, (x, y) in enumerate(p):
                    now += abs(x - b[i][0]) + abs(y - b[i][1])
                ans = min(ans, now)
    
            return ans
    ```

=== "C++"

    ```c++
    class Solution {
    public:
        int minimumMoves(vector<vector<int>>& g) {
            vector<array<int, 2>> a, b;
            for (int i = 0; i < 3; i++) {
                for (int j = 0; j < 3; j++) {
                    if (g[i][j] == 0) {
                        a.push_back({i, j});
                    } else if (g[i][j] > 1) {
                        for (int _ = 0; _ < g[i][j] - 1; _++) {
                            b.push_back({i, j});
                        }
                    }
                }
            }
    
            int ans = 1000;
            int n = a.size();
            vector<bool> vis(n);
            
            auto dfs = [&](auto&& dfs, int i, int now) -> void {
                if (i == n) {
                    ans = min(ans, now);
                    return;
                }
                for (int j = 0; j < n; j++) {
                    if (vis[j]) {
                        continue;
                    }
                    vis[j] = true;
                    dfs(
                        dfs,
                        i + 1,
                        now + abs(a[j][0] - b[i][0]) + abs(a[j][1] - b[i][1])
                    );
                    vis[j] = false;
                }
            };
    
            dfs(dfs, 0, 0);
            
            return ans;
        }
    };
    ```

=== "C++ åº“å‡½æ•°"

    ```c++
    class Solution {
    public:
        int minimumMoves(vector<vector<int>>& g) {
            vector<array<int, 2>> a, b;
            for (int i = 0; i < 3; i++) {
                for (int j = 0; j < 3; j++) {
                    if (g[i][j] == 0) {
                        a.push_back({i, j});
                    } else if (g[i][j] > 1) {
                        for (int _ = 0; _ < g[i][j] - 1; _++) {
                            b.push_back({i, j});
                        }
                    }
                }
            }
    
            int ans = 1000;
            do {
                int now = 0;
                for (int i = 0; i < a.size(); i++) {
                    now += abs(a[i][0] - b[i][0]) + abs(a[i][1] - b[i][1]);
                }
                ans = min(ans, now);
            } while (next_permutation(a.begin(), a.end()));
    
            return ans;
        }
    };
    ```

## éšæœºæ’åˆ—

é¢˜æ„ï¼šç»™å®šä¸€ä¸ªå«æœ‰ $n\ (2\le n\le 10^6)$ ä¸ªæ•°çš„æ’åˆ—ã€‚ç°åœ¨å°†è¿™ä¸ªæ’åˆ—è¿›è¡Œä¸€å®šæ¬¡æ•°çš„å¯¹æ¢æ“ä½œï¼Œé—®æ˜¯å¯¹æ¢äº† $3n$ æ¬¡è¿˜æ˜¯ $7n+1$ æ¬¡ã€‚

æ€è·¯ï¼š

- ä¸€çœ‹åˆ°æ’åˆ—å¯¹æ¢ï¼Œç«‹åˆ»æƒ³åˆ°ä¸€ä¸ªç»“è®ºï¼šåœ¨æ’åˆ—ä¸­è¿›è¡Œä¸€æ¬¡å¯¹æ¢æ“ä½œï¼Œæ’åˆ—çš„é€†åºæ•°çš„å¥‡å¶æ€§å°±ä¼šå‘ç”Ÿä¸€æ¬¡å˜åŒ–ï¼›
- å®¹æ˜“å‘ç° $3n \equiv n \pmod 2,7n+1 \equiv n+1 \pmod 2$ï¼Œå› æ­¤ä¸¤ç§å¯¹æ¢æ¬¡æ•°ä¸‹ï¼Œæ’åˆ—çš„é€†åºæ•°çš„å¥‡å¶æ€§æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿™å°±å¯ä»¥æˆä¸ºåŒºåˆ†ä¸¤ç§å¯¹æ¢æ¬¡æ•°çš„åˆ¤åˆ«ä¾æ®ï¼›
- åœ¨å‘ç°äº†ä¸Šè¿° trick åï¼Œæœ¬é¢˜å°±å˜æˆäº†æ±‚åºåˆ—é€†åºæ•°çš„æ¿å­é¢˜ã€‚å¯ä»¥å€ŸåŠ©å½’å¹¶æ’åºçš„åˆ†æ²»æ€æƒ³æ±‚è§£ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(n \log n)$

=== "Python"

    ```python
    n = int(input().strip())
    a = list(map(int, input().strip().split()))
    
    def merge_sort(l: int, r: int) -> int:
        if l >= r:
            return 0
    
        # divide
        mid = (l + r) >> 1
    
        # conquer
        ans = merge_sort(l, mid) + merge_sort(mid + 1, r)
    
        # combine
        t = []
        i, j = l, mid + 1
        while i <= mid and j <= r:
            if a[i] <= a[j]:
                t.append(a[i])
                i += 1
            else:
                t.append(a[j])
                j += 1
                ans += mid - i + 1  # ç‚¹ç›ä¹‹ç¬”
        while i <= mid:
            t.append(a[i])
            i += 1
        while j <= r:
            t.append(a[j])
            j += 1
        a[l:r+1] = t
    
        return ans
    
    cnt = merge_sort(0, n - 1)
    
    if n & 1:
        print(1 if cnt & 1 else 2)
    else:
        print(2 if cnt & 1 else 1)
    ```

=== "C++"

    ```cpp
    #include <iostream>
    #include <vector>
    
    using namespace std;
    using ll = long long;
    
    const int N = 1000010;
    
    int n;
    int a[N];
    
    ll merge_sort(int l, int r) {
        if (l >= r) {
            return 0;
        }
    
        // divide
        int mid = (l + r) >> 1;
    
        // conquer
        ll ans = merge_sort(l, mid) + merge_sort(mid + 1, r);
    
        // combine
        int i = l, j = mid + 1;
        vector<int> t;
        while (i <= mid && j <= r) {
            if (a[i] <= a[j]) {
                t.push_back(a[i++]);
            } else {
                t.push_back(a[j++]);
                ans += mid - i + 1;  // ç‚¹ç›ä¹‹ç¬”
            }
        }
        while (i <= mid) {
            t.push_back(a[i++]);
        }
        while (j <= r) {
            t.push_back(a[j++]);
        }
        for (int k = l, idx = 0; k <= r; k++) {
            a[k] = t[idx++];
        }
    
        return ans;
    }
    
    int main() {
        cin >> n;
        for (int i = 0; i < n; i++) {
            cin >> a[i];
        }
    
        ll cnt = merge_sort(0, n - 1);
    
        if (n & 1) {
            cout << (cnt & 1 ? 1 : 2) << "\n";
        } else {
            cout << (cnt & 1 ? 2 : 1) << "\n";
        }
    
        return 0;
    }
    ```
